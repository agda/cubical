<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.HITs.Modulo.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">module</a> <a id="32" href="Cubical.HITs.Modulo.Base.html" class="Module">Cubical.HITs.Modulo.Base</a> <a id="57" class="Keyword">where</a>

<a id="64" class="Keyword">open</a> <a id="69" class="Keyword">import</a> <a id="76" href="Cubical.Foundations.Function.html" class="Module">Cubical.Foundations.Function</a>
<a id="105" class="Keyword">open</a> <a id="110" class="Keyword">import</a> <a id="117" href="Cubical.Foundations.HLevels.html" class="Module">Cubical.Foundations.HLevels</a>
<a id="145" class="Keyword">open</a> <a id="150" class="Keyword">import</a> <a id="157" href="Cubical.Foundations.Isomorphism.html" class="Module">Cubical.Foundations.Isomorphism</a>
<a id="189" class="Keyword">open</a> <a id="194" class="Keyword">import</a> <a id="201" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>

<a id="230" class="Keyword">open</a> <a id="235" class="Keyword">import</a> <a id="242" href="Cubical.Data.Empty.html" class="Module">Cubical.Data.Empty</a> <a id="261" class="Keyword">using</a> <a id="267" class="Symbol">(</a><a id="268" href="Cubical.Data.Empty.Base.html#145" class="Datatype">⊥</a><a id="269" class="Symbol">)</a>
<a id="271" class="Keyword">open</a> <a id="276" class="Keyword">import</a> <a id="283" href="Cubical.Data.Nat.html" class="Module">Cubical.Data.Nat</a> <a id="300" class="Keyword">using</a> <a id="306" class="Symbol">(</a><a id="307" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="308" class="Symbol">;</a> <a id="310" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="314" class="Symbol">;</a> <a id="316" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="319" class="Symbol">;</a> <a id="321" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="324" class="Symbol">)</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="Cubical.Data.Unit.html" class="Module">Cubical.Data.Unit</a> <a id="356" class="Keyword">renaming</a> <a id="365" class="Symbol">(</a><a id="366" href="Cubical.Data.Unit.Base.html#171" class="Record">Unit</a> <a id="371" class="Symbol">to</a> <a id="374" class="Record">⊤</a><a id="375" class="Symbol">)</a>

<a id="378" class="Keyword">open</a> <a id="383" class="Keyword">import</a> <a id="390" href="Cubical.Relation.Nullary.html" class="Module">Cubical.Relation.Nullary</a>

<a id="NonZero"></a><a id="416" href="Cubical.HITs.Modulo.Base.html#416" class="Function">NonZero</a> <a id="424" class="Symbol">:</a> <a id="426" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="428" class="Symbol">→</a> <a id="430" href="Agda.Primitive.html#326" class="Primitive">Type₀</a>
<a id="436" href="Cubical.HITs.Modulo.Base.html#416" class="Function">NonZero</a> <a id="444" class="Number">0</a> <a id="446" class="Symbol">=</a> <a id="448" href="Cubical.Data.Empty.Base.html#145" class="Datatype">⊥</a>
<a id="450" href="Cubical.HITs.Modulo.Base.html#416" class="CatchallClause Function">NonZero</a><a id="457" class="CatchallClause"> </a><a id="458" class="CatchallClause Symbol">_</a> <a id="460" class="Symbol">=</a> <a id="462" href="Cubical.HITs.Modulo.Base.html#374" class="Record">⊤</a>

<a id="465" class="Keyword">private</a>
  <a id="475" class="Keyword">variable</a>
    <a id="488" href="Cubical.HITs.Modulo.Base.html#488" class="Generalizable">ℓ</a> <a id="490" class="Symbol">:</a> <a id="492" href="Agda.Primitive.html#597" class="Postulate">Level</a>
    <a id="502" href="Cubical.HITs.Modulo.Base.html#502" class="Generalizable">k</a> <a id="504" class="Symbol">:</a> <a id="506" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>

<a id="509" class="Comment">-- The Modulo type is similar to the Fin type, but instead of being</a>
<a id="577" class="Comment">-- inhabited by canonical values, the inhabitants are all naturals,</a>
<a id="645" class="Comment">-- and paths are added between numbers that have the same residue.</a>
<a id="712" class="Comment">--</a>
<a id="715" class="Comment">-- This representation makes it easier to do certain arithmetic</a>
<a id="779" class="Comment">-- without changing the modulus. For instance, we can just add any</a>
<a id="846" class="Comment">-- natural to a Modulo k to get another, whereas with Fin k, we must</a>
<a id="915" class="Comment">-- calculate the canonical representative.</a>
<a id="958" class="Comment">--</a>
<a id="961" class="Comment">-- The reason the path constructor is guarded is to avoid adding</a>
<a id="1026" class="Comment">-- non-trivial path structure to the k=0 case. If it were not guarded,</a>
<a id="1097" class="Comment">-- each `Modulo 0` would become like the circle, and guarding the</a>
<a id="1163" class="Comment">-- constructor is somewhat easier to work with than truncation.</a>
<a id="1227" class="Comment">--</a>
<a id="1230" class="Comment">-- Note also that unlike `Fin 0`, `Modulo 0` is equivalent to the naturals.</a>
<a id="1306" class="Keyword">data</a> <a id="Modulo"></a><a id="1311" href="Cubical.HITs.Modulo.Base.html#1311" class="Datatype">Modulo</a> <a id="1318" class="Symbol">(</a><a id="1319" href="Cubical.HITs.Modulo.Base.html#1319" class="Bound">k</a> <a id="1321" class="Symbol">:</a> <a id="1323" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="1324" class="Symbol">)</a> <a id="1326" class="Symbol">:</a> <a id="1328" href="Agda.Primitive.html#326" class="Primitive">Type₀</a> <a id="1334" class="Keyword">where</a>
  <a id="Modulo.embed"></a><a id="1342" href="Cubical.HITs.Modulo.Base.html#1342" class="InductiveConstructor">embed</a> <a id="1348" class="Symbol">:</a> <a id="1350" class="Symbol">(</a><a id="1351" href="Cubical.HITs.Modulo.Base.html#1351" class="Bound">n</a> <a id="1353" class="Symbol">:</a> <a id="1355" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="1356" class="Symbol">)</a> <a id="1358" class="Symbol">→</a> <a id="1360" href="Cubical.HITs.Modulo.Base.html#1311" class="Datatype">Modulo</a> <a id="1367" href="Cubical.HITs.Modulo.Base.html#1319" class="Bound">k</a>
  <a id="Modulo.pre-step"></a><a id="1371" href="Cubical.HITs.Modulo.Base.html#1371" class="InductiveConstructor">pre-step</a> <a id="1380" class="Symbol">:</a> <a id="1382" href="Cubical.HITs.Modulo.Base.html#416" class="Function">NonZero</a> <a id="1390" href="Cubical.HITs.Modulo.Base.html#1319" class="Bound">k</a> <a id="1392" class="Symbol">→</a> <a id="1394" class="Symbol">(</a><a id="1395" href="Cubical.HITs.Modulo.Base.html#1395" class="Bound">n</a> <a id="1397" class="Symbol">:</a> <a id="1399" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="1400" class="Symbol">)</a> <a id="1402" class="Symbol">→</a> <a id="1404" href="Cubical.HITs.Modulo.Base.html#1342" class="InductiveConstructor">embed</a> <a id="1410" href="Cubical.HITs.Modulo.Base.html#1395" class="Bound">n</a> <a id="1412" href="Agda.Builtin.Cubical.Path.html#388" class="Function Operator">≡</a> <a id="1414" href="Cubical.HITs.Modulo.Base.html#1342" class="InductiveConstructor">embed</a> <a id="1420" class="Symbol">(</a><a id="1421" href="Cubical.HITs.Modulo.Base.html#1319" class="Bound">k</a> <a id="1423" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1425" href="Cubical.HITs.Modulo.Base.html#1395" class="Bound">n</a><a id="1426" class="Symbol">)</a>

<a id="1429" class="Comment">-- When we are working with k = suc k₀, the `step` alias is much</a>
<a id="1494" class="Comment">-- we can use this alias.</a>
<a id="1520" class="Keyword">pattern</a> <a id="step"></a><a id="1528" href="Cubical.HITs.Modulo.Base.html#1528" class="InductiveConstructor">step</a> <a id="1533" href="Cubical.HITs.Modulo.Base.html#1550" class="Bound">n</a> <a id="1535" href="Cubical.HITs.Modulo.Base.html#1552" class="Bound">i</a> <a id="1537" class="Symbol">=</a> <a id="1539" href="Cubical.HITs.Modulo.Base.html#1371" class="InductiveConstructor">pre-step</a> <a id="1548" class="Symbol">_</a> <a id="1550" href="Cubical.HITs.Modulo.Base.html#1550" class="Bound">n</a> <a id="1552" href="Cubical.HITs.Modulo.Base.html#1552" class="Bound">i</a>

<a id="1555" class="Comment">-- Helper to avoid having to case on `k` in certain places.</a>
<a id="ztep"></a><a id="1615" href="Cubical.HITs.Modulo.Base.html#1615" class="Function">ztep</a> <a id="1620" class="Symbol">:</a> <a id="1622" class="Symbol">∀{</a><a id="1624" href="Cubical.HITs.Modulo.Base.html#1624" class="Bound">k</a><a id="1625" class="Symbol">}</a> <a id="1627" href="Cubical.HITs.Modulo.Base.html#1627" class="Bound">n</a> <a id="1629" class="Symbol">→</a> <a id="1631" href="Cubical.Core.Primitives.html#1866" class="Function">Path</a> <a id="1636" class="Symbol">(</a><a id="1637" href="Cubical.HITs.Modulo.Base.html#1311" class="Datatype">Modulo</a> <a id="1644" href="Cubical.HITs.Modulo.Base.html#1624" class="Bound">k</a><a id="1645" class="Symbol">)</a> <a id="1647" class="Symbol">(</a><a id="1648" href="Cubical.HITs.Modulo.Base.html#1342" class="InductiveConstructor">embed</a> <a id="1654" href="Cubical.HITs.Modulo.Base.html#1627" class="Bound">n</a><a id="1655" class="Symbol">)</a> <a id="1657" class="Symbol">(</a><a id="1658" href="Cubical.HITs.Modulo.Base.html#1342" class="InductiveConstructor">embed</a> <a id="1664" class="Symbol">(</a><a id="1665" href="Cubical.HITs.Modulo.Base.html#1624" class="Bound">k</a> <a id="1667" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1669" href="Cubical.HITs.Modulo.Base.html#1627" class="Bound">n</a><a id="1670" class="Symbol">))</a>
<a id="1673" href="Cubical.HITs.Modulo.Base.html#1615" class="Function">ztep</a> <a id="1678" class="Symbol">{</a><a id="1679" class="Number">0</a><a id="1680" class="Symbol">}</a>     <a id="1686" href="Cubical.HITs.Modulo.Base.html#1686" class="Bound">n</a> <a id="1688" class="Symbol">=</a> <a id="1690" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a>
<a id="1695" href="Cubical.HITs.Modulo.Base.html#1615" class="Function">ztep</a> <a id="1700" class="Symbol">{</a><a id="1701" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1705" href="Cubical.HITs.Modulo.Base.html#1705" class="Bound">k</a><a id="1706" class="Symbol">}</a> <a id="1708" href="Cubical.HITs.Modulo.Base.html#1708" class="Bound">n</a> <a id="1710" class="Symbol">=</a> <a id="1712" href="Cubical.HITs.Modulo.Base.html#1528" class="InductiveConstructor">step</a> <a id="1717" href="Cubical.HITs.Modulo.Base.html#1708" class="Bound">n</a>

<a id="1720" class="Comment">-- The standard eliminator for `Modulo`.</a>
<a id="elim"></a><a id="1761" href="Cubical.HITs.Modulo.Base.html#1761" class="Function">elim</a>
  <a id="1768" class="Symbol">:</a> <a id="1770" class="Symbol">(</a><a id="1771" href="Cubical.HITs.Modulo.Base.html#1771" class="Bound">P</a> <a id="1773" class="Symbol">:</a> <a id="1775" class="Symbol">∀</a> <a id="1777" href="Cubical.HITs.Modulo.Base.html#1777" class="Bound">k</a> <a id="1779" class="Symbol">→</a> <a id="1781" href="Cubical.HITs.Modulo.Base.html#1311" class="Datatype">Modulo</a> <a id="1788" href="Cubical.HITs.Modulo.Base.html#1777" class="Bound">k</a> <a id="1790" class="Symbol">→</a> <a id="1792" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1797" href="Cubical.HITs.Modulo.Base.html#488" class="Generalizable">ℓ</a><a id="1798" class="Symbol">)</a>
  <a id="1802" class="Symbol">→</a> <a id="1804" class="Symbol">(</a><a id="1805" href="Cubical.HITs.Modulo.Base.html#1805" class="Bound">e</a> <a id="1807" class="Symbol">:</a> <a id="1809" class="Symbol">∀</a> <a id="1811" href="Cubical.HITs.Modulo.Base.html#1811" class="Bound">k</a> <a id="1813" href="Cubical.HITs.Modulo.Base.html#1813" class="Bound">n</a> <a id="1815" class="Symbol">→</a> <a id="1817" href="Cubical.HITs.Modulo.Base.html#1771" class="Bound">P</a> <a id="1819" href="Cubical.HITs.Modulo.Base.html#1811" class="Bound">k</a> <a id="1821" class="Symbol">(</a><a id="1822" href="Cubical.HITs.Modulo.Base.html#1342" class="InductiveConstructor">embed</a> <a id="1828" href="Cubical.HITs.Modulo.Base.html#1813" class="Bound">n</a><a id="1829" class="Symbol">))</a>
  <a id="1834" class="Symbol">→</a> <a id="1836" class="Symbol">(</a><a id="1837" href="Cubical.HITs.Modulo.Base.html#1837" class="Bound">st</a> <a id="1840" class="Symbol">:</a> <a id="1842" class="Symbol">∀</a> <a id="1844" href="Cubical.HITs.Modulo.Base.html#1844" class="Bound">k</a> <a id="1846" href="Cubical.HITs.Modulo.Base.html#1846" class="Bound">n</a> <a id="1848" class="Symbol">→</a> <a id="1850" href="Agda.Builtin.Cubical.Path.html#197" class="Postulate">PathP</a> <a id="1856" class="Symbol">(λ</a> <a id="1859" href="Cubical.HITs.Modulo.Base.html#1859" class="Bound">i</a> <a id="1861" class="Symbol">→</a> <a id="1863" href="Cubical.HITs.Modulo.Base.html#1771" class="Bound">P</a> <a id="1865" class="Symbol">(</a><a id="1866" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1870" href="Cubical.HITs.Modulo.Base.html#1844" class="Bound">k</a><a id="1871" class="Symbol">)</a> <a id="1873" class="Symbol">(</a><a id="1874" href="Cubical.HITs.Modulo.Base.html#1528" class="InductiveConstructor">step</a> <a id="1879" href="Cubical.HITs.Modulo.Base.html#1846" class="Bound">n</a> <a id="1881" href="Cubical.HITs.Modulo.Base.html#1859" class="Bound">i</a><a id="1882" class="Symbol">))</a> <a id="1885" class="Symbol">(</a><a id="1886" href="Cubical.HITs.Modulo.Base.html#1805" class="Bound">e</a> <a id="1888" class="Symbol">(</a><a id="1889" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1893" href="Cubical.HITs.Modulo.Base.html#1844" class="Bound">k</a><a id="1894" class="Symbol">)</a> <a id="1896" href="Cubical.HITs.Modulo.Base.html#1846" class="Bound">n</a><a id="1897" class="Symbol">)</a> <a id="1899" class="Symbol">(</a><a id="1900" href="Cubical.HITs.Modulo.Base.html#1805" class="Bound">e</a> <a id="1902" class="Symbol">(</a><a id="1903" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1907" href="Cubical.HITs.Modulo.Base.html#1844" class="Bound">k</a><a id="1908" class="Symbol">)</a> <a id="1910" class="Symbol">(</a><a id="1911" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1915" href="Cubical.HITs.Modulo.Base.html#1844" class="Bound">k</a> <a id="1917" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1919" href="Cubical.HITs.Modulo.Base.html#1846" class="Bound">n</a><a id="1920" class="Symbol">)))</a>
  <a id="1926" class="Symbol">→</a> <a id="1928" class="Symbol">(</a><a id="1929" href="Cubical.HITs.Modulo.Base.html#1929" class="Bound">m</a> <a id="1931" class="Symbol">:</a> <a id="1933" href="Cubical.HITs.Modulo.Base.html#1311" class="Datatype">Modulo</a> <a id="1940" href="Cubical.HITs.Modulo.Base.html#502" class="Generalizable">k</a><a id="1941" class="Symbol">)</a> <a id="1943" class="Symbol">→</a> <a id="1945" href="Cubical.HITs.Modulo.Base.html#1771" class="Bound">P</a> <a id="1947" href="Cubical.HITs.Modulo.Base.html#502" class="Generalizable">k</a> <a id="1949" href="Cubical.HITs.Modulo.Base.html#1929" class="Bound">m</a>
<a id="1951" href="Cubical.HITs.Modulo.Base.html#1761" class="Function">elim</a> <a id="1956" href="Cubical.HITs.Modulo.Base.html#1956" class="Bound">P</a> <a id="1958" href="Cubical.HITs.Modulo.Base.html#1958" class="Bound">e</a> <a id="1960" href="Cubical.HITs.Modulo.Base.html#1960" class="Bound">st</a> <a id="1963" class="Symbol">(</a><a id="1964" href="Cubical.HITs.Modulo.Base.html#1342" class="InductiveConstructor">embed</a> <a id="1970" href="Cubical.HITs.Modulo.Base.html#1970" class="Bound">n</a><a id="1971" class="Symbol">)</a> <a id="1973" class="Symbol">=</a> <a id="1975" href="Cubical.HITs.Modulo.Base.html#1958" class="Bound">e</a> <a id="1977" class="Symbol">_</a> <a id="1979" href="Cubical.HITs.Modulo.Base.html#1970" class="Bound">n</a>
<a id="1981" href="Cubical.HITs.Modulo.Base.html#1761" class="Function">elim</a> <a id="1986" class="Symbol">{</a><a id="1987" class="Argument">k</a> <a id="1989" class="Symbol">=</a> <a id="1991" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1995" href="Cubical.HITs.Modulo.Base.html#1995" class="Bound">k</a><a id="1996" class="Symbol">}</a> <a id="1998" href="Cubical.HITs.Modulo.Base.html#1998" class="Bound">P</a> <a id="2000" href="Cubical.HITs.Modulo.Base.html#2000" class="Bound">e</a> <a id="2002" href="Cubical.HITs.Modulo.Base.html#2002" class="Bound">st</a> <a id="2005" class="Symbol">(</a><a id="2006" href="Cubical.HITs.Modulo.Base.html#1528" class="InductiveConstructor">step</a> <a id="2011" href="Cubical.HITs.Modulo.Base.html#2011" class="Bound">n</a> <a id="2013" href="Cubical.HITs.Modulo.Base.html#2013" class="Bound">i</a><a id="2014" class="Symbol">)</a> <a id="2016" class="Symbol">=</a> <a id="2018" href="Cubical.HITs.Modulo.Base.html#2002" class="Bound">st</a> <a id="2021" href="Cubical.HITs.Modulo.Base.html#1995" class="Bound">k</a> <a id="2023" href="Cubical.HITs.Modulo.Base.html#2011" class="Bound">n</a> <a id="2025" href="Cubical.HITs.Modulo.Base.html#2013" class="Bound">i</a>
</pre></body></html>