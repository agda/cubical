<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.HITs.Modulo.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Keyword">module</a> <a id="9" href="Cubical.HITs.Modulo.Base.html" class="Module">Cubical.HITs.Modulo.Base</a> <a id="34" class="Keyword">where</a>

<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Cubical.Foundations.Function.html" class="Module">Cubical.Foundations.Function</a>
<a id="82" class="Keyword">open</a> <a id="87" class="Keyword">import</a> <a id="94" href="Cubical.Foundations.HLevels.html" class="Module">Cubical.Foundations.HLevels</a>
<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="Cubical.Foundations.Isomorphism.html" class="Module">Cubical.Foundations.Isomorphism</a>
<a id="166" class="Keyword">open</a> <a id="171" class="Keyword">import</a> <a id="178" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>

<a id="207" class="Keyword">open</a> <a id="212" class="Keyword">import</a> <a id="219" href="Cubical.Data.Empty.html" class="Module">Cubical.Data.Empty</a> <a id="238" class="Keyword">using</a> <a id="244" class="Symbol">(</a><a id="245" href="Cubical.Data.Empty.Base.html#122" class="Datatype">⊥</a><a id="246" class="Symbol">)</a>
<a id="248" class="Keyword">open</a> <a id="253" class="Keyword">import</a> <a id="260" href="Cubical.Data.Nat.html" class="Module">Cubical.Data.Nat</a> <a id="277" class="Keyword">using</a> <a id="283" class="Symbol">(</a><a id="284" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="285" class="Symbol">;</a> <a id="287" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="291" class="Symbol">;</a> <a id="293" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="296" class="Symbol">;</a> <a id="298" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a><a id="301" class="Symbol">)</a>
<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Cubical.Data.Unit.html" class="Module">Cubical.Data.Unit</a> <a id="333" class="Keyword">renaming</a> <a id="342" class="Symbol">(</a><a id="343" href="Cubical.Data.Unit.Base.html#149" class="Record">Unit</a> <a id="348" class="Symbol">to</a> <a id="351" class="Record">⊤</a><a id="352" class="Symbol">)</a>

<a id="355" class="Keyword">open</a> <a id="360" class="Keyword">import</a> <a id="367" href="Cubical.Relation.Nullary.html" class="Module">Cubical.Relation.Nullary</a>

<a id="NonZero"></a><a id="393" href="Cubical.HITs.Modulo.Base.html#393" class="Function">NonZero</a> <a id="401" class="Symbol">:</a> <a id="403" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="405" class="Symbol">→</a> <a id="407" href="Agda.Primitive.html#388" class="Primitive">Type₀</a>
<a id="413" href="Cubical.HITs.Modulo.Base.html#393" class="Function">NonZero</a> <a id="421" class="Number">0</a> <a id="423" class="Symbol">=</a> <a id="425" href="Cubical.Data.Empty.Base.html#122" class="Datatype">⊥</a>
<a id="427" href="Cubical.HITs.Modulo.Base.html#393" class="CatchallClause Function">NonZero</a><a id="434" class="CatchallClause"> </a><a id="435" class="CatchallClause Symbol">_</a> <a id="437" class="Symbol">=</a> <a id="439" href="Cubical.HITs.Modulo.Base.html#351" class="Record">⊤</a>

<a id="442" class="Keyword">private</a>
  <a id="452" class="Keyword">variable</a>
    <a id="465" href="Cubical.HITs.Modulo.Base.html#465" class="Generalizable">ℓ</a> <a id="467" class="Symbol">:</a> <a id="469" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="479" href="Cubical.HITs.Modulo.Base.html#479" class="Generalizable">k</a> <a id="481" class="Symbol">:</a> <a id="483" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

<a id="486" class="Comment">-- The Modulo type is similar to the Fin type, but instead of being</a>
<a id="554" class="Comment">-- inhabited by canonical values, the inhabitants are all naturals,</a>
<a id="622" class="Comment">-- and paths are added between numbers that have the same residue.</a>
<a id="689" class="Comment">--</a>
<a id="692" class="Comment">-- This representation makes it easier to do certain arithmetic</a>
<a id="756" class="Comment">-- without changing the modulus. For instance, we can just add any</a>
<a id="823" class="Comment">-- natural to a Modulo k to get another, whereas with Fin k, we must</a>
<a id="892" class="Comment">-- calculate the canonical representative.</a>
<a id="935" class="Comment">--</a>
<a id="938" class="Comment">-- The reason the path constructor is guarded is to avoid adding</a>
<a id="1003" class="Comment">-- non-trivial path structure to the k=0 case. If it were not guarded,</a>
<a id="1074" class="Comment">-- each `Modulo 0` would become like the circle, and guarding the</a>
<a id="1140" class="Comment">-- constructor is somewhat easier to work with than truncation.</a>
<a id="1204" class="Comment">--</a>
<a id="1207" class="Comment">-- Note also that unlike `Fin 0`, `Modulo 0` is equivalent to the naturals.</a>
<a id="1283" class="Keyword">data</a> <a id="Modulo"></a><a id="1288" href="Cubical.HITs.Modulo.Base.html#1288" class="Datatype">Modulo</a> <a id="1295" class="Symbol">(</a><a id="1296" href="Cubical.HITs.Modulo.Base.html#1296" class="Bound">k</a> <a id="1298" class="Symbol">:</a> <a id="1300" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1301" class="Symbol">)</a> <a id="1303" class="Symbol">:</a> <a id="1305" href="Agda.Primitive.html#388" class="Primitive">Type₀</a> <a id="1311" class="Keyword">where</a>
  <a id="Modulo.embed"></a><a id="1319" href="Cubical.HITs.Modulo.Base.html#1319" class="InductiveConstructor">embed</a> <a id="1325" class="Symbol">:</a> <a id="1327" class="Symbol">(</a><a id="1328" href="Cubical.HITs.Modulo.Base.html#1328" class="Bound">n</a> <a id="1330" class="Symbol">:</a> <a id="1332" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1333" class="Symbol">)</a> <a id="1335" class="Symbol">→</a> <a id="1337" href="Cubical.HITs.Modulo.Base.html#1288" class="Datatype">Modulo</a> <a id="1344" href="Cubical.HITs.Modulo.Base.html#1296" class="Bound">k</a>
  <a id="Modulo.pre-step"></a><a id="1348" href="Cubical.HITs.Modulo.Base.html#1348" class="InductiveConstructor">pre-step</a> <a id="1357" class="Symbol">:</a> <a id="1359" href="Cubical.HITs.Modulo.Base.html#393" class="Function">NonZero</a> <a id="1367" href="Cubical.HITs.Modulo.Base.html#1296" class="Bound">k</a> <a id="1369" class="Symbol">→</a> <a id="1371" class="Symbol">(</a><a id="1372" href="Cubical.HITs.Modulo.Base.html#1372" class="Bound">n</a> <a id="1374" class="Symbol">:</a> <a id="1376" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1377" class="Symbol">)</a> <a id="1379" class="Symbol">→</a> <a id="1381" href="Cubical.HITs.Modulo.Base.html#1319" class="InductiveConstructor">embed</a> <a id="1387" href="Cubical.HITs.Modulo.Base.html#1372" class="Bound">n</a> <a id="1389" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1391" href="Cubical.HITs.Modulo.Base.html#1319" class="InductiveConstructor">embed</a> <a id="1397" class="Symbol">(</a><a id="1398" href="Cubical.HITs.Modulo.Base.html#1296" class="Bound">k</a> <a id="1400" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1402" href="Cubical.HITs.Modulo.Base.html#1372" class="Bound">n</a><a id="1403" class="Symbol">)</a>

<a id="1406" class="Comment">-- When we are working with k = suc k₀, the `step` alias is much</a>
<a id="1471" class="Comment">-- we can use this alias.</a>
<a id="1497" class="Keyword">pattern</a> <a id="step"></a><a id="1505" href="Cubical.HITs.Modulo.Base.html#1505" class="InductiveConstructor">step</a> <a id="1510" href="Cubical.HITs.Modulo.Base.html#1527" class="Bound">n</a> <a id="1512" href="Cubical.HITs.Modulo.Base.html#1529" class="Bound">i</a> <a id="1514" class="Symbol">=</a> <a id="1516" href="Cubical.HITs.Modulo.Base.html#1348" class="InductiveConstructor">pre-step</a> <a id="1525" class="Symbol">_</a> <a id="1527" href="Cubical.HITs.Modulo.Base.html#1527" class="Bound">n</a> <a id="1529" href="Cubical.HITs.Modulo.Base.html#1529" class="Bound">i</a>

<a id="1532" class="Comment">-- Helper to avoid having to case on `k` in certain places.</a>
<a id="ztep"></a><a id="1592" href="Cubical.HITs.Modulo.Base.html#1592" class="Function">ztep</a> <a id="1597" class="Symbol">:</a> <a id="1599" class="Symbol">∀{</a><a id="1601" href="Cubical.HITs.Modulo.Base.html#1601" class="Bound">k</a><a id="1602" class="Symbol">}</a> <a id="1604" href="Cubical.HITs.Modulo.Base.html#1604" class="Bound">n</a> <a id="1606" class="Symbol">→</a> <a id="1608" href="Cubical.Core.Primitives.html#1805" class="Function">Path</a> <a id="1613" class="Symbol">(</a><a id="1614" href="Cubical.HITs.Modulo.Base.html#1288" class="Datatype">Modulo</a> <a id="1621" href="Cubical.HITs.Modulo.Base.html#1601" class="Bound">k</a><a id="1622" class="Symbol">)</a> <a id="1624" class="Symbol">(</a><a id="1625" href="Cubical.HITs.Modulo.Base.html#1319" class="InductiveConstructor">embed</a> <a id="1631" href="Cubical.HITs.Modulo.Base.html#1604" class="Bound">n</a><a id="1632" class="Symbol">)</a> <a id="1634" class="Symbol">(</a><a id="1635" href="Cubical.HITs.Modulo.Base.html#1319" class="InductiveConstructor">embed</a> <a id="1641" class="Symbol">(</a><a id="1642" href="Cubical.HITs.Modulo.Base.html#1601" class="Bound">k</a> <a id="1644" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1646" href="Cubical.HITs.Modulo.Base.html#1604" class="Bound">n</a><a id="1647" class="Symbol">))</a>
<a id="1650" href="Cubical.HITs.Modulo.Base.html#1592" class="Function">ztep</a> <a id="1655" class="Symbol">{</a><a id="1656" class="Number">0</a><a id="1657" class="Symbol">}</a>     <a id="1663" href="Cubical.HITs.Modulo.Base.html#1663" class="Bound">n</a> <a id="1665" class="Symbol">=</a> <a id="1667" href="Cubical.Foundations.Prelude.html#892" class="Function">refl</a>
<a id="1672" href="Cubical.HITs.Modulo.Base.html#1592" class="Function">ztep</a> <a id="1677" class="Symbol">{</a><a id="1678" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1682" href="Cubical.HITs.Modulo.Base.html#1682" class="Bound">k</a><a id="1683" class="Symbol">}</a> <a id="1685" href="Cubical.HITs.Modulo.Base.html#1685" class="Bound">n</a> <a id="1687" class="Symbol">=</a> <a id="1689" href="Cubical.HITs.Modulo.Base.html#1505" class="InductiveConstructor">step</a> <a id="1694" href="Cubical.HITs.Modulo.Base.html#1685" class="Bound">n</a>

<a id="1697" class="Comment">-- The standard eliminator for `Modulo`.</a>
<a id="elim"></a><a id="1738" href="Cubical.HITs.Modulo.Base.html#1738" class="Function">elim</a>
  <a id="1745" class="Symbol">:</a> <a id="1747" class="Symbol">(</a><a id="1748" href="Cubical.HITs.Modulo.Base.html#1748" class="Bound">P</a> <a id="1750" class="Symbol">:</a> <a id="1752" class="Symbol">∀</a> <a id="1754" href="Cubical.HITs.Modulo.Base.html#1754" class="Bound">k</a> <a id="1756" class="Symbol">→</a> <a id="1758" href="Cubical.HITs.Modulo.Base.html#1288" class="Datatype">Modulo</a> <a id="1765" href="Cubical.HITs.Modulo.Base.html#1754" class="Bound">k</a> <a id="1767" class="Symbol">→</a> <a id="1769" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1774" href="Cubical.HITs.Modulo.Base.html#465" class="Generalizable">ℓ</a><a id="1775" class="Symbol">)</a>
  <a id="1779" class="Symbol">→</a> <a id="1781" class="Symbol">(</a><a id="1782" href="Cubical.HITs.Modulo.Base.html#1782" class="Bound">e</a> <a id="1784" class="Symbol">:</a> <a id="1786" class="Symbol">∀</a> <a id="1788" href="Cubical.HITs.Modulo.Base.html#1788" class="Bound">k</a> <a id="1790" href="Cubical.HITs.Modulo.Base.html#1790" class="Bound">n</a> <a id="1792" class="Symbol">→</a> <a id="1794" href="Cubical.HITs.Modulo.Base.html#1748" class="Bound">P</a> <a id="1796" href="Cubical.HITs.Modulo.Base.html#1788" class="Bound">k</a> <a id="1798" class="Symbol">(</a><a id="1799" href="Cubical.HITs.Modulo.Base.html#1319" class="InductiveConstructor">embed</a> <a id="1805" href="Cubical.HITs.Modulo.Base.html#1790" class="Bound">n</a><a id="1806" class="Symbol">))</a>
  <a id="1811" class="Symbol">→</a> <a id="1813" class="Symbol">(</a><a id="1814" href="Cubical.HITs.Modulo.Base.html#1814" class="Bound">st</a> <a id="1817" class="Symbol">:</a> <a id="1819" class="Symbol">∀</a> <a id="1821" href="Cubical.HITs.Modulo.Base.html#1821" class="Bound">k</a> <a id="1823" href="Cubical.HITs.Modulo.Base.html#1823" class="Bound">n</a> <a id="1825" class="Symbol">→</a> <a id="1827" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="1833" class="Symbol">(λ</a> <a id="1836" href="Cubical.HITs.Modulo.Base.html#1836" class="Bound">i</a> <a id="1838" class="Symbol">→</a> <a id="1840" href="Cubical.HITs.Modulo.Base.html#1748" class="Bound">P</a> <a id="1842" class="Symbol">(</a><a id="1843" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1847" href="Cubical.HITs.Modulo.Base.html#1821" class="Bound">k</a><a id="1848" class="Symbol">)</a> <a id="1850" class="Symbol">(</a><a id="1851" href="Cubical.HITs.Modulo.Base.html#1505" class="InductiveConstructor">step</a> <a id="1856" href="Cubical.HITs.Modulo.Base.html#1823" class="Bound">n</a> <a id="1858" href="Cubical.HITs.Modulo.Base.html#1836" class="Bound">i</a><a id="1859" class="Symbol">))</a> <a id="1862" class="Symbol">(</a><a id="1863" href="Cubical.HITs.Modulo.Base.html#1782" class="Bound">e</a> <a id="1865" class="Symbol">(</a><a id="1866" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1870" href="Cubical.HITs.Modulo.Base.html#1821" class="Bound">k</a><a id="1871" class="Symbol">)</a> <a id="1873" href="Cubical.HITs.Modulo.Base.html#1823" class="Bound">n</a><a id="1874" class="Symbol">)</a> <a id="1876" class="Symbol">(</a><a id="1877" href="Cubical.HITs.Modulo.Base.html#1782" class="Bound">e</a> <a id="1879" class="Symbol">(</a><a id="1880" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1884" href="Cubical.HITs.Modulo.Base.html#1821" class="Bound">k</a><a id="1885" class="Symbol">)</a> <a id="1887" class="Symbol">(</a><a id="1888" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1892" href="Cubical.HITs.Modulo.Base.html#1821" class="Bound">k</a> <a id="1894" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1896" href="Cubical.HITs.Modulo.Base.html#1823" class="Bound">n</a><a id="1897" class="Symbol">)))</a>
  <a id="1903" class="Symbol">→</a> <a id="1905" class="Symbol">(</a><a id="1906" href="Cubical.HITs.Modulo.Base.html#1906" class="Bound">m</a> <a id="1908" class="Symbol">:</a> <a id="1910" href="Cubical.HITs.Modulo.Base.html#1288" class="Datatype">Modulo</a> <a id="1917" href="Cubical.HITs.Modulo.Base.html#479" class="Generalizable">k</a><a id="1918" class="Symbol">)</a> <a id="1920" class="Symbol">→</a> <a id="1922" href="Cubical.HITs.Modulo.Base.html#1748" class="Bound">P</a> <a id="1924" href="Cubical.HITs.Modulo.Base.html#479" class="Generalizable">k</a> <a id="1926" href="Cubical.HITs.Modulo.Base.html#1906" class="Bound">m</a>
<a id="1928" href="Cubical.HITs.Modulo.Base.html#1738" class="Function">elim</a> <a id="1933" href="Cubical.HITs.Modulo.Base.html#1933" class="Bound">P</a> <a id="1935" href="Cubical.HITs.Modulo.Base.html#1935" class="Bound">e</a> <a id="1937" href="Cubical.HITs.Modulo.Base.html#1937" class="Bound">st</a> <a id="1940" class="Symbol">(</a><a id="1941" href="Cubical.HITs.Modulo.Base.html#1319" class="InductiveConstructor">embed</a> <a id="1947" href="Cubical.HITs.Modulo.Base.html#1947" class="Bound">n</a><a id="1948" class="Symbol">)</a> <a id="1950" class="Symbol">=</a> <a id="1952" href="Cubical.HITs.Modulo.Base.html#1935" class="Bound">e</a> <a id="1954" class="Symbol">_</a> <a id="1956" href="Cubical.HITs.Modulo.Base.html#1947" class="Bound">n</a>
<a id="1958" href="Cubical.HITs.Modulo.Base.html#1738" class="Function">elim</a> <a id="1963" class="Symbol">{</a><a id="1964" class="Argument">k</a> <a id="1966" class="Symbol">=</a> <a id="1968" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1972" href="Cubical.HITs.Modulo.Base.html#1972" class="Bound">k</a><a id="1973" class="Symbol">}</a> <a id="1975" href="Cubical.HITs.Modulo.Base.html#1975" class="Bound">P</a> <a id="1977" href="Cubical.HITs.Modulo.Base.html#1977" class="Bound">e</a> <a id="1979" href="Cubical.HITs.Modulo.Base.html#1979" class="Bound">st</a> <a id="1982" class="Symbol">(</a><a id="1983" href="Cubical.HITs.Modulo.Base.html#1505" class="InductiveConstructor">step</a> <a id="1988" href="Cubical.HITs.Modulo.Base.html#1988" class="Bound">n</a> <a id="1990" href="Cubical.HITs.Modulo.Base.html#1990" class="Bound">i</a><a id="1991" class="Symbol">)</a> <a id="1993" class="Symbol">=</a> <a id="1995" href="Cubical.HITs.Modulo.Base.html#1979" class="Bound">st</a> <a id="1998" href="Cubical.HITs.Modulo.Base.html#1972" class="Bound">k</a> <a id="2000" href="Cubical.HITs.Modulo.Base.html#1988" class="Bound">n</a> <a id="2002" href="Cubical.HITs.Modulo.Base.html#1990" class="Bound">i</a>
</pre></body></html>