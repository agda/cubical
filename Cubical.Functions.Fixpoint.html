<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.Functions.Fixpoint</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-
  Definition of function fixpoint and Kraus&#39; lemma
-}</a>
<a id="58" class="Keyword">module</a> <a id="65" href="Cubical.Functions.Fixpoint.html" class="Module">Cubical.Functions.Fixpoint</a> <a id="92" class="Keyword">where</a>

<a id="99" class="Keyword">open</a> <a id="104" class="Keyword">import</a> <a id="111" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>
<a id="139" class="Keyword">open</a> <a id="144" class="Keyword">import</a> <a id="151" href="Cubical.Foundations.Function.html" class="Module">Cubical.Foundations.Function</a>
<a id="180" class="Keyword">open</a> <a id="185" class="Keyword">import</a> <a id="192" href="Cubical.Foundations.GroupoidLaws.html" class="Module">Cubical.Foundations.GroupoidLaws</a>

<a id="226" class="Keyword">private</a>
  <a id="236" class="Keyword">variable</a>
    <a id="249" href="Cubical.Functions.Fixpoint.html#249" class="Generalizable">ℓ</a> <a id="251" class="Symbol">:</a> <a id="253" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="263" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a> <a id="265" class="Symbol">:</a> <a id="267" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="272" href="Cubical.Functions.Fixpoint.html#249" class="Generalizable">ℓ</a>

<a id="Fixpoint"></a><a id="275" href="Cubical.Functions.Fixpoint.html#275" class="Function">Fixpoint</a> <a id="284" class="Symbol">:</a> <a id="286" class="Symbol">(</a><a id="287" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a> <a id="289" class="Symbol">→</a> <a id="291" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a><a id="292" class="Symbol">)</a> <a id="294" class="Symbol">→</a> <a id="296" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="301" class="Symbol">_</a>
<a id="303" href="Cubical.Functions.Fixpoint.html#275" class="Function">Fixpoint</a> <a id="312" class="Symbol">{</a><a id="313" class="Argument">A</a> <a id="315" class="Symbol">=</a> <a id="317" href="Cubical.Functions.Fixpoint.html#317" class="Bound">A</a><a id="318" class="Symbol">}</a> <a id="320" href="Cubical.Functions.Fixpoint.html#320" class="Bound">f</a> <a id="322" class="Symbol">=</a> <a id="324" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="326" href="Cubical.Functions.Fixpoint.html#317" class="Bound">A</a> <a id="328" class="Symbol">(λ</a> <a id="331" href="Cubical.Functions.Fixpoint.html#331" class="Bound">x</a> <a id="333" class="Symbol">→</a> <a id="335" href="Cubical.Functions.Fixpoint.html#320" class="Bound">f</a> <a id="337" href="Cubical.Functions.Fixpoint.html#331" class="Bound">x</a> <a id="339" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="341" href="Cubical.Functions.Fixpoint.html#331" class="Bound">x</a><a id="342" class="Symbol">)</a>

<a id="fixpoint"></a><a id="345" href="Cubical.Functions.Fixpoint.html#345" class="Function">fixpoint</a> <a id="354" class="Symbol">:</a> <a id="356" class="Symbol">{</a><a id="357" href="Cubical.Functions.Fixpoint.html#357" class="Bound">f</a> <a id="359" class="Symbol">:</a> <a id="361" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a> <a id="363" class="Symbol">→</a> <a id="365" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a><a id="366" class="Symbol">}</a> <a id="368" class="Symbol">→</a> <a id="370" href="Cubical.Functions.Fixpoint.html#275" class="Function">Fixpoint</a> <a id="379" href="Cubical.Functions.Fixpoint.html#357" class="Bound">f</a> <a id="381" class="Symbol">→</a> <a id="383" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a>
<a id="385" href="Cubical.Functions.Fixpoint.html#345" class="Function">fixpoint</a> <a id="394" class="Symbol">=</a> <a id="396" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a>

<a id="fixpointPath"></a><a id="401" href="Cubical.Functions.Fixpoint.html#401" class="Function">fixpointPath</a> <a id="414" class="Symbol">:</a> <a id="416" class="Symbol">{</a><a id="417" href="Cubical.Functions.Fixpoint.html#417" class="Bound">f</a> <a id="419" class="Symbol">:</a> <a id="421" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a> <a id="423" class="Symbol">→</a> <a id="425" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a><a id="426" class="Symbol">}</a> <a id="428" class="Symbol">→</a> <a id="430" class="Symbol">(</a><a id="431" href="Cubical.Functions.Fixpoint.html#431" class="Bound">p</a> <a id="433" class="Symbol">:</a> <a id="435" href="Cubical.Functions.Fixpoint.html#275" class="Function">Fixpoint</a> <a id="444" href="Cubical.Functions.Fixpoint.html#417" class="Bound">f</a><a id="445" class="Symbol">)</a> <a id="447" class="Symbol">→</a> <a id="449" href="Cubical.Functions.Fixpoint.html#417" class="Bound">f</a> <a id="451" class="Symbol">(</a><a id="452" href="Cubical.Functions.Fixpoint.html#345" class="Function">fixpoint</a> <a id="461" href="Cubical.Functions.Fixpoint.html#431" class="Bound">p</a><a id="462" class="Symbol">)</a> <a id="464" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="466" href="Cubical.Functions.Fixpoint.html#345" class="Function">fixpoint</a> <a id="475" href="Cubical.Functions.Fixpoint.html#431" class="Bound">p</a>
<a id="477" href="Cubical.Functions.Fixpoint.html#401" class="Function">fixpointPath</a> <a id="490" class="Symbol">=</a> <a id="492" href="Agda.Builtin.Sigma.html#263" class="Field">snd</a>

<a id="497" class="Comment">-- Kraus&#39; lemma</a>
<a id="513" class="Comment">-- a version not using cubical features can be found at</a>
<a id="569" class="Comment">-- https://www.cs.bham.ac.uk/~mhe/GeneralizedHedberg/html/GeneralizedHedberg.html#21576</a>
<a id="2-Constant→isPropFixpoint"></a><a id="657" href="Cubical.Functions.Fixpoint.html#657" class="Function">2-Constant→isPropFixpoint</a> <a id="683" class="Symbol">:</a> <a id="685" class="Symbol">(</a><a id="686" href="Cubical.Functions.Fixpoint.html#686" class="Bound">f</a> <a id="688" class="Symbol">:</a> <a id="690" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a> <a id="692" class="Symbol">→</a> <a id="694" href="Cubical.Functions.Fixpoint.html#263" class="Generalizable">A</a><a id="695" class="Symbol">)</a> <a id="697" class="Symbol">→</a> <a id="699" href="Cubical.Foundations.Function.html#3276" class="Function">2-Constant</a> <a id="710" href="Cubical.Functions.Fixpoint.html#686" class="Bound">f</a> <a id="712" class="Symbol">→</a> <a id="714" href="Cubical.Foundations.Prelude.html#15524" class="Function">isProp</a> <a id="721" class="Symbol">(</a><a id="722" href="Cubical.Functions.Fixpoint.html#275" class="Function">Fixpoint</a> <a id="731" href="Cubical.Functions.Fixpoint.html#686" class="Bound">f</a><a id="732" class="Symbol">)</a>
<a id="734" href="Cubical.Functions.Fixpoint.html#657" class="Function">2-Constant→isPropFixpoint</a> <a id="760" href="Cubical.Functions.Fixpoint.html#760" class="Bound">f</a> <a id="762" href="Cubical.Functions.Fixpoint.html#762" class="Bound">fconst</a> <a id="769" class="Symbol">(</a><a id="770" href="Cubical.Functions.Fixpoint.html#770" class="Bound">x</a> <a id="772" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="774" href="Cubical.Functions.Fixpoint.html#774" class="Bound">p</a><a id="775" class="Symbol">)</a> <a id="777" class="Symbol">(</a><a id="778" href="Cubical.Functions.Fixpoint.html#778" class="Bound">y</a> <a id="780" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="782" href="Cubical.Functions.Fixpoint.html#782" class="Bound">q</a><a id="783" class="Symbol">)</a> <a id="785" href="Cubical.Functions.Fixpoint.html#785" class="Bound">i</a> <a id="787" class="Symbol">=</a> <a id="789" href="Cubical.Functions.Fixpoint.html#1254" class="Function">s</a> <a id="791" href="Cubical.Functions.Fixpoint.html#785" class="Bound">i</a> <a id="793" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="795" href="Cubical.Functions.Fixpoint.html#1398" class="Function">t</a> <a id="797" href="Cubical.Functions.Fixpoint.html#785" class="Bound">i</a> <a id="799" class="Keyword">where</a>
  <a id="807" href="Cubical.Functions.Fixpoint.html#807" class="Function">noose</a> <a id="813" class="Symbol">:</a> <a id="815" class="Symbol">∀</a> <a id="817" href="Cubical.Functions.Fixpoint.html#817" class="Bound">x</a> <a id="819" href="Cubical.Functions.Fixpoint.html#819" class="Bound">y</a> <a id="821" class="Symbol">→</a> <a id="823" href="Cubical.Functions.Fixpoint.html#760" class="Bound">f</a> <a id="825" href="Cubical.Functions.Fixpoint.html#817" class="Bound">x</a> <a id="827" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="829" href="Cubical.Functions.Fixpoint.html#760" class="Bound">f</a> <a id="831" href="Cubical.Functions.Fixpoint.html#819" class="Bound">y</a>
  <a id="835" href="Cubical.Functions.Fixpoint.html#807" class="Function">noose</a> <a id="841" href="Cubical.Functions.Fixpoint.html#841" class="Bound">x</a> <a id="843" href="Cubical.Functions.Fixpoint.html#843" class="Bound">y</a> <a id="845" class="Symbol">=</a> <a id="847" href="Cubical.Foundations.Prelude.html#945" class="Function">sym</a> <a id="851" class="Symbol">(</a><a id="852" href="Cubical.Functions.Fixpoint.html#762" class="Bound">fconst</a> <a id="859" href="Cubical.Functions.Fixpoint.html#841" class="Bound">x</a> <a id="861" href="Cubical.Functions.Fixpoint.html#841" class="Bound">x</a><a id="862" class="Symbol">)</a> <a id="864" href="Cubical.Foundations.Prelude.html#5184" class="Function Operator">∙</a> <a id="866" href="Cubical.Functions.Fixpoint.html#762" class="Bound">fconst</a> <a id="873" href="Cubical.Functions.Fixpoint.html#841" class="Bound">x</a> <a id="875" href="Cubical.Functions.Fixpoint.html#843" class="Bound">y</a>
  <a id="879" class="Comment">-- the main idea is that for any path p, cong f p does not depend on p</a>
  <a id="952" class="Comment">-- but only on its endpoints and the structure of 2-Constant f</a>
  <a id="1017" href="Cubical.Functions.Fixpoint.html#1017" class="Function">KrausInsight</a> <a id="1030" class="Symbol">:</a> <a id="1032" class="Symbol">∀</a> <a id="1034" class="Symbol">{</a><a id="1035" href="Cubical.Functions.Fixpoint.html#1035" class="Bound">x</a> <a id="1037" href="Cubical.Functions.Fixpoint.html#1037" class="Bound">y</a><a id="1038" class="Symbol">}</a> <a id="1040" class="Symbol">→</a> <a id="1042" class="Symbol">(</a><a id="1043" href="Cubical.Functions.Fixpoint.html#1043" class="Bound">p</a> <a id="1045" class="Symbol">:</a> <a id="1047" href="Cubical.Functions.Fixpoint.html#1035" class="Bound">x</a> <a id="1049" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1051" href="Cubical.Functions.Fixpoint.html#1037" class="Bound">y</a><a id="1052" class="Symbol">)</a> <a id="1054" class="Symbol">→</a> <a id="1056" href="Cubical.Functions.Fixpoint.html#807" class="Function">noose</a> <a id="1062" href="Cubical.Functions.Fixpoint.html#1035" class="Bound">x</a> <a id="1064" href="Cubical.Functions.Fixpoint.html#1037" class="Bound">y</a> <a id="1066" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1068" href="Cubical.Foundations.Prelude.html#1407" class="Function">cong</a> <a id="1073" href="Cubical.Functions.Fixpoint.html#760" class="Bound">f</a> <a id="1075" href="Cubical.Functions.Fixpoint.html#1043" class="Bound">p</a>
  <a id="1079" href="Cubical.Functions.Fixpoint.html#1017" class="Function">KrausInsight</a> <a id="1092" class="Symbol">{</a><a id="1093" href="Cubical.Functions.Fixpoint.html#1093" class="Bound">x</a><a id="1094" class="Symbol">}</a> <a id="1096" class="Symbol">=</a> <a id="1098" href="Cubical.Foundations.Prelude.html#12669" class="Function">J</a> <a id="1100" class="Symbol">(λ</a> <a id="1103" href="Cubical.Functions.Fixpoint.html#1103" class="Bound">y</a> <a id="1105" href="Cubical.Functions.Fixpoint.html#1105" class="Bound">p</a> <a id="1107" class="Symbol">→</a> <a id="1109" href="Cubical.Functions.Fixpoint.html#807" class="Function">noose</a> <a id="1115" href="Cubical.Functions.Fixpoint.html#1093" class="Bound">x</a> <a id="1117" href="Cubical.Functions.Fixpoint.html#1103" class="Bound">y</a> <a id="1119" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1121" href="Cubical.Foundations.Prelude.html#1407" class="Function">cong</a> <a id="1126" href="Cubical.Functions.Fixpoint.html#760" class="Bound">f</a> <a id="1128" href="Cubical.Functions.Fixpoint.html#1105" class="Bound">p</a><a id="1129" class="Symbol">)</a> <a id="1131" class="Symbol">(</a><a id="1132" href="Cubical.Foundations.GroupoidLaws.html#2124" class="Function">lCancel</a> <a id="1140" class="Symbol">(</a><a id="1141" href="Cubical.Functions.Fixpoint.html#762" class="Bound">fconst</a> <a id="1148" href="Cubical.Functions.Fixpoint.html#1093" class="Bound">x</a> <a id="1150" href="Cubical.Functions.Fixpoint.html#1093" class="Bound">x</a><a id="1151" class="Symbol">))</a>
  <a id="1156" class="Comment">-- Need to solve for a path s : x ≡ y, such that:</a>
  <a id="1208" class="Comment">-- transport (λ i → cong f s i ≡ s i) p ≡ q</a>
  <a id="1254" href="Cubical.Functions.Fixpoint.html#1254" class="Function">s</a> <a id="1256" class="Symbol">:</a> <a id="1258" href="Cubical.Functions.Fixpoint.html#770" class="Bound">x</a> <a id="1260" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1262" href="Cubical.Functions.Fixpoint.html#778" class="Bound">y</a>
  <a id="1266" href="Cubical.Functions.Fixpoint.html#1254" class="Function">s</a> <a id="1268" class="Symbol">=</a> <a id="1270" href="Cubical.Foundations.Prelude.html#945" class="Function">sym</a> <a id="1274" href="Cubical.Functions.Fixpoint.html#774" class="Bound">p</a> <a id="1276" href="Cubical.Foundations.Prelude.html#3984" class="Function Operator">∙∙</a> <a id="1279" href="Cubical.Functions.Fixpoint.html#807" class="Function">noose</a> <a id="1285" href="Cubical.Functions.Fixpoint.html#770" class="Bound">x</a> <a id="1287" href="Cubical.Functions.Fixpoint.html#778" class="Bound">y</a> <a id="1289" href="Cubical.Foundations.Prelude.html#3984" class="Function Operator">∙∙</a> <a id="1292" href="Cubical.Functions.Fixpoint.html#782" class="Bound">q</a>
  <a id="1296" href="Cubical.Functions.Fixpoint.html#1296" class="Function">t&#39;</a> <a id="1299" class="Symbol">:</a> <a id="1301" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="1307" class="Symbol">(λ</a> <a id="1310" href="Cubical.Functions.Fixpoint.html#1310" class="Bound">i</a> <a id="1312" class="Symbol">→</a> <a id="1314" href="Cubical.Functions.Fixpoint.html#807" class="Function">noose</a> <a id="1320" href="Cubical.Functions.Fixpoint.html#770" class="Bound">x</a> <a id="1322" href="Cubical.Functions.Fixpoint.html#778" class="Bound">y</a> <a id="1324" href="Cubical.Functions.Fixpoint.html#1310" class="Bound">i</a> <a id="1326" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1328" href="Cubical.Functions.Fixpoint.html#1254" class="Function">s</a> <a id="1330" href="Cubical.Functions.Fixpoint.html#1310" class="Bound">i</a><a id="1331" class="Symbol">)</a> <a id="1333" href="Cubical.Functions.Fixpoint.html#774" class="Bound">p</a> <a id="1335" href="Cubical.Functions.Fixpoint.html#782" class="Bound">q</a>
  <a id="1339" href="Cubical.Functions.Fixpoint.html#1296" class="Function">t&#39;</a> <a id="1342" href="Cubical.Functions.Fixpoint.html#1342" class="Bound">i</a> <a id="1344" href="Cubical.Functions.Fixpoint.html#1344" class="Bound">j</a> <a id="1346" class="Symbol">=</a> <a id="1348" href="Cubical.Foundations.Prelude.html#4082" class="Function">doubleCompPath-filler</a> <a id="1370" class="Symbol">(</a><a id="1371" href="Cubical.Foundations.Prelude.html#945" class="Function">sym</a> <a id="1375" href="Cubical.Functions.Fixpoint.html#774" class="Bound">p</a><a id="1376" class="Symbol">)</a> <a id="1378" class="Symbol">(</a><a id="1379" href="Cubical.Functions.Fixpoint.html#807" class="Function">noose</a> <a id="1385" href="Cubical.Functions.Fixpoint.html#770" class="Bound">x</a> <a id="1387" href="Cubical.Functions.Fixpoint.html#778" class="Bound">y</a><a id="1388" class="Symbol">)</a> <a id="1390" href="Cubical.Functions.Fixpoint.html#782" class="Bound">q</a> <a id="1392" href="Cubical.Functions.Fixpoint.html#1344" class="Bound">j</a> <a id="1394" href="Cubical.Functions.Fixpoint.html#1342" class="Bound">i</a>
  <a id="1398" href="Cubical.Functions.Fixpoint.html#1398" class="Function">t</a> <a id="1400" class="Symbol">:</a> <a id="1402" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="1408" class="Symbol">(λ</a> <a id="1411" href="Cubical.Functions.Fixpoint.html#1411" class="Bound">i</a> <a id="1413" class="Symbol">→</a> <a id="1415" href="Cubical.Foundations.Prelude.html#1407" class="Function">cong</a> <a id="1420" href="Cubical.Functions.Fixpoint.html#760" class="Bound">f</a> <a id="1422" href="Cubical.Functions.Fixpoint.html#1254" class="Function">s</a> <a id="1424" href="Cubical.Functions.Fixpoint.html#1411" class="Bound">i</a> <a id="1426" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1428" href="Cubical.Functions.Fixpoint.html#1254" class="Function">s</a> <a id="1430" href="Cubical.Functions.Fixpoint.html#1411" class="Bound">i</a><a id="1431" class="Symbol">)</a> <a id="1433" href="Cubical.Functions.Fixpoint.html#774" class="Bound">p</a> <a id="1435" href="Cubical.Functions.Fixpoint.html#782" class="Bound">q</a>
  <a id="1439" href="Cubical.Functions.Fixpoint.html#1398" class="Function">t</a> <a id="1441" class="Symbol">=</a> <a id="1443" href="Cubical.Foundations.Prelude.html#10205" class="Function">subst</a> <a id="1449" class="Symbol">(λ</a> <a id="1452" href="Cubical.Functions.Fixpoint.html#1452" class="Bound">kraus</a> <a id="1458" class="Symbol">→</a> <a id="1460" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="1466" class="Symbol">(λ</a> <a id="1469" href="Cubical.Functions.Fixpoint.html#1469" class="Bound">i</a> <a id="1471" class="Symbol">→</a> <a id="1473" href="Cubical.Functions.Fixpoint.html#1452" class="Bound">kraus</a> <a id="1479" href="Cubical.Functions.Fixpoint.html#1469" class="Bound">i</a> <a id="1481" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1483" href="Cubical.Functions.Fixpoint.html#1254" class="Function">s</a> <a id="1485" href="Cubical.Functions.Fixpoint.html#1469" class="Bound">i</a><a id="1486" class="Symbol">)</a> <a id="1488" href="Cubical.Functions.Fixpoint.html#774" class="Bound">p</a> <a id="1490" href="Cubical.Functions.Fixpoint.html#782" class="Bound">q</a><a id="1491" class="Symbol">)</a> <a id="1493" class="Symbol">(</a><a id="1494" href="Cubical.Functions.Fixpoint.html#1017" class="Function">KrausInsight</a> <a id="1507" href="Cubical.Functions.Fixpoint.html#1254" class="Function">s</a><a id="1508" class="Symbol">)</a> <a id="1510" href="Cubical.Functions.Fixpoint.html#1296" class="Function">t&#39;</a>
</pre></body></html>