<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.Functions.Fixpoint</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-
  Definition of function fixpoint and Kraus&#39; lemma
-}</a>
<a id="58" class="Symbol">{-#</a> <a id="62" class="Keyword">OPTIONS</a> <a id="70" class="Pragma">--safe</a> <a id="77" class="Symbol">#-}</a>
<a id="81" class="Keyword">module</a> <a id="88" href="Cubical.Functions.Fixpoint.html" class="Module">Cubical.Functions.Fixpoint</a> <a id="115" class="Keyword">where</a>

<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>
<a id="162" class="Keyword">open</a> <a id="167" class="Keyword">import</a> <a id="174" href="Cubical.Foundations.Function.html" class="Module">Cubical.Foundations.Function</a>
<a id="203" class="Keyword">open</a> <a id="208" class="Keyword">import</a> <a id="215" href="Cubical.Foundations.GroupoidLaws.html" class="Module">Cubical.Foundations.GroupoidLaws</a>

<a id="249" class="Keyword">private</a>
  <a id="259" class="Keyword">variable</a>
    <a id="272" href="Cubical.Functions.Fixpoint.html#272" class="Generalizable">ℓ</a> <a id="274" class="Symbol">:</a> <a id="276" href="Agda.Primitive.html#591" class="Postulate">Level</a>
    <a id="286" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a> <a id="288" class="Symbol">:</a> <a id="290" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="295" href="Cubical.Functions.Fixpoint.html#272" class="Generalizable">ℓ</a>

<a id="Fixpoint"></a><a id="298" href="Cubical.Functions.Fixpoint.html#298" class="Function">Fixpoint</a> <a id="307" class="Symbol">:</a> <a id="309" class="Symbol">(</a><a id="310" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a> <a id="312" class="Symbol">→</a> <a id="314" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a><a id="315" class="Symbol">)</a> <a id="317" class="Symbol">→</a> <a id="319" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="324" class="Symbol">_</a>
<a id="326" href="Cubical.Functions.Fixpoint.html#298" class="Function">Fixpoint</a> <a id="335" class="Symbol">{</a><a id="336" class="Argument">A</a> <a id="338" class="Symbol">=</a> <a id="340" href="Cubical.Functions.Fixpoint.html#340" class="Bound">A</a><a id="341" class="Symbol">}</a> <a id="343" href="Cubical.Functions.Fixpoint.html#343" class="Bound">f</a> <a id="345" class="Symbol">=</a> <a id="347" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a> <a id="349" href="Cubical.Functions.Fixpoint.html#340" class="Bound">A</a> <a id="351" class="Symbol">(λ</a> <a id="354" href="Cubical.Functions.Fixpoint.html#354" class="Bound">x</a> <a id="356" class="Symbol">→</a> <a id="358" href="Cubical.Functions.Fixpoint.html#343" class="Bound">f</a> <a id="360" href="Cubical.Functions.Fixpoint.html#354" class="Bound">x</a> <a id="362" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="364" href="Cubical.Functions.Fixpoint.html#354" class="Bound">x</a><a id="365" class="Symbol">)</a>

<a id="fixpoint"></a><a id="368" href="Cubical.Functions.Fixpoint.html#368" class="Function">fixpoint</a> <a id="377" class="Symbol">:</a> <a id="379" class="Symbol">{</a><a id="380" href="Cubical.Functions.Fixpoint.html#380" class="Bound">f</a> <a id="382" class="Symbol">:</a> <a id="384" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a> <a id="386" class="Symbol">→</a> <a id="388" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a><a id="389" class="Symbol">}</a> <a id="391" class="Symbol">→</a> <a id="393" href="Cubical.Functions.Fixpoint.html#298" class="Function">Fixpoint</a> <a id="402" href="Cubical.Functions.Fixpoint.html#380" class="Bound">f</a> <a id="404" class="Symbol">→</a> <a id="406" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a>
<a id="408" href="Cubical.Functions.Fixpoint.html#368" class="Function">fixpoint</a> <a id="417" class="Symbol">=</a> <a id="419" href="Agda.Builtin.Sigma.html#234" class="Field">fst</a>

<a id="fixpointPath"></a><a id="424" href="Cubical.Functions.Fixpoint.html#424" class="Function">fixpointPath</a> <a id="437" class="Symbol">:</a> <a id="439" class="Symbol">{</a><a id="440" href="Cubical.Functions.Fixpoint.html#440" class="Bound">f</a> <a id="442" class="Symbol">:</a> <a id="444" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a> <a id="446" class="Symbol">→</a> <a id="448" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a><a id="449" class="Symbol">}</a> <a id="451" class="Symbol">→</a> <a id="453" class="Symbol">(</a><a id="454" href="Cubical.Functions.Fixpoint.html#454" class="Bound">p</a> <a id="456" class="Symbol">:</a> <a id="458" href="Cubical.Functions.Fixpoint.html#298" class="Function">Fixpoint</a> <a id="467" href="Cubical.Functions.Fixpoint.html#440" class="Bound">f</a><a id="468" class="Symbol">)</a> <a id="470" class="Symbol">→</a> <a id="472" href="Cubical.Functions.Fixpoint.html#440" class="Bound">f</a> <a id="474" class="Symbol">(</a><a id="475" href="Cubical.Functions.Fixpoint.html#368" class="Function">fixpoint</a> <a id="484" href="Cubical.Functions.Fixpoint.html#454" class="Bound">p</a><a id="485" class="Symbol">)</a> <a id="487" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="489" href="Cubical.Functions.Fixpoint.html#368" class="Function">fixpoint</a> <a id="498" href="Cubical.Functions.Fixpoint.html#454" class="Bound">p</a>
<a id="500" href="Cubical.Functions.Fixpoint.html#424" class="Function">fixpointPath</a> <a id="513" class="Symbol">=</a> <a id="515" href="Agda.Builtin.Sigma.html#246" class="Field">snd</a>

<a id="520" class="Comment">-- Kraus&#39; lemma</a>
<a id="536" class="Comment">-- a version not using cubical features can be found at</a>
<a id="592" class="Comment">-- https://www.cs.bham.ac.uk/~mhe/GeneralizedHedberg/html/GeneralizedHedberg.html#21576</a>
<a id="2-Constant→isPropFixpoint"></a><a id="680" href="Cubical.Functions.Fixpoint.html#680" class="Function">2-Constant→isPropFixpoint</a> <a id="706" class="Symbol">:</a> <a id="708" class="Symbol">(</a><a id="709" href="Cubical.Functions.Fixpoint.html#709" class="Bound">f</a> <a id="711" class="Symbol">:</a> <a id="713" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a> <a id="715" class="Symbol">→</a> <a id="717" href="Cubical.Functions.Fixpoint.html#286" class="Generalizable">A</a><a id="718" class="Symbol">)</a> <a id="720" class="Symbol">→</a> <a id="722" href="Cubical.Foundations.Function.html#2864" class="Function">2-Constant</a> <a id="733" href="Cubical.Functions.Fixpoint.html#709" class="Bound">f</a> <a id="735" class="Symbol">→</a> <a id="737" href="Cubical.Foundations.Prelude.html#14217" class="Function">isProp</a> <a id="744" class="Symbol">(</a><a id="745" href="Cubical.Functions.Fixpoint.html#298" class="Function">Fixpoint</a> <a id="754" href="Cubical.Functions.Fixpoint.html#709" class="Bound">f</a><a id="755" class="Symbol">)</a>
<a id="757" href="Cubical.Functions.Fixpoint.html#680" class="Function">2-Constant→isPropFixpoint</a> <a id="783" href="Cubical.Functions.Fixpoint.html#783" class="Bound">f</a> <a id="785" href="Cubical.Functions.Fixpoint.html#785" class="Bound">fconst</a> <a id="792" class="Symbol">(</a><a id="793" href="Cubical.Functions.Fixpoint.html#793" class="Bound">x</a> <a id="795" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="797" href="Cubical.Functions.Fixpoint.html#797" class="Bound">p</a><a id="798" class="Symbol">)</a> <a id="800" class="Symbol">(</a><a id="801" href="Cubical.Functions.Fixpoint.html#801" class="Bound">y</a> <a id="803" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="805" href="Cubical.Functions.Fixpoint.html#805" class="Bound">q</a><a id="806" class="Symbol">)</a> <a id="808" href="Cubical.Functions.Fixpoint.html#808" class="Bound">i</a> <a id="810" class="Symbol">=</a> <a id="812" href="Cubical.Functions.Fixpoint.html#1277" class="Function">s</a> <a id="814" href="Cubical.Functions.Fixpoint.html#808" class="Bound">i</a> <a id="816" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="818" href="Cubical.Functions.Fixpoint.html#1421" class="Function">t</a> <a id="820" href="Cubical.Functions.Fixpoint.html#808" class="Bound">i</a> <a id="822" class="Keyword">where</a>
  <a id="830" href="Cubical.Functions.Fixpoint.html#830" class="Function">noose</a> <a id="836" class="Symbol">:</a> <a id="838" class="Symbol">∀</a> <a id="840" href="Cubical.Functions.Fixpoint.html#840" class="Bound">x</a> <a id="842" href="Cubical.Functions.Fixpoint.html#842" class="Bound">y</a> <a id="844" class="Symbol">→</a> <a id="846" href="Cubical.Functions.Fixpoint.html#783" class="Bound">f</a> <a id="848" href="Cubical.Functions.Fixpoint.html#840" class="Bound">x</a> <a id="850" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="852" href="Cubical.Functions.Fixpoint.html#783" class="Bound">f</a> <a id="854" href="Cubical.Functions.Fixpoint.html#842" class="Bound">y</a>
  <a id="858" href="Cubical.Functions.Fixpoint.html#830" class="Function">noose</a> <a id="864" href="Cubical.Functions.Fixpoint.html#864" class="Bound">x</a> <a id="866" href="Cubical.Functions.Fixpoint.html#866" class="Bound">y</a> <a id="868" class="Symbol">=</a> <a id="870" href="Cubical.Foundations.Prelude.html#968" class="Function">sym</a> <a id="874" class="Symbol">(</a><a id="875" href="Cubical.Functions.Fixpoint.html#785" class="Bound">fconst</a> <a id="882" href="Cubical.Functions.Fixpoint.html#864" class="Bound">x</a> <a id="884" href="Cubical.Functions.Fixpoint.html#864" class="Bound">x</a><a id="885" class="Symbol">)</a> <a id="887" href="Cubical.Foundations.Prelude.html#4447" class="Function Operator">∙</a> <a id="889" href="Cubical.Functions.Fixpoint.html#785" class="Bound">fconst</a> <a id="896" href="Cubical.Functions.Fixpoint.html#864" class="Bound">x</a> <a id="898" href="Cubical.Functions.Fixpoint.html#866" class="Bound">y</a>
  <a id="902" class="Comment">-- the main idea is that for any path p, cong f p does not depend on p</a>
  <a id="975" class="Comment">-- but only on its endpoints and the structure of 2-Constant f</a>
  <a id="1040" href="Cubical.Functions.Fixpoint.html#1040" class="Function">KrausInsight</a> <a id="1053" class="Symbol">:</a> <a id="1055" class="Symbol">∀</a> <a id="1057" class="Symbol">{</a><a id="1058" href="Cubical.Functions.Fixpoint.html#1058" class="Bound">x</a> <a id="1060" href="Cubical.Functions.Fixpoint.html#1060" class="Bound">y</a><a id="1061" class="Symbol">}</a> <a id="1063" class="Symbol">→</a> <a id="1065" class="Symbol">(</a><a id="1066" href="Cubical.Functions.Fixpoint.html#1066" class="Bound">p</a> <a id="1068" class="Symbol">:</a> <a id="1070" href="Cubical.Functions.Fixpoint.html#1058" class="Bound">x</a> <a id="1072" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1074" href="Cubical.Functions.Fixpoint.html#1060" class="Bound">y</a><a id="1075" class="Symbol">)</a> <a id="1077" class="Symbol">→</a> <a id="1079" href="Cubical.Functions.Fixpoint.html#830" class="Function">noose</a> <a id="1085" href="Cubical.Functions.Fixpoint.html#1058" class="Bound">x</a> <a id="1087" href="Cubical.Functions.Fixpoint.html#1060" class="Bound">y</a> <a id="1089" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1091" href="Cubical.Foundations.Prelude.html#1430" class="Function">cong</a> <a id="1096" href="Cubical.Functions.Fixpoint.html#783" class="Bound">f</a> <a id="1098" href="Cubical.Functions.Fixpoint.html#1066" class="Bound">p</a>
  <a id="1102" href="Cubical.Functions.Fixpoint.html#1040" class="Function">KrausInsight</a> <a id="1115" class="Symbol">{</a><a id="1116" href="Cubical.Functions.Fixpoint.html#1116" class="Bound">x</a><a id="1117" class="Symbol">}</a> <a id="1119" class="Symbol">=</a> <a id="1121" href="Cubical.Foundations.Prelude.html#11362" class="Function">J</a> <a id="1123" class="Symbol">(λ</a> <a id="1126" href="Cubical.Functions.Fixpoint.html#1126" class="Bound">y</a> <a id="1128" href="Cubical.Functions.Fixpoint.html#1128" class="Bound">p</a> <a id="1130" class="Symbol">→</a> <a id="1132" href="Cubical.Functions.Fixpoint.html#830" class="Function">noose</a> <a id="1138" href="Cubical.Functions.Fixpoint.html#1116" class="Bound">x</a> <a id="1140" href="Cubical.Functions.Fixpoint.html#1126" class="Bound">y</a> <a id="1142" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1144" href="Cubical.Foundations.Prelude.html#1430" class="Function">cong</a> <a id="1149" href="Cubical.Functions.Fixpoint.html#783" class="Bound">f</a> <a id="1151" href="Cubical.Functions.Fixpoint.html#1128" class="Bound">p</a><a id="1152" class="Symbol">)</a> <a id="1154" class="Symbol">(</a><a id="1155" href="Cubical.Foundations.GroupoidLaws.html#2147" class="Function">lCancel</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Cubical.Functions.Fixpoint.html#785" class="Bound">fconst</a> <a id="1171" href="Cubical.Functions.Fixpoint.html#1116" class="Bound">x</a> <a id="1173" href="Cubical.Functions.Fixpoint.html#1116" class="Bound">x</a><a id="1174" class="Symbol">))</a>
  <a id="1179" class="Comment">-- Need to solve for a path s : x ≡ y, such that:</a>
  <a id="1231" class="Comment">-- transport (λ i → cong f s i ≡ s i) p ≡ q</a>
  <a id="1277" href="Cubical.Functions.Fixpoint.html#1277" class="Function">s</a> <a id="1279" class="Symbol">:</a> <a id="1281" href="Cubical.Functions.Fixpoint.html#793" class="Bound">x</a> <a id="1283" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1285" href="Cubical.Functions.Fixpoint.html#801" class="Bound">y</a>
  <a id="1289" href="Cubical.Functions.Fixpoint.html#1277" class="Function">s</a> <a id="1291" class="Symbol">=</a> <a id="1293" href="Cubical.Foundations.Prelude.html#968" class="Function">sym</a> <a id="1297" href="Cubical.Functions.Fixpoint.html#797" class="Bound">p</a> <a id="1299" href="Cubical.Foundations.Prelude.html#3247" class="Function Operator">∙∙</a> <a id="1302" href="Cubical.Functions.Fixpoint.html#830" class="Function">noose</a> <a id="1308" href="Cubical.Functions.Fixpoint.html#793" class="Bound">x</a> <a id="1310" href="Cubical.Functions.Fixpoint.html#801" class="Bound">y</a> <a id="1312" href="Cubical.Foundations.Prelude.html#3247" class="Function Operator">∙∙</a> <a id="1315" href="Cubical.Functions.Fixpoint.html#805" class="Bound">q</a>
  <a id="1319" href="Cubical.Functions.Fixpoint.html#1319" class="Function">t&#39;</a> <a id="1322" class="Symbol">:</a> <a id="1324" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="1330" class="Symbol">(λ</a> <a id="1333" href="Cubical.Functions.Fixpoint.html#1333" class="Bound">i</a> <a id="1335" class="Symbol">→</a> <a id="1337" href="Cubical.Functions.Fixpoint.html#830" class="Function">noose</a> <a id="1343" href="Cubical.Functions.Fixpoint.html#793" class="Bound">x</a> <a id="1345" href="Cubical.Functions.Fixpoint.html#801" class="Bound">y</a> <a id="1347" href="Cubical.Functions.Fixpoint.html#1333" class="Bound">i</a> <a id="1349" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1351" href="Cubical.Functions.Fixpoint.html#1277" class="Function">s</a> <a id="1353" href="Cubical.Functions.Fixpoint.html#1333" class="Bound">i</a><a id="1354" class="Symbol">)</a> <a id="1356" href="Cubical.Functions.Fixpoint.html#797" class="Bound">p</a> <a id="1358" href="Cubical.Functions.Fixpoint.html#805" class="Bound">q</a>
  <a id="1362" href="Cubical.Functions.Fixpoint.html#1319" class="Function">t&#39;</a> <a id="1365" href="Cubical.Functions.Fixpoint.html#1365" class="Bound">i</a> <a id="1367" href="Cubical.Functions.Fixpoint.html#1367" class="Bound">j</a> <a id="1369" class="Symbol">=</a> <a id="1371" href="Cubical.Foundations.Prelude.html#3345" class="Function">doubleCompPath-filler</a> <a id="1393" class="Symbol">(</a><a id="1394" href="Cubical.Foundations.Prelude.html#968" class="Function">sym</a> <a id="1398" href="Cubical.Functions.Fixpoint.html#797" class="Bound">p</a><a id="1399" class="Symbol">)</a> <a id="1401" class="Symbol">(</a><a id="1402" href="Cubical.Functions.Fixpoint.html#830" class="Function">noose</a> <a id="1408" href="Cubical.Functions.Fixpoint.html#793" class="Bound">x</a> <a id="1410" href="Cubical.Functions.Fixpoint.html#801" class="Bound">y</a><a id="1411" class="Symbol">)</a> <a id="1413" href="Cubical.Functions.Fixpoint.html#805" class="Bound">q</a> <a id="1415" href="Cubical.Functions.Fixpoint.html#1367" class="Bound">j</a> <a id="1417" href="Cubical.Functions.Fixpoint.html#1365" class="Bound">i</a>
  <a id="1421" href="Cubical.Functions.Fixpoint.html#1421" class="Function">t</a> <a id="1423" class="Symbol">:</a> <a id="1425" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="1431" class="Symbol">(λ</a> <a id="1434" href="Cubical.Functions.Fixpoint.html#1434" class="Bound">i</a> <a id="1436" class="Symbol">→</a> <a id="1438" href="Cubical.Foundations.Prelude.html#1430" class="Function">cong</a> <a id="1443" href="Cubical.Functions.Fixpoint.html#783" class="Bound">f</a> <a id="1445" href="Cubical.Functions.Fixpoint.html#1277" class="Function">s</a> <a id="1447" href="Cubical.Functions.Fixpoint.html#1434" class="Bound">i</a> <a id="1449" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1451" href="Cubical.Functions.Fixpoint.html#1277" class="Function">s</a> <a id="1453" href="Cubical.Functions.Fixpoint.html#1434" class="Bound">i</a><a id="1454" class="Symbol">)</a> <a id="1456" href="Cubical.Functions.Fixpoint.html#797" class="Bound">p</a> <a id="1458" href="Cubical.Functions.Fixpoint.html#805" class="Bound">q</a>
  <a id="1462" href="Cubical.Functions.Fixpoint.html#1421" class="Function">t</a> <a id="1464" class="Symbol">=</a> <a id="1466" href="Cubical.Foundations.Prelude.html#9128" class="Function">subst</a> <a id="1472" class="Symbol">(λ</a> <a id="1475" href="Cubical.Functions.Fixpoint.html#1475" class="Bound">kraus</a> <a id="1481" class="Symbol">→</a> <a id="1483" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="1489" class="Symbol">(λ</a> <a id="1492" href="Cubical.Functions.Fixpoint.html#1492" class="Bound">i</a> <a id="1494" class="Symbol">→</a> <a id="1496" href="Cubical.Functions.Fixpoint.html#1475" class="Bound">kraus</a> <a id="1502" href="Cubical.Functions.Fixpoint.html#1492" class="Bound">i</a> <a id="1504" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1506" href="Cubical.Functions.Fixpoint.html#1277" class="Function">s</a> <a id="1508" href="Cubical.Functions.Fixpoint.html#1492" class="Bound">i</a><a id="1509" class="Symbol">)</a> <a id="1511" href="Cubical.Functions.Fixpoint.html#797" class="Bound">p</a> <a id="1513" href="Cubical.Functions.Fixpoint.html#805" class="Bound">q</a><a id="1514" class="Symbol">)</a> <a id="1516" class="Symbol">(</a><a id="1517" href="Cubical.Functions.Fixpoint.html#1040" class="Function">KrausInsight</a> <a id="1530" href="Cubical.Functions.Fixpoint.html#1277" class="Function">s</a><a id="1531" class="Symbol">)</a> <a id="1533" href="Cubical.Functions.Fixpoint.html#1319" class="Function">t&#39;</a>
</pre></body></html>