<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.Categories.Site.Coverage</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Cubical.Categories.Site.Coverage.html" class="Module">Cubical.Categories.Site.Coverage</a> <a id="41" class="Keyword">where</a>

<a id="48" class="Comment">-- Definition of a coverage on a category, also called a Grothendieck topology.</a>
<a id="128" class="Comment">-- A coverage on a category turns it into a site</a>
<a id="177" class="Comment">-- and enables us to formulate a sheaf condition.</a>

<a id="228" class="Comment">-- We stay close to the definitions given in the nLab and the Elephant:</a>
<a id="300" class="Comment">-- * https://ncatlab.org/nlab/show/coverage</a>
<a id="344" class="Comment">-- * Peter Johnstone, &quot;Sketches of an Elephant&quot; (Definition C2.1.1)</a>

<a id="413" class="Comment">-- While the covers are just families of arrows,</a>
<a id="462" class="Comment">-- we use the notion of sieves to express the &quot;pullback stability&quot; property of the coverage.</a>

<a id="556" class="Keyword">open</a> <a id="561" class="Keyword">import</a> <a id="568" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>
<a id="596" class="Keyword">open</a> <a id="601" class="Keyword">import</a> <a id="608" href="Cubical.Foundations.Structure.html" class="Module">Cubical.Foundations.Structure</a>
<a id="638" class="Keyword">open</a> <a id="643" class="Keyword">import</a> <a id="650" href="Cubical.HITs.PropositionalTruncation.html" class="Module">Cubical.HITs.PropositionalTruncation</a>
<a id="687" class="Keyword">open</a> <a id="692" class="Keyword">import</a> <a id="699" href="Cubical.Data.Sigma.html" class="Module">Cubical.Data.Sigma</a>

<a id="719" class="Keyword">open</a> <a id="724" class="Keyword">import</a> <a id="731" href="Cubical.Categories.Category.html" class="Module">Cubical.Categories.Category</a>
<a id="759" class="Keyword">open</a> <a id="764" class="Keyword">import</a> <a id="771" href="Cubical.Categories.Site.Cover.html" class="Module">Cubical.Categories.Site.Cover</a>
<a id="801" class="Keyword">open</a> <a id="806" class="Keyword">import</a> <a id="813" href="Cubical.Categories.Site.Sieve.html" class="Module">Cubical.Categories.Site.Sieve</a>

<a id="844" class="Keyword">module</a> <a id="851" href="Cubical.Categories.Site.Coverage.html#851" class="Module">_</a>
  <a id="855" class="Symbol">{</a><a id="856" href="Cubical.Categories.Site.Coverage.html#856" class="Bound">ℓ</a> <a id="858" href="Cubical.Categories.Site.Coverage.html#858" class="Bound">ℓ&#39;</a> <a id="861" class="Symbol">:</a> <a id="863" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="868" class="Symbol">}</a>
  <a id="872" class="Symbol">(</a><a id="873" href="Cubical.Categories.Site.Coverage.html#873" class="Bound">C</a> <a id="875" class="Symbol">:</a> <a id="877" href="Cubical.Categories.Category.Base.html#311" class="Record">Category</a> <a id="886" href="Cubical.Categories.Site.Coverage.html#856" class="Bound">ℓ</a> <a id="888" href="Cubical.Categories.Site.Coverage.html#858" class="Bound">ℓ&#39;</a><a id="890" class="Symbol">)</a>
  <a id="894" class="Keyword">where</a>

  <a id="903" class="Keyword">open</a> <a id="908" href="Cubical.Categories.Category.Base.html#311" class="Module">Category</a> <a id="917" href="Cubical.Categories.Site.Coverage.html#873" class="Bound">C</a>

  <a id="922" class="Keyword">record</a> <a id="929" href="Cubical.Categories.Site.Coverage.html#929" class="Record">Coverage</a> <a id="938" class="Symbol">(</a><a id="939" href="Cubical.Categories.Site.Coverage.html#939" class="Bound">ℓcov</a> <a id="944" href="Cubical.Categories.Site.Coverage.html#944" class="Bound">ℓpat</a> <a id="949" class="Symbol">:</a> <a id="951" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="956" class="Symbol">)</a> <a id="958" class="Symbol">:</a> <a id="960" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="965" class="Symbol">(</a><a id="966" href="Agda.Primitive.html#961" class="Primitive">ℓ-max</a> <a id="972" href="Cubical.Categories.Site.Coverage.html#856" class="Bound">ℓ</a> <a id="974" class="Symbol">(</a><a id="975" href="Agda.Primitive.html#961" class="Primitive">ℓ-max</a> <a id="981" href="Cubical.Categories.Site.Coverage.html#858" class="Bound">ℓ&#39;</a> <a id="984" class="Symbol">(</a><a id="985" href="Agda.Primitive.html#931" class="Primitive">ℓ-suc</a> <a id="991" class="Symbol">(</a><a id="992" href="Agda.Primitive.html#961" class="Primitive">ℓ-max</a> <a id="998" href="Cubical.Categories.Site.Coverage.html#939" class="Bound">ℓcov</a> <a id="1003" href="Cubical.Categories.Site.Coverage.html#944" class="Bound">ℓpat</a><a id="1007" class="Symbol">))))</a> <a id="1012" class="Keyword">where</a>
    <a id="1022" class="Keyword">no-eta-equality</a>
    <a id="1042" class="Keyword">field</a>
      <a id="1054" href="Cubical.Categories.Site.Coverage.html#1054" class="Field">covers</a> <a id="1061" class="Symbol">:</a> <a id="1063" class="Symbol">(</a><a id="1064" href="Cubical.Categories.Site.Coverage.html#1064" class="Bound">c</a> <a id="1066" class="Symbol">:</a> <a id="1068" href="Cubical.Categories.Category.Base.html#437" class="Field">ob</a><a id="1070" class="Symbol">)</a> <a id="1072" class="Symbol">→</a> <a id="1074" href="Cubical.Foundations.Structure.html#378" class="Function">TypeWithStr</a> <a id="1086" href="Cubical.Categories.Site.Coverage.html#939" class="Bound">ℓcov</a> <a id="1091" class="Symbol">λ</a> <a id="1093" href="Cubical.Categories.Site.Coverage.html#1093" class="Bound">Cov</a> <a id="1097" class="Symbol">→</a> <a id="1099" href="Cubical.Categories.Site.Coverage.html#1093" class="Bound">Cov</a> <a id="1103" class="Symbol">→</a> <a id="1105" class="Symbol">(</a><a id="1106" href="Cubical.Categories.Site.Cover.html#472" class="Function">Cover</a> <a id="1112" href="Cubical.Categories.Site.Coverage.html#873" class="Bound">C</a> <a id="1114" href="Cubical.Categories.Site.Coverage.html#944" class="Bound">ℓpat</a> <a id="1119" href="Cubical.Categories.Site.Coverage.html#1064" class="Bound">c</a><a id="1120" class="Symbol">)</a>
      <a id="1128" href="Cubical.Categories.Site.Coverage.html#1128" class="Field">pullbackStability</a> <a id="1146" class="Symbol">:</a>
        <a id="1156" class="Symbol">{</a><a id="1157" href="Cubical.Categories.Site.Coverage.html#1157" class="Bound">c</a> <a id="1159" class="Symbol">:</a> <a id="1161" href="Cubical.Categories.Category.Base.html#437" class="Field">ob</a><a id="1163" class="Symbol">}</a> <a id="1165" class="Symbol">→</a>
        <a id="1175" class="Symbol">(</a><a id="1176" href="Cubical.Categories.Site.Coverage.html#1176" class="Bound">cov</a> <a id="1180" class="Symbol">:</a> <a id="1182" href="Cubical.Foundations.Structure.html#1134" class="Function Operator">⟨</a> <a id="1184" href="Cubical.Categories.Site.Coverage.html#1054" class="Field">covers</a> <a id="1191" href="Cubical.Categories.Site.Coverage.html#1157" class="Bound">c</a> <a id="1193" href="Cubical.Foundations.Structure.html#1134" class="Function Operator">⟩</a><a id="1194" class="Symbol">)</a> <a id="1196" class="Symbol">→</a>
        <a id="1206" class="Symbol">{</a><a id="1207" href="Cubical.Categories.Site.Coverage.html#1207" class="Bound">d</a> <a id="1209" class="Symbol">:</a> <a id="1211" href="Cubical.Categories.Category.Base.html#437" class="Field">ob</a><a id="1213" class="Symbol">}</a> <a id="1215" class="Symbol">→</a>
        <a id="1225" class="Symbol">(</a><a id="1226" href="Cubical.Categories.Site.Coverage.html#1226" class="Bound">f</a> <a id="1228" class="Symbol">:</a> <a id="1230" href="Cubical.Categories.Category.Base.html#453" class="Field Operator">Hom[</a> <a id="1235" href="Cubical.Categories.Site.Coverage.html#1207" class="Bound">d</a> <a id="1237" href="Cubical.Categories.Category.Base.html#453" class="Field Operator">,</a> <a id="1239" href="Cubical.Categories.Site.Coverage.html#1157" class="Bound">c</a> <a id="1241" href="Cubical.Categories.Category.Base.html#453" class="Field Operator">]</a><a id="1242" class="Symbol">)</a> <a id="1244" class="Symbol">→</a>
        <a id="1254" href="Cubical.Data.Sigma.Base.html#659" class="Function">∃[</a> <a id="1257" href="Cubical.Categories.Site.Coverage.html#1257" class="Bound">cov&#39;</a> <a id="1262" href="Cubical.Data.Sigma.Base.html#659" class="Function">∈</a> <a id="1264" href="Cubical.Foundations.Structure.html#1134" class="Function Operator">⟨</a> <a id="1266" href="Cubical.Categories.Site.Coverage.html#1054" class="Field">covers</a> <a id="1273" href="Cubical.Categories.Site.Coverage.html#1207" class="Bound">d</a> <a id="1275" href="Cubical.Foundations.Structure.html#1134" class="Function Operator">⟩</a> <a id="1277" href="Cubical.Data.Sigma.Base.html#659" class="Function">]</a>
          <a id="1289" href="Cubical.Categories.Site.Sieve.html#2039" class="Function">coverRefinesSieve</a>
            <a id="1319" class="Symbol">(</a><a id="1320" href="Cubical.Foundations.Structure.html#1051" class="Function">str</a> <a id="1324" class="Symbol">(</a><a id="1325" href="Cubical.Categories.Site.Coverage.html#1054" class="Field">covers</a> <a id="1332" href="Cubical.Categories.Site.Coverage.html#1207" class="Bound">d</a><a id="1333" class="Symbol">)</a> <a id="1335" href="Cubical.Categories.Site.Coverage.html#1257" class="Bound">cov&#39;</a><a id="1339" class="Symbol">)</a>
            <a id="1353" class="Symbol">(</a><a id="1354" href="Cubical.Categories.Site.Sieve.html#3106" class="Function">pulledBackSieve</a> <a id="1370" href="Cubical.Categories.Site.Coverage.html#1226" class="Bound">f</a> <a id="1372" class="Symbol">(</a><a id="1373" href="Cubical.Categories.Site.Sieve.html#1478" class="Function">generatedSieve</a> <a id="1388" class="Symbol">(</a><a id="1389" href="Cubical.Foundations.Structure.html#1051" class="Function">str</a> <a id="1393" class="Symbol">(</a><a id="1394" href="Cubical.Categories.Site.Coverage.html#1054" class="Field">covers</a> <a id="1401" href="Cubical.Categories.Site.Coverage.html#1157" class="Bound">c</a><a id="1402" class="Symbol">)</a> <a id="1404" href="Cubical.Categories.Site.Coverage.html#1176" class="Bound">cov</a><a id="1407" class="Symbol">)))</a>
</pre></body></html>