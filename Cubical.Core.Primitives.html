<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.Core.Primitives</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-
This file document and export the main primitives of Cubical Agda. It
also defines some basic derived operations (composition and filling).

-}</a>
<a id="148" class="Keyword">module</a> <a id="155" href="Cubical.Core.Primitives.html" class="Module">Cubical.Core.Primitives</a> <a id="179" class="Keyword">where</a>

<a id="186" class="Keyword">open</a> <a id="191" class="Keyword">import</a> <a id="198" href="Agda.Builtin.Cubical.Path.html" class="Module">Agda.Builtin.Cubical.Path</a> <a id="224" class="Keyword">public</a>
<a id="231" class="Keyword">open</a> <a id="236" class="Keyword">import</a> <a id="243" href="Agda.Builtin.Cubical.Sub.html" class="Module">Agda.Builtin.Cubical.Sub</a> <a id="268" class="Keyword">public</a>
  <a id="277" class="Keyword">renaming</a> <a id="286" class="Symbol">(</a><a id="287" href="Agda.Builtin.Cubical.Sub.html#380" class="Primitive">primSubOut</a> <a id="298" class="Symbol">to</a> <a id="301" class="Primitive">outS</a><a id="305" class="Symbol">)</a>
<a id="307" class="Keyword">open</a> <a id="312" class="Keyword">import</a> <a id="319" href="Agda.Primitive.Cubical.html" class="Module">Agda.Primitive.Cubical</a> <a id="342" class="Keyword">public</a>
  <a id="351" class="Keyword">renaming</a> <a id="360" class="Symbol">(</a> <a id="362" href="Agda.Primitive.Cubical.html#393" class="Primitive">primIMin</a>       <a id="377" class="Symbol">to</a> <a id="380" class="Primitive">_∧_</a>  <a id="385" class="Comment">-- I → I → I</a>
           <a id="409" class="Symbol">;</a> <a id="411" href="Agda.Primitive.Cubical.html#418" class="Primitive">primIMax</a>       <a id="426" class="Symbol">to</a> <a id="429" class="Primitive">_∨_</a>  <a id="434" class="Comment">-- I → I → I</a>
           <a id="458" class="Symbol">;</a> <a id="460" href="Agda.Primitive.Cubical.html#443" class="Primitive">primINeg</a>       <a id="475" class="Symbol">to</a> <a id="478" class="Primitive">~_</a>   <a id="483" class="Comment">-- I → I</a>
           <a id="503" class="Symbol">;</a> <a id="505" href="Agda.Primitive.Cubical.html#1175" class="Postulate">isOneEmpty</a>     <a id="520" class="Symbol">to</a> <a id="523" class="Postulate">empty</a>
           <a id="540" class="Symbol">;</a> <a id="542" href="Agda.Primitive.Cubical.html#1697" class="Primitive">primComp</a>       <a id="557" class="Symbol">to</a> <a id="560" class="Primitive">comp</a>
           <a id="576" class="Symbol">;</a> <a id="578" href="Agda.Primitive.Cubical.html#1924" class="Primitive">primHComp</a>      <a id="593" class="Symbol">to</a> <a id="596" class="Primitive">hcomp</a>
           <a id="613" class="Symbol">;</a> <a id="615" href="Agda.Primitive.Cubical.html#1851" class="Primitive">primTransp</a>     <a id="630" class="Symbol">to</a> <a id="633" class="Primitive">transp</a>
           <a id="651" class="Symbol">;</a> <a id="653" href="Agda.Primitive.Cubical.html#529" class="Postulate">itIsOne</a>        <a id="668" class="Symbol">to</a> <a id="671" class="Postulate">1=1</a> <a id="675" class="Symbol">)</a>

<a id="678" class="Comment">-- These two are to make sure all the primitives are loaded and ready</a>
<a id="748" class="Comment">-- to compute hcomp/transp for the universe.</a>
<a id="793" class="Keyword">import</a> <a id="800" href="Agda.Builtin.Cubical.Glue.html" class="Module">Agda.Builtin.Cubical.Glue</a>
<a id="826" class="Comment">-- HCompU is already imported from Glue, and older Agda versions do</a>
<a id="894" class="Comment">-- not have it. So we comment it out for now.</a>
<a id="940" class="Comment">-- import Agda.Builtin.Cubical.HCompU</a>

<a id="979" class="Keyword">open</a> <a id="984" class="Keyword">import</a> <a id="991" href="Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="1006" class="Keyword">public</a>
  <a id="1015" class="Keyword">using</a>    <a id="1024" class="Symbol">(</a> <a id="1026" href="Agda.Primitive.html#742" class="Postulate">Level</a>
           <a id="1043" class="Symbol">;</a> <a id="1045" href="Agda.Primitive.html#429" class="Primitive">SSet</a> <a id="1050" class="Symbol">)</a>
  <a id="1054" class="Keyword">renaming</a> <a id="1063" class="Symbol">(</a> <a id="1065" href="Agda.Primitive.html#915" class="Primitive">lzero</a> <a id="1071" class="Symbol">to</a> <a id="1074" class="Primitive">ℓ-zero</a>
           <a id="1092" class="Symbol">;</a> <a id="1094" href="Agda.Primitive.html#931" class="Primitive">lsuc</a>  <a id="1100" class="Symbol">to</a> <a id="1103" class="Primitive">ℓ-suc</a>
           <a id="1120" class="Symbol">;</a> <a id="1122" href="Agda.Primitive.html#961" class="Primitive Operator">_⊔_</a>   <a id="1128" class="Symbol">to</a> <a id="1131" class="Primitive Operator">ℓ-max</a>
           <a id="1148" class="Symbol">;</a> <a id="1150" href="Agda.Primitive.html#388" class="Primitive">Set</a>   <a id="1156" class="Symbol">to</a> <a id="1159" class="Primitive">Type</a>
           <a id="1175" class="Symbol">;</a> <a id="1177" href="Agda.Primitive.html#512" class="Primitive">Setω</a>  <a id="1183" class="Symbol">to</a> <a id="1186" class="Primitive">Typeω</a> <a id="1192" class="Symbol">)</a>
<a id="1194" class="Keyword">open</a> <a id="1199" class="Keyword">import</a> <a id="1206" href="Agda.Builtin.Sigma.html" class="Module">Agda.Builtin.Sigma</a> <a id="1225" class="Keyword">public</a>

<a id="1233" class="Comment">-- This file document the Cubical Agda primitives. The primitives</a>
<a id="1299" class="Comment">-- themselves are bound by the Agda files imported above.</a>

<a id="1358" class="Comment">-- * The Interval</a>
<a id="1376" class="Comment">-- I : IUniv</a>

<a id="1390" class="Comment">-- Endpoints, Connections, Reversal</a>
<a id="1426" class="Comment">-- i0 i1   : I</a>
<a id="1441" class="Comment">-- _∧_ _∨_ : I → I → I</a>
<a id="1464" class="Comment">-- ~_      : I → I</a>


<a id="1485" class="Comment">-- * Dependent path type. (Path over Path)</a>

<a id="1529" class="Comment">-- Introduced with lambda abstraction and eliminated with application,</a>
<a id="1600" class="Comment">-- just like function types.</a>

<a id="1630" class="Comment">-- PathP : ∀ {ℓ} (A : I → Type ℓ) → A i0 → A i1 → Type ℓ</a>

<a id="1688" class="Keyword">infix</a> <a id="1694" class="Number">4</a> <a id="1696" href="Cubical.Core.Primitives.html#1704" class="Function Operator">_[_≡_]</a>

<a id="_[_≡_]"></a><a id="1704" href="Cubical.Core.Primitives.html#1704" class="Function Operator">_[_≡_]</a> <a id="1711" class="Symbol">:</a> <a id="1713" class="Symbol">∀</a> <a id="1715" class="Symbol">{</a><a id="1716" href="Cubical.Core.Primitives.html#1716" class="Bound">ℓ</a><a id="1717" class="Symbol">}</a> <a id="1719" class="Symbol">(</a><a id="1720" href="Cubical.Core.Primitives.html#1720" class="Bound">A</a> <a id="1722" class="Symbol">:</a> <a id="1724" href="Agda.Primitive.Cubical.html#150" class="Datatype">I</a> <a id="1726" class="Symbol">→</a> <a id="1728" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="1733" href="Cubical.Core.Primitives.html#1716" class="Bound">ℓ</a><a id="1734" class="Symbol">)</a> <a id="1736" class="Symbol">→</a> <a id="1738" href="Cubical.Core.Primitives.html#1720" class="Bound">A</a> <a id="1740" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a> <a id="1743" class="Symbol">→</a> <a id="1745" href="Cubical.Core.Primitives.html#1720" class="Bound">A</a> <a id="1747" href="Agda.Primitive.Cubical.html#221" class="InductiveConstructor">i1</a> <a id="1750" class="Symbol">→</a> <a id="1752" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="1757" href="Cubical.Core.Primitives.html#1716" class="Bound">ℓ</a>
<a id="1759" href="Cubical.Core.Primitives.html#1704" class="Function Operator">_[_≡_]</a> <a id="1766" class="Symbol">=</a> <a id="1768" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a>


<a id="1776" class="Comment">-- Non dependent path types</a>

<a id="Path"></a><a id="1805" href="Cubical.Core.Primitives.html#1805" class="Function">Path</a> <a id="1810" class="Symbol">:</a> <a id="1812" class="Symbol">∀</a> <a id="1814" class="Symbol">{</a><a id="1815" href="Cubical.Core.Primitives.html#1815" class="Bound">ℓ</a><a id="1816" class="Symbol">}</a> <a id="1818" class="Symbol">(</a><a id="1819" href="Cubical.Core.Primitives.html#1819" class="Bound">A</a> <a id="1821" class="Symbol">:</a> <a id="1823" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="1828" href="Cubical.Core.Primitives.html#1815" class="Bound">ℓ</a><a id="1829" class="Symbol">)</a> <a id="1831" class="Symbol">→</a> <a id="1833" href="Cubical.Core.Primitives.html#1819" class="Bound">A</a> <a id="1835" class="Symbol">→</a> <a id="1837" href="Cubical.Core.Primitives.html#1819" class="Bound">A</a> <a id="1839" class="Symbol">→</a> <a id="1841" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="1846" href="Cubical.Core.Primitives.html#1815" class="Bound">ℓ</a>
<a id="1848" href="Cubical.Core.Primitives.html#1805" class="Function">Path</a> <a id="1853" href="Cubical.Core.Primitives.html#1853" class="Bound">A</a> <a id="1855" href="Cubical.Core.Primitives.html#1855" class="Bound">a</a> <a id="1857" href="Cubical.Core.Primitives.html#1857" class="Bound">b</a> <a id="1859" class="Symbol">=</a> <a id="1861" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="1867" class="Symbol">(λ</a> <a id="1870" href="Cubical.Core.Primitives.html#1870" class="Bound">_</a> <a id="1872" class="Symbol">→</a> <a id="1874" href="Cubical.Core.Primitives.html#1853" class="Bound">A</a><a id="1875" class="Symbol">)</a> <a id="1877" href="Cubical.Core.Primitives.html#1855" class="Bound">a</a> <a id="1879" href="Cubical.Core.Primitives.html#1857" class="Bound">b</a>

<a id="1882" class="Comment">-- PathP (λ i → A) x y gets printed as x ≡ y when A does not mention i.</a>
<a id="1954" class="Comment">--  _≡_ : ∀ {ℓ} {A : Type ℓ} → A → A → Type ℓ</a>
<a id="2000" class="Comment">--  _≡_ {A = A} = PathP (λ _ → A)</a>


<a id="2036" class="Comment">-- * @IsOne r@ represents the constraint &quot;r = i1&quot;.</a>
<a id="2087" class="Comment">-- Often we will use &quot;φ&quot; for elements of I, when we intend to use them</a>
<a id="2158" class="Comment">-- with IsOne (or Partial[P]).</a>
<a id="2189" class="Comment">-- IsOne : I → SSet ℓ-zero</a>

<a id="2217" class="Comment">-- i1 is indeed equal to i1.</a>
<a id="2246" class="Comment">-- 1=1 : IsOne i1</a>


<a id="2266" class="Comment">-- * Types of partial elements, and their dependent version.</a>

<a id="2328" class="Comment">-- &quot;Partial φ A&quot; is a special version of &quot;IsOne φ → A&quot; with a more</a>
<a id="2395" class="Comment">-- extensional judgmental equality.</a>
<a id="2431" class="Comment">-- &quot;PartialP φ A&quot; allows &quot;A&quot; to be defined only on &quot;φ&quot;.</a>

<a id="2488" class="Comment">-- Partial : ∀ {ℓ} → I → Type ℓ → SSet ℓ</a>
<a id="2529" class="Comment">-- PartialP : ∀ {ℓ} → (φ : I) → Partial φ (Type ℓ) → SSet ℓ</a>

<a id="2590" class="Comment">-- Partial elements are introduced by pattern matching with (r = i0)</a>
<a id="2659" class="Comment">-- or (r = i1) constraints, like so:</a>

<a id="2697" class="Keyword">private</a>
  <a id="sys"></a><a id="2707" href="Cubical.Core.Primitives.html#2707" class="Function">sys</a> <a id="2711" class="Symbol">:</a> <a id="2713" class="Symbol">∀</a> <a id="2715" href="Cubical.Core.Primitives.html#2715" class="Bound">i</a> <a id="2717" class="Symbol">→</a> <a id="2719" href="Agda.Primitive.Cubical.html#1115" class="Primitive">Partial</a> <a id="2727" class="Symbol">(</a><a id="2728" href="Cubical.Core.Primitives.html#2715" class="Bound">i</a> <a id="2730" href="Cubical.Core.Primitives.html#429" class="Primitive Operator">∨</a> <a id="2732" href="Cubical.Core.Primitives.html#478" class="Primitive Operator">~</a> <a id="2734" href="Cubical.Core.Primitives.html#2715" class="Bound">i</a><a id="2735" class="Symbol">)</a> <a id="2737" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₁</a>
  <a id="2745" href="Cubical.Core.Primitives.html#2707" class="Function">sys</a> <a id="2749" href="Cubical.Core.Primitives.html#2749" class="Bound">i</a> <a id="2751" class="Symbol">(</a><a id="2752" href="Cubical.Core.Primitives.html#2749" class="Bound">i</a> <a id="2754" class="Symbol">=</a> <a id="2756" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a><a id="2758" class="Symbol">)</a> <a id="2760" class="Symbol">=</a> <a id="2762" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₀</a>
  <a id="2770" href="Cubical.Core.Primitives.html#2707" class="Function">sys</a> <a id="2774" href="Cubical.Core.Primitives.html#2774" class="Bound">i</a> <a id="2776" class="Symbol">(</a><a id="2777" href="Cubical.Core.Primitives.html#2774" class="Bound">i</a> <a id="2779" class="Symbol">=</a> <a id="2781" href="Agda.Primitive.Cubical.html#221" class="InductiveConstructor">i1</a><a id="2783" class="Symbol">)</a> <a id="2785" class="Symbol">=</a> <a id="2787" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₀</a> <a id="2793" class="Symbol">→</a> <a id="2795" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₀</a>

  <a id="2804" class="Comment">-- It also works with pattern matching lambdas:</a>
  <a id="2854" class="Comment">--  http://wiki.portal.chalmers.se/agda/pmwiki.php?n=ReferenceManual.PatternMatchingLambdas</a>
  <a id="sys&#39;"></a><a id="2948" href="Cubical.Core.Primitives.html#2948" class="Function">sys&#39;</a> <a id="2953" class="Symbol">:</a> <a id="2955" class="Symbol">∀</a> <a id="2957" href="Cubical.Core.Primitives.html#2957" class="Bound">i</a> <a id="2959" class="Symbol">→</a> <a id="2961" href="Agda.Primitive.Cubical.html#1115" class="Primitive">Partial</a> <a id="2969" class="Symbol">(</a><a id="2970" href="Cubical.Core.Primitives.html#2957" class="Bound">i</a> <a id="2972" href="Cubical.Core.Primitives.html#429" class="Primitive Operator">∨</a> <a id="2974" href="Cubical.Core.Primitives.html#478" class="Primitive Operator">~</a> <a id="2976" href="Cubical.Core.Primitives.html#2957" class="Bound">i</a><a id="2977" class="Symbol">)</a> <a id="2979" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₁</a>
  <a id="2987" href="Cubical.Core.Primitives.html#2948" class="Function">sys&#39;</a> <a id="2992" href="Cubical.Core.Primitives.html#2992" class="Bound">i</a> <a id="2994" class="Symbol">=</a> <a id="2996" class="Symbol">λ</a> <a id="2998" class="Symbol">{</a> <a id="3000" class="Symbol">(</a><a id="3001" href="Cubical.Core.Primitives.html#2992" class="Bound">i</a> <a id="3003" class="Symbol">=</a> <a id="3005" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a><a id="3007" class="Symbol">)</a> <a id="3009" class="Symbol">→</a> <a id="3011" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₀</a>
             <a id="3030" class="Symbol">;</a> <a id="3032" class="Symbol">(</a><a id="3033" href="Cubical.Core.Primitives.html#2992" class="Bound">i</a> <a id="3035" class="Symbol">=</a> <a id="3037" href="Agda.Primitive.Cubical.html#221" class="InductiveConstructor">i1</a><a id="3039" class="Symbol">)</a> <a id="3041" class="Symbol">→</a> <a id="3043" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₀</a> <a id="3049" class="Symbol">→</a> <a id="3051" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₀</a>
             <a id="3070" class="Symbol">}</a>

  <a id="3075" class="Comment">-- When the cases overlap they must agree.</a>
  <a id="sys2"></a><a id="3120" href="Cubical.Core.Primitives.html#3120" class="Function">sys2</a> <a id="3125" class="Symbol">:</a> <a id="3127" class="Symbol">∀</a> <a id="3129" href="Cubical.Core.Primitives.html#3129" class="Bound">i</a> <a id="3131" href="Cubical.Core.Primitives.html#3131" class="Bound">j</a> <a id="3133" class="Symbol">→</a> <a id="3135" href="Agda.Primitive.Cubical.html#1115" class="Primitive">Partial</a> <a id="3143" class="Symbol">(</a><a id="3144" href="Cubical.Core.Primitives.html#3129" class="Bound">i</a> <a id="3146" href="Cubical.Core.Primitives.html#429" class="Primitive Operator">∨</a> <a id="3148" class="Symbol">(</a><a id="3149" href="Cubical.Core.Primitives.html#3129" class="Bound">i</a> <a id="3151" href="Cubical.Core.Primitives.html#380" class="Primitive Operator">∧</a> <a id="3153" href="Cubical.Core.Primitives.html#3131" class="Bound">j</a><a id="3154" class="Symbol">))</a> <a id="3157" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₁</a>
  <a id="3165" href="Cubical.Core.Primitives.html#3120" class="Function">sys2</a> <a id="3170" href="Cubical.Core.Primitives.html#3170" class="Bound">i</a> <a id="3172" href="Cubical.Core.Primitives.html#3172" class="Bound">j</a> <a id="3174" class="Symbol">=</a> <a id="3176" class="Symbol">λ</a> <a id="3178" class="Symbol">{</a> <a id="3180" class="Symbol">(</a><a id="3181" href="Cubical.Core.Primitives.html#3170" class="Bound">i</a> <a id="3183" class="Symbol">=</a> <a id="3185" href="Agda.Primitive.Cubical.html#221" class="InductiveConstructor">i1</a><a id="3187" class="Symbol">)</a>          <a id="3198" class="Symbol">→</a> <a id="3200" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₀</a>
               <a id="3221" class="Symbol">;</a> <a id="3223" class="Symbol">(</a><a id="3224" href="Cubical.Core.Primitives.html#3170" class="Bound">i</a> <a id="3226" class="Symbol">=</a> <a id="3228" href="Agda.Primitive.Cubical.html#221" class="InductiveConstructor">i1</a><a id="3230" class="Symbol">)</a> <a id="3232" class="Symbol">(</a><a id="3233" href="Cubical.Core.Primitives.html#3172" class="Bound">j</a> <a id="3235" class="Symbol">=</a> <a id="3237" href="Agda.Primitive.Cubical.html#221" class="InductiveConstructor">i1</a><a id="3239" class="Symbol">)</a> <a id="3241" class="Symbol">→</a> <a id="3243" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₀</a>
               <a id="3264" class="Symbol">}</a>

  <a id="3269" class="Comment">-- (i0 = i1) is actually absurd.</a>
  <a id="sys3"></a><a id="3304" href="Cubical.Core.Primitives.html#3304" class="Function">sys3</a> <a id="3309" class="Symbol">:</a> <a id="3311" href="Agda.Primitive.Cubical.html#1115" class="Primitive">Partial</a> <a id="3319" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a> <a id="3322" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type₁</a>
  <a id="3330" href="Cubical.Core.Primitives.html#3304" class="Function">sys3</a> <a id="3335" class="Symbol">=</a> <a id="3337" class="Symbol">λ</a> <a id="3339" class="Symbol">{</a> <a id="3341" class="Symbol">()</a> <a id="3344" class="Symbol">}</a>


<a id="3348" class="Comment">-- * There are cubical subtypes as in CCHM. Note that these are not</a>
<a id="3416" class="Comment">-- fibrant (hence in SSet ℓ):</a>

<a id="_[_↦_]"></a><a id="3447" href="Cubical.Core.Primitives.html#3447" class="Function Operator">_[_↦_]</a> <a id="3454" class="Symbol">:</a> <a id="3456" class="Symbol">∀</a> <a id="3458" class="Symbol">{</a><a id="3459" href="Cubical.Core.Primitives.html#3459" class="Bound">ℓ</a><a id="3460" class="Symbol">}</a> <a id="3462" class="Symbol">(</a><a id="3463" href="Cubical.Core.Primitives.html#3463" class="Bound">A</a> <a id="3465" class="Symbol">:</a> <a id="3467" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="3472" href="Cubical.Core.Primitives.html#3459" class="Bound">ℓ</a><a id="3473" class="Symbol">)</a> <a id="3475" class="Symbol">(</a><a id="3476" href="Cubical.Core.Primitives.html#3476" class="Bound">φ</a> <a id="3478" class="Symbol">:</a> <a id="3480" href="Agda.Primitive.Cubical.html#150" class="Datatype">I</a><a id="3481" class="Symbol">)</a> <a id="3483" class="Symbol">(</a><a id="3484" href="Cubical.Core.Primitives.html#3484" class="Bound">u</a> <a id="3486" class="Symbol">:</a> <a id="3488" href="Agda.Primitive.Cubical.html#1115" class="Primitive">Partial</a> <a id="3496" href="Cubical.Core.Primitives.html#3476" class="Bound">φ</a> <a id="3498" href="Cubical.Core.Primitives.html#3463" class="Bound">A</a><a id="3499" class="Symbol">)</a> <a id="3501" class="Symbol">→</a> <a id="3503" href="Agda.Primitive.html#429" class="Primitive">SSet</a> <a id="3508" href="Cubical.Core.Primitives.html#3459" class="Bound">ℓ</a>
<a id="3510" href="Cubical.Core.Primitives.html#3510" class="Bound">A</a> <a id="3512" href="Cubical.Core.Primitives.html#3447" class="Function Operator">[</a> <a id="3514" href="Cubical.Core.Primitives.html#3514" class="Bound">φ</a> <a id="3516" href="Cubical.Core.Primitives.html#3447" class="Function Operator">↦</a> <a id="3518" href="Cubical.Core.Primitives.html#3518" class="Bound">u</a> <a id="3520" href="Cubical.Core.Primitives.html#3447" class="Function Operator">]</a> <a id="3522" class="Symbol">=</a> <a id="3524" href="Agda.Builtin.Cubical.Sub.html#171" class="Postulate">Sub</a> <a id="3528" href="Cubical.Core.Primitives.html#3510" class="Bound">A</a> <a id="3530" href="Cubical.Core.Primitives.html#3514" class="Bound">φ</a> <a id="3532" href="Cubical.Core.Primitives.html#3518" class="Bound">u</a>

<a id="3535" class="Keyword">infix</a> <a id="3541" class="Number">4</a> <a id="3543" href="Cubical.Core.Primitives.html#3447" class="Function Operator">_[_↦_]</a>

<a id="3551" class="Comment">-- Any element u : A can be seen as an element of A [ φ ↦ u ] which</a>
<a id="3619" class="Comment">-- agrees with u on φ:</a>

<a id="3643" class="Comment">-- inS : ∀ {ℓ} {A : Type ℓ} {φ} (u : A) → A [ φ ↦ (λ _ → u) ]</a>

<a id="3706" class="Comment">-- One can also forget that an element agrees with u on φ:</a>

<a id="3766" class="Comment">-- outS : ∀ {ℓ} {A : Type ℓ} {φ : I} {u : Partial φ A} → A [ φ ↦ u ] → A</a>


<a id="3841" class="Comment">-- * Composition operation according to [CCHM 18].</a>
<a id="3892" class="Comment">-- When calling &quot;comp A φ u a&quot; Agda makes sure that &quot;a&quot; agrees with &quot;u i0&quot; on &quot;φ&quot;.</a>
<a id="3975" class="Comment">-- compCCHM : ∀ {ℓ} (A : (i : I) → Type ℓ) (φ : I) (u : ∀ i → Partial φ (A i)) (a : A i0) → A i1</a>

<a id="4073" class="Comment">-- Note: this is not recommended to use, instead use the CHM</a>
<a id="4134" class="Comment">-- primitives! The reason is that these work with HITs and produce</a>
<a id="4201" class="Comment">-- fewer empty systems.</a>


<a id="4227" class="Comment">-- * Generalized transport and homogeneous composition [CHM 18].</a>

<a id="4293" class="Comment">-- When calling &quot;transp A φ a&quot; Agda makes sure that &quot;A&quot; is constant on &quot;φ&quot; (see below).</a>
<a id="4381" class="Comment">-- transp : ∀ {ℓ} (A : I → Type ℓ) (φ : I) (a : A i0) → A i1</a>

<a id="4443" class="Comment">-- &quot;A&quot; being constant on &quot;φ&quot; means that &quot;A&quot; should be a constant function whenever the</a>
<a id="4530" class="Comment">-- constraint &quot;φ = i1&quot; is satisfied. For example:</a>
<a id="4580" class="Comment">-- - If &quot;φ&quot; is &quot;i0&quot; then &quot;A&quot; can be anything, since this condition is vacuously true.</a>
<a id="4666" class="Comment">-- - If &quot;φ&quot; is &quot;i1&quot; then &quot;A&quot; must be a constant function.</a>
<a id="4724" class="Comment">-- - If &quot;φ&quot; is some in-scope variable &quot;i&quot; then &quot;A&quot; only needs to be a constant function</a>
<a id="4812" class="Comment">--   when substituting &quot;i1&quot; for &quot;i&quot;.</a>

<a id="4850" class="Comment">-- When calling &quot;hcomp A φ u a&quot; Agda makes sure that &quot;a&quot; agrees with &quot;u i0&quot; on &quot;φ&quot;.</a>
<a id="4934" class="Comment">-- hcomp : ∀ {ℓ} {A : Type ℓ} {φ : I} (u : I → Partial φ A) (a : A) → A</a>

<a id="5007" class="Keyword">private</a>
  <a id="5017" class="Keyword">variable</a>
    <a id="5030" href="Cubical.Core.Primitives.html#5030" class="Generalizable">ℓ</a>  <a id="5033" class="Symbol">:</a> <a id="5035" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="5045" href="Cubical.Core.Primitives.html#5045" class="Generalizable">ℓ&#39;</a> <a id="5048" class="Symbol">:</a> <a id="5050" href="Agda.Primitive.Cubical.html#150" class="Datatype">I</a> <a id="5052" class="Symbol">→</a> <a id="5054" href="Agda.Primitive.html#742" class="Postulate">Level</a>

<a id="5061" class="Comment">-- Homogeneous filling</a>
<a id="hfill"></a><a id="5084" href="Cubical.Core.Primitives.html#5084" class="Function">hfill</a> <a id="5090" class="Symbol">:</a> <a id="5092" class="Symbol">{</a><a id="5093" href="Cubical.Core.Primitives.html#5093" class="Bound">A</a> <a id="5095" class="Symbol">:</a> <a id="5097" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="5102" href="Cubical.Core.Primitives.html#5030" class="Generalizable">ℓ</a><a id="5103" class="Symbol">}</a>
        <a id="5113" class="Symbol">{</a><a id="5114" href="Cubical.Core.Primitives.html#5114" class="Bound">φ</a> <a id="5116" class="Symbol">:</a> <a id="5118" href="Agda.Primitive.Cubical.html#150" class="Datatype">I</a><a id="5119" class="Symbol">}</a>
        <a id="5129" class="Symbol">(</a><a id="5130" href="Cubical.Core.Primitives.html#5130" class="Bound">u</a> <a id="5132" class="Symbol">:</a> <a id="5134" class="Symbol">∀</a> <a id="5136" href="Cubical.Core.Primitives.html#5136" class="Bound">i</a> <a id="5138" class="Symbol">→</a> <a id="5140" href="Agda.Primitive.Cubical.html#1115" class="Primitive">Partial</a> <a id="5148" href="Cubical.Core.Primitives.html#5114" class="Bound">φ</a> <a id="5150" href="Cubical.Core.Primitives.html#5093" class="Bound">A</a><a id="5151" class="Symbol">)</a>
        <a id="5161" class="Symbol">(</a><a id="5162" href="Cubical.Core.Primitives.html#5162" class="Bound">u0</a> <a id="5165" class="Symbol">:</a> <a id="5167" href="Cubical.Core.Primitives.html#5093" class="Bound">A</a> <a id="5169" href="Cubical.Core.Primitives.html#3447" class="Function Operator">[</a> <a id="5171" href="Cubical.Core.Primitives.html#5114" class="Bound">φ</a> <a id="5173" href="Cubical.Core.Primitives.html#3447" class="Function Operator">↦</a> <a id="5175" href="Cubical.Core.Primitives.html#5130" class="Bound">u</a> <a id="5177" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a> <a id="5180" href="Cubical.Core.Primitives.html#3447" class="Function Operator">]</a><a id="5181" class="Symbol">)</a>
        <a id="5191" class="Comment">-----------------------</a>
        <a id="5223" class="Symbol">(</a><a id="5224" href="Cubical.Core.Primitives.html#5224" class="Bound">i</a> <a id="5226" class="Symbol">:</a> <a id="5228" href="Agda.Primitive.Cubical.html#150" class="Datatype">I</a><a id="5229" class="Symbol">)</a> <a id="5231" class="Symbol">→</a> <a id="5233" href="Cubical.Core.Primitives.html#5093" class="Bound">A</a>
<a id="5235" href="Cubical.Core.Primitives.html#5084" class="Function">hfill</a> <a id="5241" class="Symbol">{</a><a id="5242" class="Argument">φ</a> <a id="5244" class="Symbol">=</a> <a id="5246" href="Cubical.Core.Primitives.html#5246" class="Bound">φ</a><a id="5247" class="Symbol">}</a> <a id="5249" href="Cubical.Core.Primitives.html#5249" class="Bound">u</a> <a id="5251" href="Cubical.Core.Primitives.html#5251" class="Bound">u0</a> <a id="5254" href="Cubical.Core.Primitives.html#5254" class="Bound">i</a> <a id="5256" class="Symbol">=</a>
  <a id="5260" href="Cubical.Core.Primitives.html#596" class="Primitive">hcomp</a> <a id="5266" class="Symbol">(λ</a> <a id="5269" href="Cubical.Core.Primitives.html#5269" class="Bound">j</a> <a id="5271" class="Symbol">→</a> <a id="5273" class="Symbol">λ</a> <a id="5275" class="Symbol">{</a> <a id="5277" class="Symbol">(</a><a id="5278" href="Cubical.Core.Primitives.html#5246" class="Bound">φ</a> <a id="5280" class="Symbol">=</a> <a id="5282" href="Agda.Primitive.Cubical.html#221" class="InductiveConstructor">i1</a><a id="5284" class="Symbol">)</a> <a id="5286" class="Symbol">→</a> <a id="5288" href="Cubical.Core.Primitives.html#5249" class="Bound">u</a> <a id="5290" class="Symbol">(</a><a id="5291" href="Cubical.Core.Primitives.html#5254" class="Bound">i</a> <a id="5293" href="Cubical.Core.Primitives.html#380" class="Primitive Operator">∧</a> <a id="5295" href="Cubical.Core.Primitives.html#5269" class="Bound">j</a><a id="5296" class="Symbol">)</a> <a id="5298" href="Cubical.Core.Primitives.html#671" class="Postulate">1=1</a>
                 <a id="5319" class="Symbol">;</a> <a id="5321" class="Symbol">(</a><a id="5322" href="Cubical.Core.Primitives.html#5254" class="Bound">i</a> <a id="5324" class="Symbol">=</a> <a id="5326" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a><a id="5328" class="Symbol">)</a> <a id="5330" class="Symbol">→</a> <a id="5332" href="Cubical.Core.Primitives.html#301" class="Primitive">outS</a> <a id="5337" href="Cubical.Core.Primitives.html#5251" class="Bound">u0</a> <a id="5340" class="Symbol">})</a>
        <a id="5351" class="Symbol">(</a><a id="5352" href="Cubical.Core.Primitives.html#301" class="Primitive">outS</a> <a id="5357" href="Cubical.Core.Primitives.html#5251" class="Bound">u0</a><a id="5359" class="Symbol">)</a>

<a id="5362" class="Comment">-- Heterogeneous composition can defined as in CHM, however we use the</a>
<a id="5433" class="Comment">-- builtin one as it doesn&#39;t require u0 to be a cubical subtype. This</a>
<a id="5503" class="Comment">-- reduces the number of inS&#39;s a lot.</a>
<a id="5541" class="Comment">-- comp : (A : ∀ i → Type (ℓ&#39; i))</a>
<a id="5575" class="Comment">--        {φ : I}</a>
<a id="5593" class="Comment">--        (u : ∀ i → Partial φ (A i))</a>
<a id="5631" class="Comment">--        (u0 : A i0 [ φ ↦ u i0 ])</a>
<a id="5666" class="Comment">--      → ---------------------------</a>
<a id="5704" class="Comment">--        A i1</a>
<a id="5719" class="Comment">-- comp A {φ = φ} u u0 =</a>
<a id="5744" class="Comment">--   hcomp (λ i → λ { (φ = i1) → transp (λ j → A (i ∨ j)) i (u _ 1=1) })</a>
<a id="5817" class="Comment">--         (transp A i0 (outS u0))</a>

<a id="5853" class="Comment">-- Heterogeneous filling defined using comp</a>
<a id="fill"></a><a id="5897" href="Cubical.Core.Primitives.html#5897" class="Function">fill</a> <a id="5902" class="Symbol">:</a> <a id="5904" class="Symbol">(</a><a id="5905" href="Cubical.Core.Primitives.html#5905" class="Bound">A</a> <a id="5907" class="Symbol">:</a> <a id="5909" class="Symbol">∀</a> <a id="5911" href="Cubical.Core.Primitives.html#5911" class="Bound">i</a> <a id="5913" class="Symbol">→</a> <a id="5915" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="5920" class="Symbol">(</a><a id="5921" href="Cubical.Core.Primitives.html#5045" class="Generalizable">ℓ&#39;</a> <a id="5924" href="Cubical.Core.Primitives.html#5911" class="Bound">i</a><a id="5925" class="Symbol">))</a>
       <a id="5935" class="Symbol">{</a><a id="5936" href="Cubical.Core.Primitives.html#5936" class="Bound">φ</a> <a id="5938" class="Symbol">:</a> <a id="5940" href="Agda.Primitive.Cubical.html#150" class="Datatype">I</a><a id="5941" class="Symbol">}</a>
       <a id="5950" class="Symbol">(</a><a id="5951" href="Cubical.Core.Primitives.html#5951" class="Bound">u</a> <a id="5953" class="Symbol">:</a> <a id="5955" class="Symbol">∀</a> <a id="5957" href="Cubical.Core.Primitives.html#5957" class="Bound">i</a> <a id="5959" class="Symbol">→</a> <a id="5961" href="Agda.Primitive.Cubical.html#1115" class="Primitive">Partial</a> <a id="5969" href="Cubical.Core.Primitives.html#5936" class="Bound">φ</a> <a id="5971" class="Symbol">(</a><a id="5972" href="Cubical.Core.Primitives.html#5905" class="Bound">A</a> <a id="5974" href="Cubical.Core.Primitives.html#5957" class="Bound">i</a><a id="5975" class="Symbol">))</a>
       <a id="5985" class="Symbol">(</a><a id="5986" href="Cubical.Core.Primitives.html#5986" class="Bound">u0</a> <a id="5989" class="Symbol">:</a> <a id="5991" href="Cubical.Core.Primitives.html#5905" class="Bound">A</a> <a id="5993" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a> <a id="5996" href="Cubical.Core.Primitives.html#3447" class="Function Operator">[</a> <a id="5998" href="Cubical.Core.Primitives.html#5936" class="Bound">φ</a> <a id="6000" href="Cubical.Core.Primitives.html#3447" class="Function Operator">↦</a> <a id="6002" href="Cubical.Core.Primitives.html#5951" class="Bound">u</a> <a id="6004" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a> <a id="6007" href="Cubical.Core.Primitives.html#3447" class="Function Operator">]</a><a id="6008" class="Symbol">)</a>
       <a id="6017" class="Comment">---------------------------</a>
       <a id="6052" class="Symbol">(</a><a id="6053" href="Cubical.Core.Primitives.html#6053" class="Bound">i</a> <a id="6055" class="Symbol">:</a> <a id="6057" href="Agda.Primitive.Cubical.html#150" class="Datatype">I</a><a id="6058" class="Symbol">)</a> <a id="6060" class="Symbol">→</a> <a id="6062" href="Cubical.Core.Primitives.html#5905" class="Bound">A</a> <a id="6064" href="Cubical.Core.Primitives.html#6053" class="Bound">i</a>
<a id="6066" href="Cubical.Core.Primitives.html#5897" class="Function">fill</a> <a id="6071" href="Cubical.Core.Primitives.html#6071" class="Bound">A</a> <a id="6073" class="Symbol">{</a><a id="6074" class="Argument">φ</a> <a id="6076" class="Symbol">=</a> <a id="6078" href="Cubical.Core.Primitives.html#6078" class="Bound">φ</a><a id="6079" class="Symbol">}</a> <a id="6081" href="Cubical.Core.Primitives.html#6081" class="Bound">u</a> <a id="6083" href="Cubical.Core.Primitives.html#6083" class="Bound">u0</a> <a id="6086" href="Cubical.Core.Primitives.html#6086" class="Bound">i</a> <a id="6088" class="Symbol">=</a>
  <a id="6092" href="Cubical.Core.Primitives.html#560" class="Primitive">comp</a> <a id="6097" class="Symbol">(λ</a> <a id="6100" href="Cubical.Core.Primitives.html#6100" class="Bound">j</a> <a id="6102" class="Symbol">→</a> <a id="6104" href="Cubical.Core.Primitives.html#6071" class="Bound">A</a> <a id="6106" class="Symbol">(</a><a id="6107" href="Cubical.Core.Primitives.html#6086" class="Bound">i</a> <a id="6109" href="Cubical.Core.Primitives.html#380" class="Primitive Operator">∧</a> <a id="6111" href="Cubical.Core.Primitives.html#6100" class="Bound">j</a><a id="6112" class="Symbol">))</a>
       <a id="6122" class="Symbol">(λ</a> <a id="6125" href="Cubical.Core.Primitives.html#6125" class="Bound">j</a> <a id="6127" class="Symbol">→</a> <a id="6129" class="Symbol">λ</a> <a id="6131" class="Symbol">{</a> <a id="6133" class="Symbol">(</a><a id="6134" href="Cubical.Core.Primitives.html#6078" class="Bound">φ</a> <a id="6136" class="Symbol">=</a> <a id="6138" href="Agda.Primitive.Cubical.html#221" class="InductiveConstructor">i1</a><a id="6140" class="Symbol">)</a> <a id="6142" class="Symbol">→</a> <a id="6144" href="Cubical.Core.Primitives.html#6081" class="Bound">u</a> <a id="6146" class="Symbol">(</a><a id="6147" href="Cubical.Core.Primitives.html#6086" class="Bound">i</a> <a id="6149" href="Cubical.Core.Primitives.html#380" class="Primitive Operator">∧</a> <a id="6151" href="Cubical.Core.Primitives.html#6125" class="Bound">j</a><a id="6152" class="Symbol">)</a> <a id="6154" href="Cubical.Core.Primitives.html#671" class="Postulate">1=1</a>
                <a id="6174" class="Symbol">;</a> <a id="6176" class="Symbol">(</a><a id="6177" href="Cubical.Core.Primitives.html#6086" class="Bound">i</a> <a id="6179" class="Symbol">=</a> <a id="6181" href="Agda.Primitive.Cubical.html#193" class="InductiveConstructor">i0</a><a id="6183" class="Symbol">)</a> <a id="6185" class="Symbol">→</a> <a id="6187" href="Cubical.Core.Primitives.html#301" class="Primitive">outS</a> <a id="6192" href="Cubical.Core.Primitives.html#6083" class="Bound">u0</a> <a id="6195" class="Symbol">})</a>
       <a id="6205" class="Symbol">(</a><a id="6206" href="Cubical.Core.Primitives.html#301" class="Primitive">outS</a> <a id="6211" href="Cubical.Core.Primitives.html#6083" class="Bound">u0</a><a id="6213" class="Symbol">)</a>

<a id="6216" class="Comment">-- Σ-types</a>
<a id="6227" class="Keyword">infix</a> <a id="6233" class="Number">2</a> <a id="6235" href="Cubical.Core.Primitives.html#6245" class="Function">Σ-syntax</a>

<a id="Σ-syntax"></a><a id="6245" href="Cubical.Core.Primitives.html#6245" class="Function">Σ-syntax</a> <a id="6254" class="Symbol">:</a> <a id="6256" class="Symbol">∀</a> <a id="6258" class="Symbol">{</a><a id="6259" href="Cubical.Core.Primitives.html#6259" class="Bound">ℓ</a> <a id="6261" href="Cubical.Core.Primitives.html#6261" class="Bound">ℓ&#39;</a><a id="6263" class="Symbol">}</a> <a id="6265" class="Symbol">(</a><a id="6266" href="Cubical.Core.Primitives.html#6266" class="Bound">A</a> <a id="6268" class="Symbol">:</a> <a id="6270" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="6275" href="Cubical.Core.Primitives.html#6259" class="Bound">ℓ</a><a id="6276" class="Symbol">)</a> <a id="6278" class="Symbol">(</a><a id="6279" href="Cubical.Core.Primitives.html#6279" class="Bound">B</a> <a id="6281" class="Symbol">:</a> <a id="6283" href="Cubical.Core.Primitives.html#6266" class="Bound">A</a> <a id="6285" class="Symbol">→</a> <a id="6287" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="6292" href="Cubical.Core.Primitives.html#6261" class="Bound">ℓ&#39;</a><a id="6294" class="Symbol">)</a> <a id="6296" class="Symbol">→</a> <a id="6298" href="Cubical.Core.Primitives.html#1159" class="Primitive">Type</a> <a id="6303" class="Symbol">(</a><a id="6304" href="Cubical.Core.Primitives.html#1131" class="Primitive">ℓ-max</a> <a id="6310" href="Cubical.Core.Primitives.html#6259" class="Bound">ℓ</a> <a id="6312" href="Cubical.Core.Primitives.html#6261" class="Bound">ℓ&#39;</a><a id="6314" class="Symbol">)</a>
<a id="6316" href="Cubical.Core.Primitives.html#6245" class="Function">Σ-syntax</a> <a id="6325" class="Symbol">=</a> <a id="6327" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a>

<a id="6330" class="Keyword">syntax</a> <a id="6337" href="Cubical.Core.Primitives.html#6245" class="Function">Σ-syntax</a> <a id="6346" class="Bound">A</a> <a id="6348" class="Symbol">(λ</a> <a id="6351" class="Bound">x</a> <a id="6353" class="Symbol">→</a> <a id="6355" class="Bound">B</a><a id="6356" class="Symbol">)</a> <a id="6358" class="Symbol">=</a> <a id="6360" class="Function">Σ[</a> <a id="6363" class="Bound">x</a> <a id="6365" class="Function">∈</a> <a id="6367" class="Bound">A</a> <a id="6369" class="Function">]</a> <a id="6371" class="Bound">B</a>
</pre></body></html>