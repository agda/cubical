<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.HITs.PropositionalTruncation.MagicTrick</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-

Based on Nicolai Kraus&#39; blog post:
  The Truncation Map |_| : ℕ -&gt; ‖ℕ‖ is nearly Invertible
  https://homotopytypetheory.org/2013/10/28/the-truncation-map-_-ℕ-‖ℕ‖-is-nearly-invertible/

Defines [recover], which definitionally satisfies `recover ∣ x ∣ ≡ x` ([recover∣∣]) for homogeneous types

Also see the follow-up post by Jason Gross:
  Composition is not what you think it is! Why “nearly invertible” isn’t.
  https://homotopytypetheory.org/2014/02/24/composition-is-not-what-you-think-it-is-why-nearly-invertible-isnt/

-}</a>

<a id="533" class="Keyword">module</a> <a id="540" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html" class="Module">Cubical.HITs.PropositionalTruncation.MagicTrick</a> <a id="588" class="Keyword">where</a>

<a id="595" class="Keyword">open</a> <a id="600" class="Keyword">import</a> <a id="607" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>
<a id="635" class="Keyword">open</a> <a id="640" class="Keyword">import</a> <a id="647" href="Cubical.Foundations.Function.html" class="Module">Cubical.Foundations.Function</a>
<a id="676" class="Keyword">open</a> <a id="681" class="Keyword">import</a> <a id="688" href="Cubical.Foundations.Path.html" class="Module">Cubical.Foundations.Path</a>
<a id="713" class="Keyword">open</a> <a id="718" class="Keyword">import</a> <a id="725" href="Cubical.Foundations.Pointed.html" class="Module">Cubical.Foundations.Pointed</a>
<a id="753" class="Keyword">open</a> <a id="758" class="Keyword">import</a> <a id="765" href="Cubical.Foundations.Pointed.Homogeneous.html" class="Module">Cubical.Foundations.Pointed.Homogeneous</a>

<a id="806" class="Keyword">open</a> <a id="811" class="Keyword">import</a> <a id="818" href="Cubical.HITs.PropositionalTruncation.Base.html" class="Module">Cubical.HITs.PropositionalTruncation.Base</a>
<a id="860" class="Keyword">open</a> <a id="865" class="Keyword">import</a> <a id="872" href="Cubical.HITs.PropositionalTruncation.Properties.html" class="Module">Cubical.HITs.PropositionalTruncation.Properties</a>

<a id="921" class="Keyword">module</a> <a id="Recover"></a><a id="928" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#928" class="Module">Recover</a> <a id="936" class="Symbol">{</a><a id="937" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#937" class="Bound">ℓ</a><a id="938" class="Symbol">}</a> <a id="940" class="Symbol">(</a><a id="941" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#941" class="Bound">A∙</a> <a id="944" class="Symbol">:</a> <a id="946" href="Cubical.Foundations.Pointed.Base.html#441" class="Function">Pointed</a> <a id="954" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#937" class="Bound">ℓ</a><a id="955" class="Symbol">)</a> <a id="957" class="Symbol">(</a><a id="958" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#958" class="Bound">h</a> <a id="960" class="Symbol">:</a> <a id="962" href="Cubical.Foundations.Pointed.Homogeneous.html#1367" class="Function">isHomogeneous</a> <a id="976" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#941" class="Bound">A∙</a><a id="978" class="Symbol">)</a> <a id="980" class="Keyword">where</a>
  <a id="988" class="Keyword">private</a>
    <a id="Recover.A"></a><a id="1000" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a> <a id="1002" class="Symbol">=</a> <a id="1004" href="Cubical.Foundations.Structure.html#1009" class="Function">typ</a> <a id="1008" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#941" class="Bound">A∙</a>
    <a id="Recover.a"></a><a id="1015" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1015" class="Function">a</a> <a id="1017" class="Symbol">=</a> <a id="1019" href="Cubical.Foundations.Pointed.Base.html#517" class="Function">pt</a> <a id="1022" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#941" class="Bound">A∙</a>

  <a id="Recover.toEquivPtd"></a><a id="1028" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1028" class="Function">toEquivPtd</a> <a id="1039" class="Symbol">:</a> <a id="1041" href="Cubical.HITs.PropositionalTruncation.Base.html#226" class="Datatype Operator">∥</a> <a id="1043" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a> <a id="1045" href="Cubical.HITs.PropositionalTruncation.Base.html#226" class="Datatype Operator">∥₁</a> <a id="1048" class="Symbol">→</a> <a id="1050" href="Cubical.Core.Primitives.html#6245" class="Function">Σ[</a> <a id="1053" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1053" class="Bound">B∙</a> <a id="1056" href="Cubical.Core.Primitives.html#6245" class="Function">∈</a> <a id="1058" href="Cubical.Foundations.Pointed.Base.html#441" class="Function">Pointed</a> <a id="1066" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#937" class="Bound">ℓ</a> <a id="1068" href="Cubical.Core.Primitives.html#6245" class="Function">]</a> <a id="1070" class="Symbol">(</a><a id="1071" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a> <a id="1073" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1075" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1015" class="Function">a</a><a id="1076" class="Symbol">)</a> <a id="1078" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1080" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1053" class="Bound">B∙</a>
  <a id="1085" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1028" class="Function">toEquivPtd</a> <a id="1096" class="Symbol">=</a> <a id="1098" href="Cubical.HITs.PropositionalTruncation.Properties.html#834" class="Function">rec</a> <a id="1102" href="Cubical.Foundations.Prelude.html#20400" class="Function">isPropSingl</a> <a id="1114" class="Symbol">(λ</a> <a id="1117" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1117" class="Bound">x</a> <a id="1119" class="Symbol">→</a> <a id="1121" class="Symbol">(</a><a id="1122" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a> <a id="1124" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1126" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1117" class="Bound">x</a><a id="1127" class="Symbol">)</a> <a id="1129" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1131" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#958" class="Bound">h</a> <a id="1133" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1117" class="Bound">x</a><a id="1134" class="Symbol">)</a>
  <a id="1138" class="Keyword">private</a>
    <a id="Recover.B∙"></a><a id="1150" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1150" class="Function">B∙</a> <a id="1153" class="Symbol">:</a> <a id="1155" href="Cubical.HITs.PropositionalTruncation.Base.html#226" class="Datatype Operator">∥</a> <a id="1157" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a> <a id="1159" href="Cubical.HITs.PropositionalTruncation.Base.html#226" class="Datatype Operator">∥₁</a> <a id="1162" class="Symbol">→</a> <a id="1164" href="Cubical.Foundations.Pointed.Base.html#441" class="Function">Pointed</a> <a id="1172" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#937" class="Bound">ℓ</a>
    <a id="1178" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1150" class="Function">B∙</a> <a id="1181" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1181" class="Bound">tx</a> <a id="1184" class="Symbol">=</a> <a id="1186" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="1190" class="Symbol">(</a><a id="1191" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1028" class="Function">toEquivPtd</a> <a id="1202" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1181" class="Bound">tx</a><a id="1204" class="Symbol">)</a>

  <a id="1209" class="Comment">-- the key observation is that B∙ ∣ x ∣₁ is definitionally equal to (A , x)</a>
  <a id="1287" class="Keyword">private</a>
    <a id="Recover.obvs"></a><a id="1299" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1299" class="Function">obvs</a> <a id="1304" class="Symbol">:</a> <a id="1306" class="Symbol">∀</a> <a id="1308" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1308" class="Bound">x</a> <a id="1310" class="Symbol">→</a> <a id="1312" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1150" class="Function">B∙</a> <a id="1315" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣</a> <a id="1317" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1308" class="Bound">x</a> <a id="1319" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣₁</a> <a id="1322" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1324" class="Symbol">(</a><a id="1325" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a> <a id="1327" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1329" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1308" class="Bound">x</a><a id="1330" class="Symbol">)</a>
    <a id="1336" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1299" class="Function">obvs</a> <a id="1341" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1341" class="Bound">x</a> <a id="1343" class="Symbol">=</a> <a id="1345" href="Cubical.Foundations.Prelude.html#892" class="Function">refl</a> <a id="1350" class="Comment">-- try it: `C-c C-n B∙ ∣ x ∣₁` gives `(A , x)`</a>

  <a id="1400" class="Comment">-- thus any truncated element (of a homogeneous type) can be recovered by agda&#39;s normalizer!</a>

  <a id="Recover.recover"></a><a id="1496" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1496" class="Function">recover</a> <a id="1504" class="Symbol">:</a> <a id="1506" class="Symbol">∀</a> <a id="1508" class="Symbol">(</a><a id="1509" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1509" class="Bound">tx</a> <a id="1512" class="Symbol">:</a> <a id="1514" href="Cubical.HITs.PropositionalTruncation.Base.html#226" class="Datatype Operator">∥</a> <a id="1516" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a> <a id="1518" href="Cubical.HITs.PropositionalTruncation.Base.html#226" class="Datatype Operator">∥₁</a><a id="1520" class="Symbol">)</a> <a id="1522" class="Symbol">→</a> <a id="1524" href="Cubical.Foundations.Structure.html#1009" class="Function">typ</a> <a id="1528" class="Symbol">(</a><a id="1529" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1150" class="Function">B∙</a> <a id="1532" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1509" class="Bound">tx</a><a id="1534" class="Symbol">)</a>
  <a id="1538" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1496" class="Function">recover</a> <a id="1546" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1546" class="Bound">tx</a> <a id="1549" class="Symbol">=</a> <a id="1551" href="Cubical.Foundations.Pointed.Base.html#517" class="Function">pt</a> <a id="1554" class="Symbol">(</a><a id="1555" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1150" class="Function">B∙</a> <a id="1558" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1546" class="Bound">tx</a><a id="1560" class="Symbol">)</a>

  <a id="Recover.recover∣∣"></a><a id="1565" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1565" class="Function">recover∣∣</a> <a id="1575" class="Symbol">:</a> <a id="1577" class="Symbol">∀</a> <a id="1579" class="Symbol">(</a><a id="1580" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1580" class="Bound">x</a> <a id="1582" class="Symbol">:</a> <a id="1584" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a><a id="1585" class="Symbol">)</a> <a id="1587" class="Symbol">→</a> <a id="1589" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1496" class="Function">recover</a> <a id="1597" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣</a> <a id="1599" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1580" class="Bound">x</a> <a id="1601" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣₁</a> <a id="1604" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1606" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1580" class="Bound">x</a>
  <a id="1610" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1565" class="Function">recover∣∣</a> <a id="1620" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1620" class="Bound">x</a> <a id="1622" class="Symbol">=</a> <a id="1624" href="Cubical.Foundations.Prelude.html#892" class="Function">refl</a> <a id="1629" class="Comment">-- try it: `C-c C-n recover ∣ x ∣₁` gives `x`</a>

  <a id="1678" class="Keyword">private</a>
    <a id="1690" class="Comment">-- notice that the following typechecks because typ (B∙ ∣ x ∣₁) is definitionally equal to to A, but</a>
    <a id="1795" class="Comment">--  `recover : ∥ A ∥₁ → A` does not because typ (B∙ tx) is not definitionally equal to A (though it is</a>
    <a id="1902" class="Comment">--  judegmentally equal to A by cong typ (snd (toEquivPtd tx)) : A ≡ typ (B∙ tx))</a>
    <a id="Recover.obvs2"></a><a id="1988" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1988" class="Function">obvs2</a> <a id="1994" class="Symbol">:</a> <a id="1996" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a> <a id="1998" class="Symbol">→</a> <a id="2000" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1000" class="Function">A</a>
    <a id="2006" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1988" class="Function">obvs2</a> <a id="2012" class="Symbol">=</a> <a id="2014" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1496" class="Function">recover</a> <a id="2022" href="Cubical.Foundations.Function.html#898" class="Function Operator">∘</a> <a id="2024" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣_∣₁</a>

    <a id="2034" class="Comment">-- one might wonder if (cong recover (squash₁ ∣ x ∣₁ ∣ y ∣₁)) therefore has type x ≡ y, but thankfully</a>
    <a id="2141" class="Comment">--  typ (B∙ (squash₁ ∣ x ∣₁ ∣ y ∣₁ i)) is *not* A (it&#39;s a messy hcomp involving h x and h y)</a>
    <a id="Recover.recover-squash₁"></a><a id="2238" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2238" class="Function">recover-squash₁</a> <a id="2254" class="Symbol">:</a> <a id="2256" class="Symbol">∀</a> <a id="2258" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2258" class="Bound">x</a> <a id="2260" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2260" class="Bound">y</a> <a id="2262" class="Symbol">→</a> <a id="2264" class="Comment">-- x ≡ y -- this raises an error</a>
                             <a id="2326" href="Agda.Primitive.Cubical.html#2013" class="Postulate">PathP</a> <a id="2332" class="Symbol">(λ</a> <a id="2335" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2335" class="Bound">i</a> <a id="2337" class="Symbol">→</a> <a id="2339" href="Cubical.Foundations.Structure.html#1009" class="Function">typ</a> <a id="2343" class="Symbol">(</a><a id="2344" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1150" class="Function">B∙</a> <a id="2347" class="Symbol">(</a><a id="2348" href="Cubical.HITs.PropositionalTruncation.Base.html#285" class="InductiveConstructor">squash₁</a> <a id="2356" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣</a> <a id="2358" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2258" class="Bound">x</a> <a id="2360" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣₁</a> <a id="2363" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣</a> <a id="2365" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2260" class="Bound">y</a> <a id="2367" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣₁</a> <a id="2370" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2335" class="Bound">i</a><a id="2371" class="Symbol">)))</a> <a id="2375" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2258" class="Bound">x</a> <a id="2377" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2260" class="Bound">y</a>
    <a id="2383" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2238" class="Function">recover-squash₁</a> <a id="2399" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2399" class="Bound">x</a> <a id="2401" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2401" class="Bound">y</a> <a id="2403" class="Symbol">=</a> <a id="2405" href="Cubical.Foundations.Prelude.html#1407" class="Function">cong</a> <a id="2410" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1496" class="Function">recover</a> <a id="2418" class="Symbol">(</a><a id="2419" href="Cubical.HITs.PropositionalTruncation.Base.html#285" class="InductiveConstructor">squash₁</a> <a id="2427" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣</a> <a id="2429" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2399" class="Bound">x</a> <a id="2431" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣₁</a> <a id="2434" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣</a> <a id="2436" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2401" class="Bound">y</a> <a id="2438" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣₁</a><a id="2440" class="Symbol">)</a>


<a id="2444" class="Comment">-- Demo, adapted from:</a>
<a id="2467" class="Comment">-- https://bitbucket.org/nicolaikraus/agda/src/e30d70c72c6af8e62b72eefabcc57623dd921f04/trunc-inverse.lagda</a>

<a id="2576" class="Keyword">private</a>
  <a id="2586" class="Keyword">open</a> <a id="2591" class="Keyword">import</a> <a id="2598" href="Cubical.Data.Nat.html" class="Module">Cubical.Data.Nat</a>
  <a id="2617" class="Keyword">open</a> <a id="2622" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#928" class="Module">Recover</a> <a id="2630" class="Symbol">(</a><a id="2631" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2633" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2635" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="2639" class="Symbol">)</a> <a id="2641" class="Symbol">(</a><a id="2642" href="Cubical.Foundations.Pointed.Homogeneous.html#8887" class="Function">isHomogeneousDiscrete</a> <a id="2664" href="Cubical.Data.Nat.Properties.html#3507" class="Function">discreteℕ</a><a id="2673" class="Symbol">)</a>

  <a id="2678" class="Comment">-- only `∣hidden∣` is exported, `hidden` is no longer in scope</a>
  <a id="2743" class="Keyword">module</a> <a id="2750" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2750" class="Module">_</a> <a id="2752" class="Keyword">where</a>
    <a id="2762" class="Keyword">private</a>
      <a id="2776" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2776" class="Function">hidden</a> <a id="2783" class="Symbol">:</a> <a id="2785" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
      <a id="2793" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2776" class="Function">hidden</a> <a id="2800" class="Symbol">=</a> <a id="2802" class="Number">17</a>

    <a id="2810" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2810" class="Function">∣hidden∣</a> <a id="2819" class="Symbol">:</a> <a id="2821" href="Cubical.HITs.PropositionalTruncation.Base.html#226" class="Datatype Operator">∥</a> <a id="2823" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2825" href="Cubical.HITs.PropositionalTruncation.Base.html#226" class="Datatype Operator">∥₁</a>
    <a id="2832" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2810" class="Function">∣hidden∣</a> <a id="2841" class="Symbol">=</a> <a id="2843" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣</a> <a id="2845" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2776" class="Function">hidden</a> <a id="2852" href="Cubical.HITs.PropositionalTruncation.Base.html#265" class="InductiveConstructor Operator">∣₁</a>

  <a id="2858" class="Comment">-- we can still recover the value, even though agda can no longer see `hidden`!</a>
  <a id="test"></a><a id="2940" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2940" class="Function">test</a> <a id="2945" class="Symbol">:</a> <a id="2947" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1496" class="Function">recover</a> <a id="2955" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2810" class="Function">∣hidden∣</a> <a id="2964" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="2966" class="Number">17</a>
  <a id="2971" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2940" class="Function">test</a> <a id="2976" class="Symbol">=</a> <a id="2978" href="Cubical.Foundations.Prelude.html#892" class="Function">refl</a> <a id="2983" class="Comment">-- try it: `C-c C-n recover ∣hidden∣` gives `17`</a>
              <a id="3046" class="Comment">--         `C-c C-n hidden` gives an error</a>

  <a id="3092" class="Comment">-- Finally, note that the definition of recover is independent of the proof that A is homogeneous. Thus we</a>
  <a id="3201" class="Comment">--  still can definitionally recover information hidden by ∣_∣₁ as long as we permit holes. Try replacing</a>
  <a id="3309" class="Comment">--  `isHomogeneousDiscrete discreteℕ` above with a hole (`?`) and notice that everything still works</a>
</pre></body></html>