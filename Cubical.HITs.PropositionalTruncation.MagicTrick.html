<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.HITs.PropositionalTruncation.MagicTrick</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-

Based on Nicolai Kraus&#39; blog post:
  The Truncation Map |_| : ℕ -&gt; ‖ℕ‖ is nearly Invertible
  https://homotopytypetheory.org/2013/10/28/the-truncation-map-_-ℕ-‖ℕ‖-is-nearly-invertible/

Defines [recover], which definitionally satisfies `recover ∣ x ∣ ≡ x` ([recover∣∣]) for homogeneous types

Also see the follow-up post by Jason Gross:
  Composition is not what you think it is! Why “nearly invertible” isn’t.
  https://homotopytypetheory.org/2014/02/24/composition-is-not-what-you-think-it-is-why-nearly-invertible-isnt/

-}</a>
<a id="532" class="Symbol">{-#</a> <a id="536" class="Keyword">OPTIONS</a> <a id="544" class="Pragma">--safe</a> <a id="551" class="Symbol">#-}</a>

<a id="556" class="Keyword">module</a> <a id="563" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html" class="Module">Cubical.HITs.PropositionalTruncation.MagicTrick</a> <a id="611" class="Keyword">where</a>

<a id="618" class="Keyword">open</a> <a id="623" class="Keyword">import</a> <a id="630" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>
<a id="658" class="Keyword">open</a> <a id="663" class="Keyword">import</a> <a id="670" href="Cubical.Foundations.Function.html" class="Module">Cubical.Foundations.Function</a>
<a id="699" class="Keyword">open</a> <a id="704" class="Keyword">import</a> <a id="711" href="Cubical.Foundations.Path.html" class="Module">Cubical.Foundations.Path</a>
<a id="736" class="Keyword">open</a> <a id="741" class="Keyword">import</a> <a id="748" href="Cubical.Foundations.Pointed.html" class="Module">Cubical.Foundations.Pointed</a>
<a id="776" class="Keyword">open</a> <a id="781" class="Keyword">import</a> <a id="788" href="Cubical.Foundations.Pointed.Homogeneous.html" class="Module">Cubical.Foundations.Pointed.Homogeneous</a>

<a id="829" class="Keyword">open</a> <a id="834" class="Keyword">import</a> <a id="841" href="Cubical.HITs.PropositionalTruncation.Base.html" class="Module">Cubical.HITs.PropositionalTruncation.Base</a>
<a id="883" class="Keyword">open</a> <a id="888" class="Keyword">import</a> <a id="895" href="Cubical.HITs.PropositionalTruncation.Properties.html" class="Module">Cubical.HITs.PropositionalTruncation.Properties</a>

<a id="944" class="Keyword">module</a> <a id="Recover"></a><a id="951" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#951" class="Module">Recover</a> <a id="959" class="Symbol">{</a><a id="960" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#960" class="Bound">ℓ</a><a id="961" class="Symbol">}</a> <a id="963" class="Symbol">(</a><a id="964" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#964" class="Bound">A∙</a> <a id="967" class="Symbol">:</a> <a id="969" href="Cubical.Foundations.Pointed.Base.html#464" class="Function">Pointed</a> <a id="977" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#960" class="Bound">ℓ</a><a id="978" class="Symbol">)</a> <a id="980" class="Symbol">(</a><a id="981" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#981" class="Bound">h</a> <a id="983" class="Symbol">:</a> <a id="985" href="Cubical.Foundations.Pointed.Homogeneous.html#1390" class="Function">isHomogeneous</a> <a id="999" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#964" class="Bound">A∙</a><a id="1001" class="Symbol">)</a> <a id="1003" class="Keyword">where</a>
  <a id="1011" class="Keyword">private</a>
    <a id="Recover.A"></a><a id="1023" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1025" class="Symbol">=</a> <a id="1027" href="Cubical.Foundations.Structure.html#514" class="Function">typ</a> <a id="1031" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#964" class="Bound">A∙</a>
    <a id="Recover.a"></a><a id="1038" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1038" class="Function">a</a> <a id="1040" class="Symbol">=</a> <a id="1042" href="Cubical.Foundations.Pointed.Base.html#540" class="Function">pt</a> <a id="1045" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#964" class="Bound">A∙</a>

  <a id="Recover.toEquivPtd"></a><a id="1051" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1051" class="Function">toEquivPtd</a> <a id="1062" class="Symbol">:</a> <a id="1064" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="1066" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1068" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥₁</a> <a id="1071" class="Symbol">→</a> <a id="1073" href="Cubical.Core.Primitives.html#6306" class="Function">Σ[</a> <a id="1076" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1076" class="Bound">B∙</a> <a id="1079" href="Cubical.Core.Primitives.html#6306" class="Function">∈</a> <a id="1081" href="Cubical.Foundations.Pointed.Base.html#464" class="Function">Pointed</a> <a id="1089" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#960" class="Bound">ℓ</a> <a id="1091" href="Cubical.Core.Primitives.html#6306" class="Function">]</a> <a id="1093" class="Symbol">(</a><a id="1094" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1096" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1098" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1038" class="Function">a</a><a id="1099" class="Symbol">)</a> <a id="1101" href="Agda.Builtin.Cubical.Path.html#388" class="Function Operator">≡</a> <a id="1103" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1076" class="Bound">B∙</a>
  <a id="1108" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1051" class="Function">toEquivPtd</a> <a id="1119" class="Symbol">=</a> <a id="1121" href="Cubical.HITs.PropositionalTruncation.Properties.html#894" class="Function">rec</a> <a id="1125" href="Cubical.Foundations.Prelude.html#18884" class="Function">isPropSingl</a> <a id="1137" class="Symbol">(λ</a> <a id="1140" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1140" class="Bound">x</a> <a id="1142" class="Symbol">→</a> <a id="1144" class="Symbol">(</a><a id="1145" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1147" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1149" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1140" class="Bound">x</a><a id="1150" class="Symbol">)</a> <a id="1152" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1154" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#981" class="Bound">h</a> <a id="1156" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1140" class="Bound">x</a><a id="1157" class="Symbol">)</a>
  <a id="1161" class="Keyword">private</a>
    <a id="Recover.B∙"></a><a id="1173" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1173" class="Function">B∙</a> <a id="1176" class="Symbol">:</a> <a id="1178" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="1180" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1182" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥₁</a> <a id="1185" class="Symbol">→</a> <a id="1187" href="Cubical.Foundations.Pointed.Base.html#464" class="Function">Pointed</a> <a id="1195" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#960" class="Bound">ℓ</a>
    <a id="1201" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1173" class="Function">B∙</a> <a id="1204" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1204" class="Bound">tx</a> <a id="1207" class="Symbol">=</a> <a id="1209" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1213" class="Symbol">(</a><a id="1214" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1051" class="Function">toEquivPtd</a> <a id="1225" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1204" class="Bound">tx</a><a id="1227" class="Symbol">)</a>

  <a id="1232" class="Comment">-- the key observation is that B∙ ∣ x ∣₁ is definitionally equal to (A , x)</a>
  <a id="1310" class="Keyword">private</a>
    <a id="Recover.obvs"></a><a id="1322" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1322" class="Function">obvs</a> <a id="1327" class="Symbol">:</a> <a id="1329" class="Symbol">∀</a> <a id="1331" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1331" class="Bound">x</a> <a id="1333" class="Symbol">→</a> <a id="1335" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1173" class="Function">B∙</a> <a id="1338" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣</a> <a id="1340" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1331" class="Bound">x</a> <a id="1342" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣₁</a> <a id="1345" href="Agda.Builtin.Cubical.Path.html#388" class="Function Operator">≡</a> <a id="1347" class="Symbol">(</a><a id="1348" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1350" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1352" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1331" class="Bound">x</a><a id="1353" class="Symbol">)</a>
    <a id="1359" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1322" class="Function">obvs</a> <a id="1364" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1364" class="Bound">x</a> <a id="1366" class="Symbol">=</a> <a id="1368" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a> <a id="1373" class="Comment">-- try it: `C-c C-n B∙ ∣ x ∣₁` gives `(A , x)`</a>

  <a id="1423" class="Comment">-- thus any truncated element (of a homogeneous type) can be recovered by agda&#39;s normalizer!</a>

  <a id="Recover.recover"></a><a id="1519" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1519" class="Function">recover</a> <a id="1527" class="Symbol">:</a> <a id="1529" class="Symbol">∀</a> <a id="1531" class="Symbol">(</a><a id="1532" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1532" class="Bound">tx</a> <a id="1535" class="Symbol">:</a> <a id="1537" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="1539" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1541" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥₁</a><a id="1543" class="Symbol">)</a> <a id="1545" class="Symbol">→</a> <a id="1547" href="Cubical.Foundations.Structure.html#514" class="Function">typ</a> <a id="1551" class="Symbol">(</a><a id="1552" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1173" class="Function">B∙</a> <a id="1555" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1532" class="Bound">tx</a><a id="1557" class="Symbol">)</a>
  <a id="1561" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1519" class="Function">recover</a> <a id="1569" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1569" class="Bound">tx</a> <a id="1572" class="Symbol">=</a> <a id="1574" href="Cubical.Foundations.Pointed.Base.html#540" class="Function">pt</a> <a id="1577" class="Symbol">(</a><a id="1578" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1173" class="Function">B∙</a> <a id="1581" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1569" class="Bound">tx</a><a id="1583" class="Symbol">)</a>

  <a id="Recover.recover∣∣"></a><a id="1588" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1588" class="Function">recover∣∣</a> <a id="1598" class="Symbol">:</a> <a id="1600" class="Symbol">∀</a> <a id="1602" class="Symbol">(</a><a id="1603" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1603" class="Bound">x</a> <a id="1605" class="Symbol">:</a> <a id="1607" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a><a id="1608" class="Symbol">)</a> <a id="1610" class="Symbol">→</a> <a id="1612" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1519" class="Function">recover</a> <a id="1620" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣</a> <a id="1622" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1603" class="Bound">x</a> <a id="1624" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣₁</a> <a id="1627" href="Agda.Builtin.Cubical.Path.html#388" class="Function Operator">≡</a> <a id="1629" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1603" class="Bound">x</a>
  <a id="1633" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1588" class="Function">recover∣∣</a> <a id="1643" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1643" class="Bound">x</a> <a id="1645" class="Symbol">=</a> <a id="1647" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a> <a id="1652" class="Comment">-- try it: `C-c C-n recover ∣ x ∣₁` gives `x`</a>

  <a id="1701" class="Keyword">private</a>
    <a id="1713" class="Comment">-- notice that the following typechecks because typ (B∙ ∣ x ∣₁) is definitionally equal to to A, but</a>
    <a id="1818" class="Comment">--  `recover : ∥ A ∥₁ → A` does not because typ (B∙ tx) is not definitionally equal to A (though it is</a>
    <a id="1925" class="Comment">--  judegmentally equal to A by cong typ (snd (toEquivPtd tx)) : A ≡ typ (B∙ tx))</a>
    <a id="Recover.obvs2"></a><a id="2011" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2011" class="Function">obvs2</a> <a id="2017" class="Symbol">:</a> <a id="2019" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="2021" class="Symbol">→</a> <a id="2023" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a>
    <a id="2029" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2011" class="Function">obvs2</a> <a id="2035" class="Symbol">=</a> <a id="2037" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1519" class="Function">recover</a> <a id="2045" href="Cubical.Foundations.Function.html#526" class="Function Operator">∘</a> <a id="2047" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣_∣₁</a>

    <a id="2057" class="Comment">-- one might wonder if (cong recover (squash₁ ∣ x ∣₁ ∣ y ∣₁)) therefore has type x ≡ y, but thankfully</a>
    <a id="2164" class="Comment">--  typ (B∙ (squash₁ ∣ x ∣₁ ∣ y ∣₁ i)) is *not* A (it&#39;s a messy hcomp involving h x and h y)</a>
    <a id="Recover.recover-squash₁"></a><a id="2261" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2261" class="Function">recover-squash₁</a> <a id="2277" class="Symbol">:</a> <a id="2279" class="Symbol">∀</a> <a id="2281" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2281" class="Bound">x</a> <a id="2283" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2283" class="Bound">y</a> <a id="2285" class="Symbol">→</a> <a id="2287" class="Comment">-- x ≡ y -- this raises an error</a>
                             <a id="2349" href="Agda.Builtin.Cubical.Path.html#197" class="Postulate">PathP</a> <a id="2355" class="Symbol">(λ</a> <a id="2358" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2358" class="Bound">i</a> <a id="2360" class="Symbol">→</a> <a id="2362" href="Cubical.Foundations.Structure.html#514" class="Function">typ</a> <a id="2366" class="Symbol">(</a><a id="2367" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1173" class="Function">B∙</a> <a id="2370" class="Symbol">(</a><a id="2371" href="Cubical.HITs.PropositionalTruncation.Base.html#308" class="InductiveConstructor">squash₁</a> <a id="2379" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣</a> <a id="2381" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2281" class="Bound">x</a> <a id="2383" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣₁</a> <a id="2386" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣</a> <a id="2388" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2283" class="Bound">y</a> <a id="2390" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣₁</a> <a id="2393" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2358" class="Bound">i</a><a id="2394" class="Symbol">)))</a> <a id="2398" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2281" class="Bound">x</a> <a id="2400" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2283" class="Bound">y</a>
    <a id="2406" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2261" class="Function">recover-squash₁</a> <a id="2422" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2422" class="Bound">x</a> <a id="2424" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2424" class="Bound">y</a> <a id="2426" class="Symbol">=</a> <a id="2428" href="Cubical.Foundations.Prelude.html#1430" class="Function">cong</a> <a id="2433" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1519" class="Function">recover</a> <a id="2441" class="Symbol">(</a><a id="2442" href="Cubical.HITs.PropositionalTruncation.Base.html#308" class="InductiveConstructor">squash₁</a> <a id="2450" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣</a> <a id="2452" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2422" class="Bound">x</a> <a id="2454" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣₁</a> <a id="2457" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣</a> <a id="2459" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2424" class="Bound">y</a> <a id="2461" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣₁</a><a id="2463" class="Symbol">)</a>


<a id="2467" class="Comment">-- Demo, adapted from:</a>
<a id="2490" class="Comment">-- https://bitbucket.org/nicolaikraus/agda/src/e30d70c72c6af8e62b72eefabcc57623dd921f04/trunc-inverse.lagda</a>

<a id="2599" class="Keyword">private</a>
  <a id="2609" class="Keyword">open</a> <a id="2614" class="Keyword">import</a> <a id="2621" href="Cubical.Data.Nat.html" class="Module">Cubical.Data.Nat</a>
  <a id="2640" class="Keyword">open</a> <a id="2645" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#951" class="Module">Recover</a> <a id="2653" class="Symbol">(</a><a id="2654" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2656" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2658" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="2662" class="Symbol">)</a> <a id="2664" class="Symbol">(</a><a id="2665" href="Cubical.Foundations.Pointed.Homogeneous.html#8577" class="Function">isHomogeneousDiscrete</a> <a id="2687" href="Cubical.Data.Nat.Properties.html#3401" class="Function">discreteℕ</a><a id="2696" class="Symbol">)</a>

  <a id="2701" class="Comment">-- only `∣hidden∣` is exported, `hidden` is no longer in scope</a>
  <a id="2766" class="Keyword">module</a> <a id="2773" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2773" class="Module">_</a> <a id="2775" class="Keyword">where</a>
    <a id="2785" class="Keyword">private</a>
      <a id="2799" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2799" class="Function">hidden</a> <a id="2806" class="Symbol">:</a> <a id="2808" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
      <a id="2816" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2799" class="Function">hidden</a> <a id="2823" class="Symbol">=</a> <a id="2825" class="Number">17</a>

    <a id="2833" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2833" class="Function">∣hidden∣</a> <a id="2842" class="Symbol">:</a> <a id="2844" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="2846" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2848" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥₁</a>
    <a id="2855" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2833" class="Function">∣hidden∣</a> <a id="2864" class="Symbol">=</a> <a id="2866" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣</a> <a id="2868" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2799" class="Function">hidden</a> <a id="2875" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣₁</a>

  <a id="2881" class="Comment">-- we can still recover the value, even though agda can no longer see `hidden`!</a>
  <a id="test"></a><a id="2963" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2963" class="Function">test</a> <a id="2968" class="Symbol">:</a> <a id="2970" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1519" class="Function">recover</a> <a id="2978" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2833" class="Function">∣hidden∣</a> <a id="2987" href="Agda.Builtin.Cubical.Path.html#388" class="Function Operator">≡</a> <a id="2989" class="Number">17</a>
  <a id="2994" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2963" class="Function">test</a> <a id="2999" class="Symbol">=</a> <a id="3001" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a> <a id="3006" class="Comment">-- try it: `C-c C-n recover ∣hidden∣` gives `17`</a>
              <a id="3069" class="Comment">--         `C-c C-n hidden` gives an error</a>

  <a id="3115" class="Comment">-- Finally, note that the definition of recover is independent of the proof that A is homogeneous. Thus we</a>
  <a id="3224" class="Comment">--  still can definitionally recover information hidden by ∣_∣₁ as long as we permit holes. Try replacing</a>
  <a id="3332" class="Comment">--  `isHomogeneousDiscrete discreteℕ` above with a hole (`?`) and notice that everything still works</a>
</pre></body></html>