<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.HITs.PropositionalTruncation.MagicTrick</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-

Based on Nicolai Kraus&#39; blog post:
  The Truncation Map |_| : ℕ -&gt; ‖ℕ‖ is nearly Invertible
  https://homotopytypetheory.org/2013/10/28/the-truncation-map-_-ℕ-‖ℕ‖-is-nearly-invertible/

Defines [recover], which definitionally satisfies `recover ∣ x ∣ ≡ x` ([recover∣∣]) for homogeneous types

Also see the follow-up post by Jason Gross:
  Composition is not what you think it is! Why “nearly invertible” isn’t.
  https://homotopytypetheory.org/2014/02/24/composition-is-not-what-you-think-it-is-why-nearly-invertible-isnt/

-}</a>
<a id="532" class="Symbol">{-#</a> <a id="536" class="Keyword">OPTIONS</a> <a id="544" class="Pragma">--safe</a> <a id="551" class="Symbol">#-}</a>

<a id="556" class="Keyword">module</a> <a id="563" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html" class="Module">Cubical.HITs.PropositionalTruncation.MagicTrick</a> <a id="611" class="Keyword">where</a>

<a id="618" class="Keyword">open</a> <a id="623" class="Keyword">import</a> <a id="630" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>
<a id="658" class="Keyword">open</a> <a id="663" class="Keyword">import</a> <a id="670" href="Cubical.Foundations.Function.html" class="Module">Cubical.Foundations.Function</a>
<a id="699" class="Keyword">open</a> <a id="704" class="Keyword">import</a> <a id="711" href="Cubical.Foundations.Path.html" class="Module">Cubical.Foundations.Path</a>
<a id="736" class="Keyword">open</a> <a id="741" class="Keyword">import</a> <a id="748" href="Cubical.Foundations.Pointed.html" class="Module">Cubical.Foundations.Pointed</a>
<a id="776" class="Keyword">open</a> <a id="781" class="Keyword">import</a> <a id="788" href="Cubical.Foundations.Pointed.Homogeneous.html" class="Module">Cubical.Foundations.Pointed.Homogeneous</a>

<a id="829" class="Keyword">open</a> <a id="834" class="Keyword">import</a> <a id="841" href="Cubical.HITs.PropositionalTruncation.Base.html" class="Module">Cubical.HITs.PropositionalTruncation.Base</a>
<a id="883" class="Keyword">open</a> <a id="888" class="Keyword">import</a> <a id="895" href="Cubical.HITs.PropositionalTruncation.Properties.html" class="Module">Cubical.HITs.PropositionalTruncation.Properties</a>

<a id="944" class="Keyword">module</a> <a id="Recover"></a><a id="951" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#951" class="Module">Recover</a> <a id="959" class="Symbol">{</a><a id="960" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#960" class="Bound">ℓ</a><a id="961" class="Symbol">}</a> <a id="963" class="Symbol">(</a><a id="964" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#964" class="Bound">A∙</a> <a id="967" class="Symbol">:</a> <a id="969" href="Cubical.Foundations.Pointed.Base.html#427" class="Function">Pointed</a> <a id="977" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#960" class="Bound">ℓ</a><a id="978" class="Symbol">)</a> <a id="980" class="Symbol">(</a><a id="981" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#981" class="Bound">h</a> <a id="983" class="Symbol">:</a> <a id="985" href="Cubical.Foundations.Pointed.Homogeneous.html#855" class="Function">isHomogeneous</a> <a id="999" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#964" class="Bound">A∙</a><a id="1001" class="Symbol">)</a> <a id="1003" class="Keyword">where</a>
  <a id="1011" class="Keyword">private</a>
    <a id="Recover.A"></a><a id="1023" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1025" class="Symbol">=</a> <a id="1027" href="Cubical.Foundations.Structure.html#544" class="Function">typ</a> <a id="1031" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#964" class="Bound">A∙</a>
    <a id="Recover.a"></a><a id="1038" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1038" class="Function">a</a> <a id="1040" class="Symbol">=</a> <a id="1042" href="Cubical.Foundations.Pointed.Base.html#503" class="Function">pt</a> <a id="1045" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#964" class="Bound">A∙</a>

  <a id="Recover.toEquivPtd"></a><a id="1051" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1051" class="Function">toEquivPtd</a> <a id="1062" class="Symbol">:</a> <a id="1064" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="1066" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1068" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="1070" class="Symbol">→</a> <a id="1072" href="Cubical.Core.Primitives.html#6274" class="Function">Σ[</a> <a id="1075" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1075" class="Bound">B∙</a> <a id="1078" href="Cubical.Core.Primitives.html#6274" class="Function">∈</a> <a id="1080" href="Cubical.Foundations.Pointed.Base.html#427" class="Function">Pointed</a> <a id="1088" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#960" class="Bound">ℓ</a> <a id="1090" href="Cubical.Core.Primitives.html#6274" class="Function">]</a> <a id="1092" class="Symbol">(</a><a id="1093" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1095" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1097" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1038" class="Function">a</a><a id="1098" class="Symbol">)</a> <a id="1100" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="1102" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1075" class="Bound">B∙</a>
  <a id="1107" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1051" class="Function">toEquivPtd</a> <a id="1118" class="Symbol">=</a> <a id="1120" href="Cubical.HITs.PropositionalTruncation.Properties.html#782" class="Function">rec</a> <a id="1124" href="Cubical.Foundations.Prelude.html#16295" class="Function">isPropSingl</a> <a id="1136" class="Symbol">(λ</a> <a id="1139" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1139" class="Bound">x</a> <a id="1141" class="Symbol">→</a> <a id="1143" class="Symbol">(</a><a id="1144" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1146" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1148" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1139" class="Bound">x</a><a id="1149" class="Symbol">)</a> <a id="1151" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1153" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#981" class="Bound">h</a> <a id="1155" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1139" class="Bound">x</a><a id="1156" class="Symbol">)</a>
  <a id="1160" class="Keyword">private</a>
    <a id="Recover.B∙"></a><a id="1172" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1172" class="Function">B∙</a> <a id="1175" class="Symbol">:</a> <a id="1177" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="1179" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1181" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="1183" class="Symbol">→</a> <a id="1185" href="Cubical.Foundations.Pointed.Base.html#427" class="Function">Pointed</a> <a id="1193" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#960" class="Bound">ℓ</a>
    <a id="1199" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1172" class="Function">B∙</a> <a id="1202" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1202" class="Bound">tx</a> <a id="1205" class="Symbol">=</a> <a id="1207" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1211" class="Symbol">(</a><a id="1212" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1051" class="Function">toEquivPtd</a> <a id="1223" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1202" class="Bound">tx</a><a id="1225" class="Symbol">)</a>

  <a id="1230" class="Comment">-- the key observation is that B∙ ∣ x ∣ is definitionally equal to (A , x)</a>
  <a id="1307" class="Keyword">private</a>
    <a id="Recover.obvs"></a><a id="1319" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1319" class="Function">obvs</a> <a id="1324" class="Symbol">:</a> <a id="1326" class="Symbol">∀</a> <a id="1328" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1328" class="Bound">x</a> <a id="1330" class="Symbol">→</a> <a id="1332" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1172" class="Function">B∙</a> <a id="1335" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="1337" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1328" class="Bound">x</a> <a id="1339" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="1341" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="1343" class="Symbol">(</a><a id="1344" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1346" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1348" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1328" class="Bound">x</a><a id="1349" class="Symbol">)</a>
    <a id="1355" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1319" class="Function">obvs</a> <a id="1360" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1360" class="Bound">x</a> <a id="1362" class="Symbol">=</a> <a id="1364" href="Cubical.Foundations.Prelude.html#889" class="Function">refl</a> <a id="1369" class="Comment">-- try it: `C-c C-n B∙ ∣ x ∣` gives `(A , x)`</a>

  <a id="1418" class="Comment">-- thus any truncated element (of a homogeneous type) can be recovered by agda&#39;s normalizer!</a>

  <a id="Recover.recover"></a><a id="1514" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1514" class="Function">recover</a> <a id="1522" class="Symbol">:</a> <a id="1524" class="Symbol">∀</a> <a id="1526" class="Symbol">(</a><a id="1527" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1527" class="Bound">tx</a> <a id="1530" class="Symbol">:</a> <a id="1532" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="1534" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="1536" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a><a id="1537" class="Symbol">)</a> <a id="1539" class="Symbol">→</a> <a id="1541" href="Cubical.Foundations.Structure.html#544" class="Function">typ</a> <a id="1545" class="Symbol">(</a><a id="1546" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1172" class="Function">B∙</a> <a id="1549" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1527" class="Bound">tx</a><a id="1551" class="Symbol">)</a>
  <a id="1555" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1514" class="Function">recover</a> <a id="1563" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1563" class="Bound">tx</a> <a id="1566" class="Symbol">=</a> <a id="1568" href="Cubical.Foundations.Pointed.Base.html#503" class="Function">pt</a> <a id="1571" class="Symbol">(</a><a id="1572" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1172" class="Function">B∙</a> <a id="1575" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1563" class="Bound">tx</a><a id="1577" class="Symbol">)</a>

  <a id="Recover.recover∣∣"></a><a id="1582" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1582" class="Function">recover∣∣</a> <a id="1592" class="Symbol">:</a> <a id="1594" class="Symbol">∀</a> <a id="1596" class="Symbol">(</a><a id="1597" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Bound">x</a> <a id="1599" class="Symbol">:</a> <a id="1601" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a><a id="1602" class="Symbol">)</a> <a id="1604" class="Symbol">→</a> <a id="1606" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1514" class="Function">recover</a> <a id="1614" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="1616" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Bound">x</a> <a id="1618" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="1620" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="1622" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Bound">x</a>
  <a id="1626" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1582" class="Function">recover∣∣</a> <a id="1636" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1636" class="Bound">x</a> <a id="1638" class="Symbol">=</a> <a id="1640" href="Cubical.Foundations.Prelude.html#889" class="Function">refl</a> <a id="1645" class="Comment">-- try it: `C-c C-n recover ∣ x ∣` gives `x`</a>

  <a id="1693" class="Keyword">private</a>
    <a id="1705" class="Comment">-- notice that the following typechecks because typ (B∙ ∣ x ∣) is definitionally equal to to A, but</a>
    <a id="1809" class="Comment">--  `recover : ∥ A ∥ → A` does not because typ (B∙ tx) is not definitionally equal to A (though it is</a>
    <a id="1915" class="Comment">--  judegmentally equal to A by cong typ (snd (toEquivPtd tx)) : A ≡ typ (B∙ tx))</a>
    <a id="Recover.obvs2"></a><a id="2001" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2001" class="Function">obvs2</a> <a id="2007" class="Symbol">:</a> <a id="2009" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a> <a id="2011" class="Symbol">→</a> <a id="2013" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1023" class="Function">A</a>
    <a id="2019" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2001" class="Function">obvs2</a> <a id="2025" class="Symbol">=</a> <a id="2027" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1514" class="Function">recover</a> <a id="2035" href="Cubical.Foundations.Function.html#526" class="Function Operator">∘</a> <a id="2037" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣_∣</a>

    <a id="2046" class="Comment">-- one might wonder if (cong recover (squash ∣ x ∣ ∣ y ∣)) therefore has type x ≡ y, but thankfully</a>
    <a id="2150" class="Comment">--  typ (B∙ (squash ∣ x ∣ ∣ y ∣ i)) is *not* A (it&#39;s a messy hcomp involving h x and h y)</a>
    <a id="Recover.recover-squash"></a><a id="2244" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2244" class="Function">recover-squash</a> <a id="2259" class="Symbol">:</a> <a id="2261" class="Symbol">∀</a> <a id="2263" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2263" class="Bound">x</a> <a id="2265" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2265" class="Bound">y</a> <a id="2267" class="Symbol">→</a> <a id="2269" class="Comment">-- x ≡ y -- this raises an error</a>
                             <a id="2331" href="Agda.Builtin.Cubical.Path.html#190" class="Postulate">PathP</a> <a id="2337" class="Symbol">(λ</a> <a id="2340" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2340" class="Bound">i</a> <a id="2342" class="Symbol">→</a> <a id="2344" href="Cubical.Foundations.Structure.html#544" class="Function">typ</a> <a id="2348" class="Symbol">(</a><a id="2349" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1172" class="Function">B∙</a> <a id="2352" class="Symbol">(</a><a id="2353" href="Cubical.HITs.PropositionalTruncation.Base.html#305" class="InductiveConstructor">squash</a> <a id="2360" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="2362" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2263" class="Bound">x</a> <a id="2364" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="2366" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="2368" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2265" class="Bound">y</a> <a id="2370" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="2372" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2340" class="Bound">i</a><a id="2373" class="Symbol">)))</a> <a id="2377" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2263" class="Bound">x</a> <a id="2379" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2265" class="Bound">y</a>
    <a id="2385" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2244" class="Function">recover-squash</a> <a id="2400" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2400" class="Bound">x</a> <a id="2402" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2402" class="Bound">y</a> <a id="2404" class="Symbol">=</a> <a id="2406" href="Cubical.Foundations.Prelude.html#1125" class="Function">cong</a> <a id="2411" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1514" class="Function">recover</a> <a id="2419" class="Symbol">(</a><a id="2420" href="Cubical.HITs.PropositionalTruncation.Base.html#305" class="InductiveConstructor">squash</a> <a id="2427" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="2429" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2400" class="Bound">x</a> <a id="2431" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="2433" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="2435" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2402" class="Bound">y</a> <a id="2437" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a><a id="2438" class="Symbol">)</a>


<a id="2442" class="Comment">-- Demo, adapted from:</a>
<a id="2465" class="Comment">-- https://bitbucket.org/nicolaikraus/agda/src/e30d70c72c6af8e62b72eefabcc57623dd921f04/trunc-inverse.lagda</a>

<a id="2574" class="Keyword">private</a>
  <a id="2584" class="Keyword">open</a> <a id="2589" class="Keyword">import</a> <a id="2596" href="Cubical.Data.Nat.html" class="Module">Cubical.Data.Nat</a>
  <a id="2615" class="Keyword">open</a> <a id="2620" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#951" class="Module">Recover</a> <a id="2628" class="Symbol">(</a><a id="2629" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2631" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2633" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="2637" class="Symbol">)</a> <a id="2639" class="Symbol">(</a><a id="2640" href="Cubical.Foundations.Pointed.Homogeneous.html#5612" class="Function">isHomogeneousDiscrete</a> <a id="2662" href="Cubical.Data.Nat.Properties.html#1122" class="Function">discreteℕ</a><a id="2671" class="Symbol">)</a>

  <a id="2676" class="Comment">-- only `∣hidden∣` is exported, `hidden` is no longer in scope</a>
  <a id="2741" class="Keyword">module</a> <a id="2748" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2748" class="Module">_</a> <a id="2750" class="Keyword">where</a>
    <a id="2760" class="Keyword">private</a>
      <a id="2774" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2774" class="Function">hidden</a> <a id="2781" class="Symbol">:</a> <a id="2783" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
      <a id="2791" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2774" class="Function">hidden</a> <a id="2798" class="Symbol">=</a> <a id="2800" class="Number">17</a>

    <a id="2808" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2808" class="Function">∣hidden∣</a> <a id="2817" class="Symbol">:</a> <a id="2819" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a> <a id="2821" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2823" href="Cubical.HITs.PropositionalTruncation.Base.html#249" class="Datatype Operator">∥</a>
    <a id="2829" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2808" class="Function">∣hidden∣</a> <a id="2838" class="Symbol">=</a> <a id="2840" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a> <a id="2842" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2774" class="Function">hidden</a> <a id="2849" href="Cubical.HITs.PropositionalTruncation.Base.html#287" class="InductiveConstructor Operator">∣</a>

  <a id="2854" class="Comment">-- we can still recover the value, even though agda can no longer see `hidden`!</a>
  <a id="test"></a><a id="2936" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2936" class="Function">test</a> <a id="2941" class="Symbol">:</a> <a id="2943" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1514" class="Function">recover</a> <a id="2951" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2808" class="Function">∣hidden∣</a> <a id="2960" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="2962" class="Number">17</a>
  <a id="2967" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2936" class="Function">test</a> <a id="2972" class="Symbol">=</a> <a id="2974" href="Cubical.Foundations.Prelude.html#889" class="Function">refl</a> <a id="2979" class="Comment">-- try it: `C-c C-n recover ∣hidden∣` gives `17`</a>
              <a id="3042" class="Comment">--         `C-c C-n hidden` gives an error</a>

  <a id="3088" class="Comment">-- Finally, note that the definition of recover is independent of the proof that A is homogeneous. Thus we</a>
  <a id="3197" class="Comment">--  still can definitionally recover information hidden by ∣_∣ as long as we permit holes. Try replacing</a>
  <a id="3304" class="Comment">--  `isHomogeneousDiscrete discreteℕ` above with a hole (`?`) and notice that everything still works</a>
</pre></body></html>