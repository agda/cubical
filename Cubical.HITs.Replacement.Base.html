<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.HITs.Replacement.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-

Type-theoretic replacement: a construction taking a map F : A → B where
  - A : Type ℓA
  - B : Type ℓB,
  - the identity types of B essentially have universe level ℓ≅B,
and producing an image of F with universe level (ℓ-max ℓA ℓ≅B).

See Axiom 18.1.8 in

Egbert Rijke
Introduction to Homotopy Theory
https://arxiv.org/abs/2212.11082

for a definition of type-theoretic replacement.

This module constructs the replacement using higher induction-recursion. It is
possible to construct the replacement with much less powerful HITs, for which
see

Egbert Rijke
The join construction
https://arxiv.org/abs/1701.07538

but higher IR allows for a particularly simple construction.

-}</a>
<a id="685" class="Symbol">{-#</a> <a id="689" class="Keyword">OPTIONS</a> <a id="697" class="Pragma">--safe</a> <a id="704" class="Symbol">#-}</a>
<a id="708" class="Keyword">module</a> <a id="715" href="Cubical.HITs.Replacement.Base.html" class="Module">Cubical.HITs.Replacement.Base</a> <a id="745" class="Keyword">where</a>

<a id="752" class="Keyword">open</a> <a id="757" class="Keyword">import</a> <a id="764" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>
<a id="792" class="Keyword">open</a> <a id="797" class="Keyword">import</a> <a id="804" href="Cubical.Foundations.HLevels.html" class="Module">Cubical.Foundations.HLevels</a>
<a id="832" class="Keyword">open</a> <a id="837" class="Keyword">import</a> <a id="844" href="Cubical.Functions.Embedding.html" class="Module">Cubical.Functions.Embedding</a>
<a id="872" class="Keyword">open</a> <a id="877" class="Keyword">import</a> <a id="884" href="Cubical.Functions.Image.html" class="Module">Cubical.Functions.Image</a>
<a id="908" class="Keyword">open</a> <a id="913" class="Keyword">import</a> <a id="920" href="Cubical.HITs.PropositionalTruncation.html" class="Module">Cubical.HITs.PropositionalTruncation</a> <a id="957" class="Symbol">as</a> <a id="960" class="Module">Prop</a>
<a id="965" class="Keyword">open</a> <a id="970" class="Keyword">import</a> <a id="977" href="Cubical.Foundations.Isomorphism.html" class="Module">Cubical.Foundations.Isomorphism</a>
<a id="1009" class="Keyword">open</a> <a id="1014" class="Keyword">import</a> <a id="1021" href="Cubical.Foundations.Equiv.html" class="Module">Cubical.Foundations.Equiv</a>
<a id="1047" class="Keyword">open</a> <a id="1052" class="Keyword">import</a> <a id="1059" href="Cubical.Functions.Surjection.html" class="Module">Cubical.Functions.Surjection</a>
<a id="1088" class="Keyword">open</a> <a id="1093" class="Keyword">import</a> <a id="1100" href="Cubical.Displayed.Base.html" class="Module">Cubical.Displayed.Base</a>

<a id="1124" class="Keyword">module</a> <a id="1131" href="Cubical.HITs.Replacement.Base.html#1131" class="Module">_</a> <a id="1133" class="Symbol">{</a><a id="1134" href="Cubical.HITs.Replacement.Base.html#1134" class="Bound">ℓA</a> <a id="1137" href="Cubical.HITs.Replacement.Base.html#1137" class="Bound">ℓB</a> <a id="1140" href="Cubical.HITs.Replacement.Base.html#1140" class="Bound">ℓ≅B</a><a id="1143" class="Symbol">}</a> <a id="1145" class="Symbol">{</a><a id="1146" href="Cubical.HITs.Replacement.Base.html#1146" class="Bound">A</a> <a id="1148" class="Symbol">:</a> <a id="1150" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1155" href="Cubical.HITs.Replacement.Base.html#1134" class="Bound">ℓA</a><a id="1157" class="Symbol">}</a> <a id="1159" class="Symbol">{</a><a id="1160" href="Cubical.HITs.Replacement.Base.html#1160" class="Bound">B</a> <a id="1162" class="Symbol">:</a> <a id="1164" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1169" href="Cubical.HITs.Replacement.Base.html#1137" class="Bound">ℓB</a><a id="1171" class="Symbol">}</a> <a id="1173" class="Symbol">(</a><a id="1174" href="Cubical.HITs.Replacement.Base.html#1174" class="Bound">𝒮-B</a> <a id="1178" class="Symbol">:</a> <a id="1180" href="Cubical.Displayed.Base.html#433" class="Record">UARel</a> <a id="1186" href="Cubical.HITs.Replacement.Base.html#1160" class="Bound">B</a> <a id="1188" href="Cubical.HITs.Replacement.Base.html#1140" class="Bound">ℓ≅B</a><a id="1191" class="Symbol">)</a> <a id="1193" class="Symbol">(</a><a id="1194" href="Cubical.HITs.Replacement.Base.html#1194" class="Bound">f</a> <a id="1196" class="Symbol">:</a> <a id="1198" href="Cubical.HITs.Replacement.Base.html#1146" class="Bound">A</a> <a id="1200" class="Symbol">→</a> <a id="1202" href="Cubical.HITs.Replacement.Base.html#1160" class="Bound">B</a><a id="1203" class="Symbol">)</a>  <a id="1206" class="Keyword">where</a>

  <a id="1215" class="Keyword">module</a> <a id="1222" href="Cubical.HITs.Replacement.Base.html#1222" class="Module">B</a> <a id="1224" class="Symbol">=</a> <a id="1226" href="Cubical.Displayed.Base.html#433" class="Module">UARel</a> <a id="1232" href="Cubical.HITs.Replacement.Base.html#1174" class="Bound">𝒮-B</a>

  <a id="1239" class="Keyword">data</a> <a id="1244" href="Cubical.HITs.Replacement.Base.html#1244" class="Datatype">Replacement</a> <a id="1256" class="Symbol">:</a> <a id="1258" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1263" class="Symbol">(</a><a id="1264" href="Agda.Primitive.html#961" class="Primitive">ℓ-max</a> <a id="1270" href="Cubical.HITs.Replacement.Base.html#1134" class="Bound">ℓA</a> <a id="1273" href="Cubical.HITs.Replacement.Base.html#1140" class="Bound">ℓ≅B</a><a id="1276" class="Symbol">)</a>
  <a id="1280" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1286" class="Symbol">:</a> <a id="1288" href="Cubical.HITs.Replacement.Base.html#1244" class="Datatype">Replacement</a> <a id="1300" class="Symbol">→</a> <a id="1302" href="Cubical.HITs.Replacement.Base.html#1160" class="Bound">B</a>

  <a id="1307" class="Keyword">data</a> <a id="1312" href="Cubical.HITs.Replacement.Base.html#1244" class="Datatype">Replacement</a> <a id="1324" class="Keyword">where</a>
    <a id="1334" href="Cubical.HITs.Replacement.Base.html#1334" class="InductiveConstructor">rep</a> <a id="1338" class="Symbol">:</a> <a id="1340" href="Cubical.HITs.Replacement.Base.html#1146" class="Bound">A</a> <a id="1342" class="Symbol">→</a> <a id="1344" href="Cubical.HITs.Replacement.Base.html#1244" class="Datatype">Replacement</a>
    <a id="1360" href="Cubical.HITs.Replacement.Base.html#1360" class="InductiveConstructor">quo</a> <a id="1364" class="Symbol">:</a> <a id="1366" class="Symbol">∀</a> <a id="1368" href="Cubical.HITs.Replacement.Base.html#1368" class="Bound">r</a> <a id="1370" href="Cubical.HITs.Replacement.Base.html#1370" class="Bound">r&#39;</a> <a id="1373" class="Symbol">→</a> <a id="1375" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1381" href="Cubical.HITs.Replacement.Base.html#1368" class="Bound">r</a> <a id="1383" href="Cubical.Displayed.Base.html#553" class="Function Operator">B.≅</a> <a id="1387" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1393" href="Cubical.HITs.Replacement.Base.html#1370" class="Bound">r&#39;</a> <a id="1396" class="Symbol">→</a> <a id="1398" href="Cubical.HITs.Replacement.Base.html#1368" class="Bound">r</a> <a id="1400" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1402" href="Cubical.HITs.Replacement.Base.html#1370" class="Bound">r&#39;</a>
    <a id="1409" href="Cubical.HITs.Replacement.Base.html#1409" class="InductiveConstructor">quoid</a> <a id="1415" class="Symbol">:</a> <a id="1417" class="Symbol">∀</a> <a id="1419" href="Cubical.HITs.Replacement.Base.html#1419" class="Bound">r</a> <a id="1421" class="Symbol">→</a> <a id="1423" href="Cubical.HITs.Replacement.Base.html#1360" class="InductiveConstructor">quo</a> <a id="1427" href="Cubical.HITs.Replacement.Base.html#1419" class="Bound">r</a> <a id="1429" href="Cubical.HITs.Replacement.Base.html#1419" class="Bound">r</a> <a id="1431" class="Symbol">(</a><a id="1432" href="Cubical.Displayed.Base.html#862" class="Function">B.ρ</a> <a id="1436" class="Symbol">(</a><a id="1437" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1443" href="Cubical.HITs.Replacement.Base.html#1419" class="Bound">r</a><a id="1444" class="Symbol">))</a> <a id="1447" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="1449" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a>

  <a id="1457" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1463" class="Symbol">(</a><a id="1464" href="Cubical.HITs.Replacement.Base.html#1334" class="InductiveConstructor">rep</a> <a id="1468" href="Cubical.HITs.Replacement.Base.html#1468" class="Bound">a</a><a id="1469" class="Symbol">)</a> <a id="1471" class="Symbol">=</a> <a id="1473" href="Cubical.HITs.Replacement.Base.html#1194" class="Bound">f</a> <a id="1475" href="Cubical.HITs.Replacement.Base.html#1468" class="Bound">a</a>
  <a id="1479" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1485" class="Symbol">(</a><a id="1486" href="Cubical.HITs.Replacement.Base.html#1360" class="InductiveConstructor">quo</a> <a id="1490" href="Cubical.HITs.Replacement.Base.html#1490" class="Bound">r</a> <a id="1492" href="Cubical.HITs.Replacement.Base.html#1492" class="Bound">r&#39;</a> <a id="1495" href="Cubical.HITs.Replacement.Base.html#1495" class="Bound">eqv</a> <a id="1499" href="Cubical.HITs.Replacement.Base.html#1499" class="Bound">i</a><a id="1500" class="Symbol">)</a> <a id="1502" class="Symbol">=</a> <a id="1504" href="Cubical.Displayed.Base.html#703" class="Function">B.≅→≡</a> <a id="1510" href="Cubical.HITs.Replacement.Base.html#1495" class="Bound">eqv</a> <a id="1514" href="Cubical.HITs.Replacement.Base.html#1499" class="Bound">i</a>
  <a id="1518" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1524" class="Symbol">(</a><a id="1525" href="Cubical.HITs.Replacement.Base.html#1409" class="InductiveConstructor">quoid</a> <a id="1531" href="Cubical.HITs.Replacement.Base.html#1531" class="Bound">r</a> <a id="1533" href="Cubical.HITs.Replacement.Base.html#1533" class="Bound">j</a> <a id="1535" href="Cubical.HITs.Replacement.Base.html#1535" class="Bound">i</a><a id="1536" class="Symbol">)</a> <a id="1538" class="Symbol">=</a> <a id="1540" href="Cubical.Displayed.Base.html#621" class="Function">B.uaIso</a> <a id="1548" class="Symbol">(</a><a id="1549" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1555" href="Cubical.HITs.Replacement.Base.html#1531" class="Bound">r</a><a id="1556" class="Symbol">)</a> <a id="1558" class="Symbol">(</a><a id="1559" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="1565" href="Cubical.HITs.Replacement.Base.html#1531" class="Bound">r</a><a id="1566" class="Symbol">)</a> <a id="1568" class="Symbol">.</a><a id="1569" href="Cubical.Foundations.Isomorphism.html#917" class="Field">Iso.rightInv</a> <a id="1582" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a> <a id="1587" href="Cubical.HITs.Replacement.Base.html#1533" class="Bound">j</a> <a id="1589" href="Cubical.HITs.Replacement.Base.html#1535" class="Bound">i</a>

  <a id="1594" class="Comment">{-
    To eliminate into a proposition, we need only provide the point constructor
    case.
  -}</a>

  <a id="1695" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="1704" class="Symbol">:</a> <a id="1706" class="Symbol">∀</a> <a id="1708" class="Symbol">{</a><a id="1709" href="Cubical.HITs.Replacement.Base.html#1709" class="Bound">ℓ</a><a id="1710" class="Symbol">}</a> <a id="1712" class="Symbol">{</a><a id="1713" href="Cubical.HITs.Replacement.Base.html#1713" class="Bound">P</a> <a id="1715" class="Symbol">:</a> <a id="1717" href="Cubical.HITs.Replacement.Base.html#1244" class="Datatype">Replacement</a> <a id="1729" class="Symbol">→</a> <a id="1731" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1736" href="Cubical.HITs.Replacement.Base.html#1709" class="Bound">ℓ</a><a id="1737" class="Symbol">}</a>
    <a id="1743" class="Symbol">→</a> <a id="1745" class="Symbol">((</a><a id="1747" href="Cubical.HITs.Replacement.Base.html#1747" class="Bound">r</a> <a id="1749" class="Symbol">:</a> <a id="1751" href="Cubical.HITs.Replacement.Base.html#1244" class="Datatype">Replacement</a><a id="1762" class="Symbol">)</a> <a id="1764" class="Symbol">→</a> <a id="1766" href="Cubical.Foundations.Prelude.html#14245" class="Function">isProp</a> <a id="1773" class="Symbol">(</a><a id="1774" href="Cubical.HITs.Replacement.Base.html#1713" class="Bound">P</a> <a id="1776" href="Cubical.HITs.Replacement.Base.html#1747" class="Bound">r</a><a id="1777" class="Symbol">))</a>
    <a id="1784" class="Symbol">→</a> <a id="1786" class="Symbol">((</a><a id="1788" href="Cubical.HITs.Replacement.Base.html#1788" class="Bound">x</a> <a id="1790" class="Symbol">:</a> <a id="1792" href="Cubical.HITs.Replacement.Base.html#1146" class="Bound">A</a><a id="1793" class="Symbol">)</a> <a id="1795" class="Symbol">→</a> <a id="1797" href="Cubical.HITs.Replacement.Base.html#1713" class="Bound">P</a> <a id="1799" class="Symbol">(</a><a id="1800" href="Cubical.HITs.Replacement.Base.html#1334" class="InductiveConstructor">rep</a> <a id="1804" href="Cubical.HITs.Replacement.Base.html#1788" class="Bound">x</a><a id="1805" class="Symbol">))</a>
    <a id="1812" class="Symbol">→</a> <a id="1814" class="Symbol">(</a><a id="1815" href="Cubical.HITs.Replacement.Base.html#1815" class="Bound">r</a> <a id="1817" class="Symbol">:</a> <a id="1819" href="Cubical.HITs.Replacement.Base.html#1244" class="Datatype">Replacement</a><a id="1830" class="Symbol">)</a> <a id="1832" class="Symbol">→</a> <a id="1834" href="Cubical.HITs.Replacement.Base.html#1713" class="Bound">P</a> <a id="1836" href="Cubical.HITs.Replacement.Base.html#1815" class="Bound">r</a>
  <a id="1840" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="1849" href="Cubical.HITs.Replacement.Base.html#1849" class="Bound">prop</a> <a id="1854" href="Cubical.HITs.Replacement.Base.html#1854" class="Bound">g</a> <a id="1856" class="Symbol">(</a><a id="1857" href="Cubical.HITs.Replacement.Base.html#1334" class="InductiveConstructor">rep</a> <a id="1861" href="Cubical.HITs.Replacement.Base.html#1861" class="Bound">x</a><a id="1862" class="Symbol">)</a> <a id="1864" class="Symbol">=</a> <a id="1866" href="Cubical.HITs.Replacement.Base.html#1854" class="Bound">g</a> <a id="1868" href="Cubical.HITs.Replacement.Base.html#1861" class="Bound">x</a>
  <a id="1872" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="1881" href="Cubical.HITs.Replacement.Base.html#1881" class="Bound">prop</a> <a id="1886" href="Cubical.HITs.Replacement.Base.html#1886" class="Bound">g</a> <a id="1888" class="Symbol">(</a><a id="1889" href="Cubical.HITs.Replacement.Base.html#1360" class="InductiveConstructor">quo</a> <a id="1893" href="Cubical.HITs.Replacement.Base.html#1893" class="Bound">r</a> <a id="1895" href="Cubical.HITs.Replacement.Base.html#1895" class="Bound">r&#39;</a> <a id="1898" href="Cubical.HITs.Replacement.Base.html#1898" class="Bound">eqv</a> <a id="1902" href="Cubical.HITs.Replacement.Base.html#1902" class="Bound">i</a><a id="1903" class="Symbol">)</a> <a id="1905" class="Symbol">=</a>
    <a id="1911" href="Cubical.Foundations.Prelude.html#17936" class="Function">isProp→PathP</a> <a id="1924" class="Symbol">(λ</a> <a id="1927" href="Cubical.HITs.Replacement.Base.html#1927" class="Bound">i</a> <a id="1929" class="Symbol">→</a> <a id="1931" href="Cubical.HITs.Replacement.Base.html#1881" class="Bound">prop</a> <a id="1936" class="Symbol">(</a><a id="1937" href="Cubical.HITs.Replacement.Base.html#1360" class="InductiveConstructor">quo</a> <a id="1941" href="Cubical.HITs.Replacement.Base.html#1893" class="Bound">r</a> <a id="1943" href="Cubical.HITs.Replacement.Base.html#1895" class="Bound">r&#39;</a> <a id="1946" href="Cubical.HITs.Replacement.Base.html#1898" class="Bound">eqv</a> <a id="1950" href="Cubical.HITs.Replacement.Base.html#1927" class="Bound">i</a><a id="1951" class="Symbol">))</a>
      <a id="1960" class="Symbol">(</a><a id="1961" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="1970" href="Cubical.HITs.Replacement.Base.html#1881" class="Bound">prop</a> <a id="1975" href="Cubical.HITs.Replacement.Base.html#1886" class="Bound">g</a> <a id="1977" href="Cubical.HITs.Replacement.Base.html#1893" class="Bound">r</a><a id="1978" class="Symbol">)</a>
      <a id="1986" class="Symbol">(</a><a id="1987" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="1996" href="Cubical.HITs.Replacement.Base.html#1881" class="Bound">prop</a> <a id="2001" href="Cubical.HITs.Replacement.Base.html#1886" class="Bound">g</a> <a id="2003" href="Cubical.HITs.Replacement.Base.html#1895" class="Bound">r&#39;</a><a id="2005" class="Symbol">)</a>
      <a id="2013" href="Cubical.HITs.Replacement.Base.html#1902" class="Bound">i</a>
  <a id="2017" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="2026" href="Cubical.HITs.Replacement.Base.html#2026" class="Bound">prop</a> <a id="2031" href="Cubical.HITs.Replacement.Base.html#2031" class="Bound">g</a> <a id="2033" class="Symbol">(</a><a id="2034" href="Cubical.HITs.Replacement.Base.html#1409" class="InductiveConstructor">quoid</a> <a id="2040" href="Cubical.HITs.Replacement.Base.html#2040" class="Bound">r</a> <a id="2042" href="Cubical.HITs.Replacement.Base.html#2042" class="Bound">i</a> <a id="2044" href="Cubical.HITs.Replacement.Base.html#2044" class="Bound">j</a><a id="2045" class="Symbol">)</a> <a id="2047" class="Symbol">=</a>
    <a id="2053" href="Cubical.Foundations.HLevels.html#10125" class="Function">isSet→SquareP</a> <a id="2067" class="Symbol">(λ</a> <a id="2070" href="Cubical.HITs.Replacement.Base.html#2070" class="Bound">i</a> <a id="2072" href="Cubical.HITs.Replacement.Base.html#2072" class="Bound">j</a> <a id="2074" class="Symbol">→</a> <a id="2076" href="Cubical.Foundations.Prelude.html#18522" class="Function">isProp→isSet</a> <a id="2089" class="Symbol">(</a><a id="2090" href="Cubical.HITs.Replacement.Base.html#2026" class="Bound">prop</a> <a id="2095" class="Symbol">(</a><a id="2096" href="Cubical.HITs.Replacement.Base.html#1409" class="InductiveConstructor">quoid</a> <a id="2102" href="Cubical.HITs.Replacement.Base.html#2040" class="Bound">r</a> <a id="2104" href="Cubical.HITs.Replacement.Base.html#2070" class="Bound">i</a> <a id="2106" href="Cubical.HITs.Replacement.Base.html#2072" class="Bound">j</a><a id="2107" class="Symbol">)))</a>
      <a id="2117" class="Symbol">(</a><a id="2118" href="Cubical.Foundations.Prelude.html#17936" class="Function">isProp→PathP</a> <a id="2131" class="Symbol">(λ</a> <a id="2134" href="Cubical.HITs.Replacement.Base.html#2134" class="Bound">i</a> <a id="2136" class="Symbol">→</a> <a id="2138" href="Cubical.HITs.Replacement.Base.html#2026" class="Bound">prop</a> <a id="2143" class="Symbol">(</a><a id="2144" href="Cubical.HITs.Replacement.Base.html#1360" class="InductiveConstructor">quo</a> <a id="2148" href="Cubical.HITs.Replacement.Base.html#2040" class="Bound">r</a> <a id="2150" href="Cubical.HITs.Replacement.Base.html#2040" class="Bound">r</a> <a id="2152" class="Symbol">_</a> <a id="2154" href="Cubical.HITs.Replacement.Base.html#2134" class="Bound">i</a><a id="2155" class="Symbol">))</a> <a id="2158" class="Symbol">_</a> <a id="2160" class="Symbol">_)</a>
      <a id="2169" class="Symbol">(λ</a> <a id="2172" href="Cubical.HITs.Replacement.Base.html#2172" class="Bound">_</a> <a id="2174" class="Symbol">→</a> <a id="2176" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="2185" href="Cubical.HITs.Replacement.Base.html#2026" class="Bound">prop</a> <a id="2190" href="Cubical.HITs.Replacement.Base.html#2031" class="Bound">g</a> <a id="2192" href="Cubical.HITs.Replacement.Base.html#2040" class="Bound">r</a><a id="2193" class="Symbol">)</a>
      <a id="2201" class="Symbol">(λ</a> <a id="2204" href="Cubical.HITs.Replacement.Base.html#2204" class="Bound">_</a> <a id="2206" class="Symbol">→</a> <a id="2208" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="2217" href="Cubical.HITs.Replacement.Base.html#2026" class="Bound">prop</a> <a id="2222" href="Cubical.HITs.Replacement.Base.html#2031" class="Bound">g</a> <a id="2224" href="Cubical.HITs.Replacement.Base.html#2040" class="Bound">r</a><a id="2225" class="Symbol">)</a>
      <a id="2233" class="Symbol">(λ</a> <a id="2236" href="Cubical.HITs.Replacement.Base.html#2236" class="Bound">_</a> <a id="2238" class="Symbol">→</a> <a id="2240" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="2249" href="Cubical.HITs.Replacement.Base.html#2026" class="Bound">prop</a> <a id="2254" href="Cubical.HITs.Replacement.Base.html#2031" class="Bound">g</a> <a id="2256" href="Cubical.HITs.Replacement.Base.html#2040" class="Bound">r</a><a id="2257" class="Symbol">)</a>
      <a id="2265" href="Cubical.HITs.Replacement.Base.html#2042" class="Bound">i</a> <a id="2267" href="Cubical.HITs.Replacement.Base.html#2044" class="Bound">j</a>

  <a id="2272" class="Comment">{-
    Our image factorization is F ≡ unrep ∘ rep.
    Note that this equation holds judgmentally.
  -}</a>

  <a id="2379" class="Comment">-- Surjection half of the image factorization</a>

  <a id="2428" href="Cubical.HITs.Replacement.Base.html#2428" class="Function">isSurjectiveRep</a> <a id="2444" class="Symbol">:</a> <a id="2446" href="Cubical.Functions.Surjection.html#682" class="Function">isSurjection</a> <a id="2459" href="Cubical.HITs.Replacement.Base.html#1334" class="InductiveConstructor">rep</a>
  <a id="2465" href="Cubical.HITs.Replacement.Base.html#2428" class="Function">isSurjectiveRep</a> <a id="2481" class="Symbol">=</a> <a id="2483" href="Cubical.HITs.Replacement.Base.html#1695" class="Function">elimProp</a> <a id="2492" class="Symbol">(λ</a> <a id="2495" href="Cubical.HITs.Replacement.Base.html#2495" class="Bound">_</a> <a id="2497" class="Symbol">→</a> <a id="2499" href="Cubical.HITs.PropositionalTruncation.Base.html#308" class="InductiveConstructor">squash₁</a><a id="2506" class="Symbol">)</a> <a id="2508" class="Symbol">(λ</a> <a id="2511" href="Cubical.HITs.Replacement.Base.html#2511" class="Bound">x</a> <a id="2513" class="Symbol">→</a> <a id="2515" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣</a> <a id="2517" href="Cubical.HITs.Replacement.Base.html#2511" class="Bound">x</a> <a id="2519" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2521" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a> <a id="2526" href="Cubical.HITs.PropositionalTruncation.Base.html#288" class="InductiveConstructor Operator">∣₁</a><a id="2528" class="Symbol">)</a>

  <a id="2533" class="Comment">-- Embedding half of the image factorization</a>

  <a id="2581" href="Cubical.HITs.Replacement.Base.html#2581" class="Function">isEmbeddingUnrep</a> <a id="2598" class="Symbol">:</a> <a id="2600" href="Cubical.Functions.Embedding.html#1279" class="Function">isEmbedding</a> <a id="2612" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a>
  <a id="2620" href="Cubical.HITs.Replacement.Base.html#2581" class="Function">isEmbeddingUnrep</a> <a id="2637" href="Cubical.HITs.Replacement.Base.html#2637" class="Bound">r</a> <a id="2639" href="Cubical.HITs.Replacement.Base.html#2639" class="Bound">r&#39;</a> <a id="2642" class="Symbol">=</a>
    <a id="2648" href="Cubical.Foundations.Isomorphism.html#2932" class="Function">isoToIsEquiv</a> <a id="2661" class="Symbol">(</a><a id="2662" href="Cubical.Foundations.Isomorphism.html#869" class="InductiveConstructor">iso</a> <a id="2666" class="Symbol">_</a> <a id="2668" class="Symbol">(</a><a id="2669" href="Cubical.HITs.Replacement.Base.html#2720" class="Function">inv</a> <a id="2673" href="Cubical.HITs.Replacement.Base.html#2637" class="Bound">r</a> <a id="2675" href="Cubical.HITs.Replacement.Base.html#2639" class="Bound">r&#39;</a><a id="2677" class="Symbol">)</a> <a id="2679" class="Symbol">(</a><a id="2680" href="Cubical.HITs.Replacement.Base.html#2804" class="Function">elInv</a> <a id="2686" href="Cubical.HITs.Replacement.Base.html#2637" class="Bound">r</a> <a id="2688" href="Cubical.HITs.Replacement.Base.html#2639" class="Bound">r&#39;</a><a id="2690" class="Symbol">)</a> <a id="2692" class="Symbol">(</a><a id="2693" href="Cubical.HITs.Replacement.Base.html#2921" class="Function">invEl</a> <a id="2699" href="Cubical.HITs.Replacement.Base.html#2637" class="Bound">r</a> <a id="2701" href="Cubical.HITs.Replacement.Base.html#2639" class="Bound">r&#39;</a><a id="2703" class="Symbol">))</a>
    <a id="2710" class="Keyword">where</a>
    <a id="2720" href="Cubical.HITs.Replacement.Base.html#2720" class="Function">inv</a> <a id="2724" class="Symbol">:</a> <a id="2726" class="Symbol">∀</a> <a id="2728" href="Cubical.HITs.Replacement.Base.html#2728" class="Bound">r</a> <a id="2730" href="Cubical.HITs.Replacement.Base.html#2730" class="Bound">r&#39;</a> <a id="2733" class="Symbol">→</a> <a id="2735" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="2741" href="Cubical.HITs.Replacement.Base.html#2728" class="Bound">r</a> <a id="2743" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="2745" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="2751" href="Cubical.HITs.Replacement.Base.html#2730" class="Bound">r&#39;</a> <a id="2754" class="Symbol">→</a> <a id="2756" href="Cubical.HITs.Replacement.Base.html#2728" class="Bound">r</a> <a id="2758" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="2760" href="Cubical.HITs.Replacement.Base.html#2730" class="Bound">r&#39;</a>
    <a id="2767" href="Cubical.HITs.Replacement.Base.html#2720" class="Function">inv</a> <a id="2771" href="Cubical.HITs.Replacement.Base.html#2771" class="Bound">r</a> <a id="2773" href="Cubical.HITs.Replacement.Base.html#2773" class="Bound">r&#39;</a> <a id="2776" href="Cubical.HITs.Replacement.Base.html#2776" class="Bound">Q</a> <a id="2778" class="Symbol">=</a> <a id="2780" href="Cubical.HITs.Replacement.Base.html#1360" class="InductiveConstructor">quo</a> <a id="2784" href="Cubical.HITs.Replacement.Base.html#2771" class="Bound">r</a> <a id="2786" href="Cubical.HITs.Replacement.Base.html#2773" class="Bound">r&#39;</a> <a id="2789" class="Symbol">(</a><a id="2790" href="Cubical.Displayed.Base.html#782" class="Function">B.≡→≅</a> <a id="2796" href="Cubical.HITs.Replacement.Base.html#2776" class="Bound">Q</a><a id="2797" class="Symbol">)</a>

    <a id="2804" href="Cubical.HITs.Replacement.Base.html#2804" class="Function">elInv</a> <a id="2810" class="Symbol">:</a> <a id="2812" class="Symbol">∀</a> <a id="2814" href="Cubical.HITs.Replacement.Base.html#2814" class="Bound">r</a> <a id="2816" href="Cubical.HITs.Replacement.Base.html#2816" class="Bound">r&#39;</a> <a id="2819" href="Cubical.HITs.Replacement.Base.html#2819" class="Bound">Q</a> <a id="2821" class="Symbol">→</a>  <a id="2824" href="Cubical.Foundations.Prelude.html#1430" class="Function">cong</a> <a id="2829" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="2835" class="Symbol">(</a><a id="2836" href="Cubical.HITs.Replacement.Base.html#2720" class="Function">inv</a> <a id="2840" href="Cubical.HITs.Replacement.Base.html#2814" class="Bound">r</a> <a id="2842" href="Cubical.HITs.Replacement.Base.html#2816" class="Bound">r&#39;</a> <a id="2845" href="Cubical.HITs.Replacement.Base.html#2819" class="Bound">Q</a><a id="2846" class="Symbol">)</a> <a id="2848" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="2850" href="Cubical.HITs.Replacement.Base.html#2819" class="Bound">Q</a>
    <a id="2856" href="Cubical.HITs.Replacement.Base.html#2804" class="Function">elInv</a> <a id="2862" href="Cubical.HITs.Replacement.Base.html#2862" class="Bound">r</a> <a id="2864" href="Cubical.HITs.Replacement.Base.html#2864" class="Bound">r&#39;</a> <a id="2867" href="Cubical.HITs.Replacement.Base.html#2867" class="Bound">Q</a> <a id="2869" class="Symbol">=</a> <a id="2871" href="Cubical.Displayed.Base.html#621" class="Function">B.uaIso</a> <a id="2879" class="Symbol">(</a><a id="2880" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="2886" href="Cubical.HITs.Replacement.Base.html#2862" class="Bound">r</a><a id="2887" class="Symbol">)</a> <a id="2889" class="Symbol">(</a><a id="2890" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="2896" href="Cubical.HITs.Replacement.Base.html#2864" class="Bound">r&#39;</a><a id="2898" class="Symbol">)</a> <a id="2900" class="Symbol">.</a><a id="2901" href="Cubical.Foundations.Isomorphism.html#917" class="Field">Iso.rightInv</a> <a id="2914" href="Cubical.HITs.Replacement.Base.html#2867" class="Bound">Q</a>

    <a id="2921" href="Cubical.HITs.Replacement.Base.html#2921" class="Function">invEl</a> <a id="2927" class="Symbol">:</a> <a id="2929" class="Symbol">∀</a> <a id="2931" href="Cubical.HITs.Replacement.Base.html#2931" class="Bound">r</a> <a id="2933" href="Cubical.HITs.Replacement.Base.html#2933" class="Bound">r&#39;</a> <a id="2936" href="Cubical.HITs.Replacement.Base.html#2936" class="Bound">p</a> <a id="2938" class="Symbol">→</a> <a id="2940" href="Cubical.HITs.Replacement.Base.html#2720" class="Function">inv</a> <a id="2944" href="Cubical.HITs.Replacement.Base.html#2931" class="Bound">r</a> <a id="2946" href="Cubical.HITs.Replacement.Base.html#2933" class="Bound">r&#39;</a> <a id="2949" class="Symbol">(</a><a id="2950" href="Cubical.Foundations.Prelude.html#1430" class="Function">cong</a> <a id="2955" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="2961" href="Cubical.HITs.Replacement.Base.html#2936" class="Bound">p</a><a id="2962" class="Symbol">)</a> <a id="2964" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="2966" href="Cubical.HITs.Replacement.Base.html#2936" class="Bound">p</a>
    <a id="2972" href="Cubical.HITs.Replacement.Base.html#2921" class="Function">invEl</a> <a id="2978" href="Cubical.HITs.Replacement.Base.html#2978" class="Bound">r</a> <a id="2980" class="Symbol">=</a> <a id="2982" href="Cubical.Foundations.Prelude.html#12754" class="Function Operator">J&gt;</a> <a id="2985" href="Cubical.HITs.Replacement.Base.html#1409" class="InductiveConstructor">quoid</a> <a id="2991" href="Cubical.HITs.Replacement.Base.html#2978" class="Bound">r</a>

  <a id="2996" class="Comment">-- Equivalence to the image with level (ℓ-max ℓA ℓB) that always exists</a>

  <a id="3071" href="Cubical.HITs.Replacement.Base.html#3071" class="Function">replacement≃Image</a> <a id="3089" class="Symbol">:</a> <a id="3091" href="Cubical.HITs.Replacement.Base.html#1244" class="Datatype">Replacement</a> <a id="3103" href="Agda.Builtin.Cubical.Equiv.html#1012" class="Function Operator">≃</a> <a id="3105" href="Cubical.Functions.Image.html#752" class="Function">Image</a> <a id="3111" href="Cubical.HITs.Replacement.Base.html#1194" class="Bound">f</a>
  <a id="3115" href="Cubical.HITs.Replacement.Base.html#3071" class="Function">replacement≃Image</a> <a id="3133" class="Symbol">=</a>
    <a id="3139" href="Cubical.Functions.Image.html#2899" class="Function">imagesEquiv</a>
      <a id="3157" class="Symbol">(</a><a id="3158" href="Cubical.HITs.Replacement.Base.html#1334" class="InductiveConstructor">rep</a> <a id="3162" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3164" href="Cubical.HITs.Replacement.Base.html#2428" class="Function">isSurjectiveRep</a><a id="3179" class="Symbol">)</a>
      <a id="3187" class="Symbol">(</a><a id="3188" href="Cubical.HITs.Replacement.Base.html#1280" class="Function">unrep</a> <a id="3194" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3196" href="Cubical.HITs.Replacement.Base.html#2581" class="Function">isEmbeddingUnrep</a><a id="3212" class="Symbol">)</a>
      <a id="3220" class="Symbol">(</a><a id="3221" href="Cubical.Functions.Image.html#1051" class="Function">restrictToImage</a> <a id="3237" href="Cubical.HITs.Replacement.Base.html#1194" class="Bound">f</a> <a id="3239" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3241" href="Cubical.Functions.Image.html#1126" class="Function">isSurjectionImageRestriction</a> <a id="3270" href="Cubical.HITs.Replacement.Base.html#1194" class="Bound">f</a><a id="3271" class="Symbol">)</a>
      <a id="3279" class="Symbol">(</a><a id="3280" href="Cubical.Functions.Image.html#803" class="Function">imageInclusion</a> <a id="3295" href="Cubical.HITs.Replacement.Base.html#1194" class="Bound">f</a><a id="3296" class="Symbol">)</a>
      <a id="3304" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a>
</pre></body></html>